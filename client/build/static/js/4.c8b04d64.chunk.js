(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[4],{324:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),s=a(11),o=a(12),l=a(13),c=a(15),i=a(14),u=a(0),p=a.n(u),m=a(17),d=a(29),h=a(21),b=a.n(h),w=a(7),f=a(6),v=a(20),E=a(23),k=Object(w.b)()((function(e){var t=e.t,a=e.doSubmit,r=e.pass1,n=e.doPassword1Change,s=e.pass2,o=e.doPassword2Change;return p.a.createElement(v.a,{onSubmit:a},p.a.createElement("h4",{className:"mt-0 header-title"},t("reset.title")),p.a.createElement(v.a.Group,null,p.a.createElement(v.a.Label,null,t("reset.form.password1.label")),p.a.createElement(v.a.Control,{type:"password",pattern:".{6,}",placeholder:t("reset.form.password1.placeholder"),value:r,onChange:n,required:!0})),p.a.createElement(v.a.Group,null,p.a.createElement(v.a.Label,null,t("reset.form.password2.label")),p.a.createElement(v.a.Control,{type:"password",pattern:".{6,}",placeholder:t("reset.form.password2.placeholder"),value:s,onChange:o,required:!0})),p.a.createElement(E.a,{variant:"primary",className:"w-md waves-effect waves-light",type:"submit"},t("reset.form.button.submit")))})),g=Object(w.b)()((function(e){var t=e.t;return p.a.createElement(p.a.Fragment,null,p.a.createElement("h4",{className:"mt-0 header-title"},t("reset.submit.title")),p.a.createElement("p",{className:"mb-10"},t("reset.submit.description")),p.a.createElement(d.a,{className:"btn btn-primary w-md waves-effect waves-light",to:"/login"},t("reset.submit.button.redirect.login")))})),y=Object(w.b)()((function(e){var t=e.t;return p.a.createElement(p.a.Fragment,null,p.a.createElement("h4",{className:"mt-0 header-title"},t("reset.invalid.title")),p.a.createElement("p",{className:"mb-10"},t("reset.invalid.description")),p.a.createElement(d.a,{className:"btn btn-primary w-md waves-effect waves-light",to:"/reset_password"},t("reset.invalid.button.redirect.reset")))})),C=function(e){Object(c.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,l=new Array(r),c=0;c<r;c++)l[c]=arguments[c];return(e=t.call.apply(t,[this].concat(l))).state={password1:"",password2:"",token:"",tokenError:!1,success:!1},e.controller=new AbortController,e.handleSubmit=function(){var t=Object(s.a)(n.a.mark((function t(a){var r,s,o,l;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),e.state.token){t.next=3;break}return t.abrupt("return");case 3:if(e.state.password1){t.next=5;break}return t.abrupt("return");case 5:if(e.state.password2){t.next=7;break}return t.abrupt("return");case 7:if(e.state.password1===e.state.password2){t.next=9;break}return t.abrupt("return");case 9:return r='mutation{resetPassword(token:"'.concat(e.state.token,'", password:"').concat(e.state.password1,'")}'),t.prev=10,t.next=13,Object(m.a)(r,e.controller.signal);case 13:s=t.sent,o=s.resetPassword,l=e.props.t,o?(b.a.fire({icon:"success",title:l("reset.form.success.title"),showConfirmButton:!1,timer:1500}),e.setState({success:!0})):b.a.fire({icon:"error",title:l("reset.form.invalid.title"),text:l("reset.form.invalid.text"),showConfirmButton:!1,timer:1500}),t.next=22;break;case 19:t.prev=19,t.t0=t.catch(10),console.log(t.t0);case 22:case"end":return t.stop()}}),t,null,[[10,19]])})));return function(e){return t.apply(this,arguments)}}(),e.validateToken=function(){var t=Object(s.a)(n.a.mark((function t(a){var r,s,o;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r='query{recoveryValidate(token:"'.concat(a,'")}'),t.prev=1,t.next=4,Object(m.a)(r,e.controller.signal);case 4:s=t.sent,(o=s.recoveryValidate)?e.setState({token:o}):e.setState({tokenError:!0}),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),e.setState({tokenError:!0}),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}(),e.handlePassword1Change=function(t){return e.setState({password1:t.target.value})},e.handlePassword2Change=function(t){return e.setState({password2:t.target.value})},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.validateToken(this.props.match.params.token)}},{key:"componentWillUnmount",value:function(){this.controller.abort()}},{key:"render",value:function(){return this.state.token||this.state.tokenError?p.a.createElement("div",{className:"wrapper-page"},p.a.createElement(f.a,null,p.a.createElement(f.a.Body,null,p.a.createElement("div",{className:"p-2"},this.state.tokenError&&p.a.createElement(y,null),!this.state.tokenError&&!this.state.success&&p.a.createElement(k,{doPassword1Change:this.handlePassword1Change,doPassword2Change:this.handlePassword2Change,doSubmit:this.handleSubmit,pass1:this.state.password1,pass2:this.state.password2}),!this.state.tokenError&&this.state.success&&p.a.createElement(g,null))))):null}}]),a}(u.Component);t.default=Object(w.b)()(C)}}]);
//# sourceMappingURL=4.c8b04d64.chunk.js.map