{"version":3,"sources":["components/dashboard/map/marker.jsx","components/dashboard/map/liveMap.jsx","images/logo.svg","components/dashboard/campaigns/fleetDetails.jsx","utils/queryRequest.js","utils/languageSelector.jsx","images/markers/dot_marker_blue_16.png","images/markers/dot_marker_orange_16.png","images/markers/dot_marker_green_16.png","images/markers/dot_marker_gray_16.png","images/markers/dot_marker_blue_32.png","images/markers/dot_marker_orange_32.png","images/markers/dot_marker_green_32.png","images/markers/dot_marker_gray_32.png","context/auth-context.jsx","images/app/trolleybus.svg","images/app/bus.svg","images/app/tram.svg","utils/vehicleProps.js","components/dashboard/ErrorBoundary/ErrorBoundaryStyles.js","components/dashboard/ErrorBoundary/ErrorBoundaryComponent.js","components/dashboard/Spinner/SpinnerStyles.js","components/dashboard/Spinner/SpinnerComponent.js","i18n.js","components/dashboard/all/navbar.jsx","components/dashboard/all/toolbar.jsx","components/dashboard/all/title.jsx","pages/dashboard.jsx","components/installation/components/uploadImage.jsx","components/installation/components/navs.jsx","components/installation/views/campaignsList.jsx","components/installation/components/vehicleCards.jsx","components/installation/views/history.jsx","components/installation/views/vehicleList.jsx","components/installation/utils.js","components/installation/views/placementView.jsx","components/installation/views/vehicleView.jsx","components/installation/views/byCampaign.jsx","components/installation/views/byFleet.jsx","components/installation/views/placementViewFleet.jsx","pages/installation.jsx","pages/login/loginPage.styles.js","pages/login/login.jsx","utils/withAuth.jsx","history.js","serviceWorker.js","index.js","components/dashboard/utils/dataTable.jsx","components/dashboard/utils/smallInfoCard.jsx","utils/activityTypes.js","utils/roles.js","utils/formatDate.js","components/dashboard/views/assign.jsx","components/dashboard/views/assignments.jsx","components/dashboard/ads/history.jsx","components/dashboard/views/ads.jsx","components/dashboard/clients/clientTool.jsx","components/dashboard/views/clients.jsx","components/dashboard/views/sales.jsx","components/dashboard/views/settings.jsx","components/dashboard/views/campaignDetails.jsx","components/dashboard/campaigns/CampaignTool.styles.js","components/dashboard/campaigns/campaignTool.jsx","components/dashboard/views/campaigns.jsx","components/dashboard/views/mails.jsx","components/dashboard/users/userTool.jsx","components/dashboard/views/users.jsx","components/dashboard/views/operators.jsx","components/dashboard/teams/teamsTool.jsx","components/dashboard/views/teams.jsx","components/dashboard/teams/addInstallerTool.jsx","components/dashboard/teams/selectedInstallerTool.jsx","components/dashboard/views/team.jsx","components/dashboard/utils/listFeed.jsx","components/dashboard/fleets/installationNotificationFeed.jsx","components/dashboard/views/fleetDetails.jsx","components/dashboard/views/fleet.jsx","components/dashboard/general/activeCampaigns.jsx","components/dashboard/general/totalCampaigns.jsx","components/dashboard/general/latestCampaigns.jsx","components/dashboard/general/incomePerMonth.jsx","components/dashboard/general/salesNotificationFeed.jsx","components/dashboard/general/campaignNotificationFeed.jsx","components/dashboard/general/generalLiveMap.jsx","components/dashboard/roleBased/generalAdmin.jsx","components/dashboard/roleBased/generalLead.jsx","components/dashboard/routes.js","components/dashboard/views/genaral.jsx","components/dashboard/campaignDetails/cards.jsx"],"names":["ListItem","translate","t","campaign","selected","click","Card","style","backgroundColor","border","Accordion","Toggle","as","Header","eventKey","_id","onClick","className","href","name","cursor","Collapse","Body","Col","Row","client","company","formatDate","parseInt","startDate","endDate","Empty","VehicleLink","data","list","vehTypeStr","toUpperCase","vehID","line","vehicleNumber","Marker","state","campaigns","controller","AbortController","handleClick","a","query","queryRequest","signal","campaignVehicles","props","doHighLight","map","vehObj","console","log","loadCampaigns","vehicleCampaigns","setState","handleAccordionClick","this","cb","doUnHighLight","length","maxHeight","width","key","Component","contextType","AuthContext","LiveMap","intervalID","vehicles","removeHighLight","forEach","vehicle_id","setIcon","dotIconSpecial","Object","values","vehicle","origIcon","refreshData","token","getData","moveVehicle","createVehicle","doSelection","latitude","longitude","haveAds","icon","listed","dotIconActive","dotIcon","dotIconUnlisted","pointer","L","marker","riseOnHover","zIndexOffset","undefined","addTo","getPopup","popup","document","createElement","ReactDOM","render","details","bindPopup","openPopup","on","ev","target","veh","smooth","refreshRate","getLatLng","equals","distanceTo","slideTo","duration","keepAtCenter","setLatLng","latLng","hiLight","unHiLight","isPopupOpen","closePopup","size","height","center","zoom","continuousWorld","tileLayer","detectRetina","maxZoom","maxNativeZoom","minZoom","iconUrl","blue","iconSize","iconAnchor","popupAnchor","green","orange","gray","setInterval","setTimeout","abort","clearInterval","minHeight","borderRadius","id","module","exports","FleetDetails","content","loaded","Fragment","city","JSON","stringify","placements","installs","install","placement","count","place","animation","variant","vehicleInstalls","uniqueInstalls","inst","toString","sessionStorage","getItem","localStorage","fetch","method","body","headers","Authorization","res","json","errors","Error","i18n","defaultValue","language","onChange","e","changeLanguage","value","validLangs","short","React","createContext","tokenExpiration","role","login","logout","types","1","img","require","2","3","vehType","split","slice","type","keys","includes","vehTypeObject","measure","lat1","lon1","lat2","lon2","dLat","Math","PI","dLon","sin","cos","atan2","sqrt","ErrorImageOverlay","styled","div","ErrorImageContainer","imageUrl","ErrorImageText","h2","ErrorBoundary","hasErrored","error","info","children","SpinnerOverlay","SpinnerContainer","Spinner","supportedLangs","use","detector","Backend","reactI18nextModule","init","whitelist","lng","fallbackLng","backend","loadPath","ns","defaultNS","keySeparator","interpolation","escapeValue","formatSeparator","react","wait","missingKeyHandler","fallbackValue","NavbarItem","to","context","useContext","zIndex","src","logo","alt","getNavs","n","path","translation","badge","initialColors","0","5","11","getInitials","fullName","f","l","nameTrim","trim","canvas","display","appendChild","getContext","fillStyle","fillRect","font","initials","fillText","toDataURL","removeChild","Toolbar","title","lang_toggle","user_toggle","togglescreen","fullscreenElement","mozFullScreenElement","webkitFullscreenElement","cancelFullScreen","mozCancelFullScreen","webkitCancelFullScreen","documentElement","requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","Element","ALLOW_KEYBOARD_INPUT","roleTranslate","toLowerCase","evt","preventDefault","data-toggle","minWidth","handleLogout","doNavbarDisplay","imgUrl","TitleFunction","Inner","component","handleNavBar","getElementById","classList","toggle","getRoutes","r","Title","removeImg","reload","pictureDelete","Swal","fire","showConfirmButton","timer","text","Img","me","openLB","splited","thumbnail","maxWidth","user_id","Button","Images","images","index","lightbox","loadImages","campaignPictures","openLightbox","Modal","centered","scrollable","onHide","handleClose","keyboard","show","borderBottom","i","mainSrc","nextSrc","prevSrc","onCloseRequest","onMovePrevRequest","onMoveNextRequest","Footer","borderTop","uploadImage","campaign_id","file","fd","FormData","append","timerProgressBar","onBeforeOpen","showLoading","close","then","result","status","SearchAndTriggerNav","onSubmit","mt","placeholder","trigger","Navbar","fixed","Container","InputGroup","FormControl","Append","xs","switch","checked","htmlFor","data-on-label","data-off-label","off","marginTop","marginBottom","CampaignNav","uploadBtn","start","Date","end","pl","reduce","b","useState","lineHeight","getDate","getMonth","ProgressBar","now","hidden","ref","input","files","HomeNav","justifyContent","NavDropdown","Item","CampaignItem","statusSize","placesLeftPercent","color","priority","striped","label","CampaignList","search","searchTimeout","loadInCampaigns","campaignsForInstallers","handleSearchChange","clearTimeout","handleSearchSubmit","camp","VehicleByPlacement","Badge","operator","VehicleByHistory","activityType","ActivityTypes","INSTALL","NEW","date","created_at","object","remove","fontSize","user","padStart","getFullYear","VehicleByCampaign","doVehicleSelect","padding","totalAds","History","installsLoadIn","history","handleSwitchTrigger","scrolling","load","loading","VehicleList","inUse","handleLoadIn","handleSearch","loadAll","loadCampaign","campaignVehiclesForInstallers","vehiclesForInstallers","goBack","compressInstallsInVehicle","handleAdRemoving","placement_id","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","removeAdd","removeAd","UninstallCard","doRemove","displayCampaign","OtherCampaignUninstallCard","successful","badRequest","limit","PlacementView","alert","showOthers","handlePlacementsLoad","handleInstall","installed","filter","installAd","doCampReload","doPlacementLoad","match","params","doVehicleReload","handleSubmit","handleInstallCountChange","test","handleFullRefresh","all","marginLeft","marginRight","Alert","p","Heading","borderColor","PlacementItem","md","Placements","placem","VehicleView","selectedPlacement","handlePlacementLoad","find","handleSelection","doVehicleLoad","ByCampaign","selectedCampaign","selectedVehicle","redirect","handleCampaignLoading","placementsForInstaller","handleVehicleSelect","handleVehicleLoading","push","FleetList","loadVehicles","activeVehicles","PlacementUninstallCard","doRemoving","PlacementViewFleet","handleVehicleLoad","catch","getInstallerId","setInstaller","installerMe","intaller","ByFleet","CampaignsList","exact","HideIcon","span","LoginInput","InputWrapper","AlertDismiss","onClose","hide","dismissible","message","Login","email","password","remember","logging","expired","invalid","connection","handlePasswordToggle","prevState","handleUserChange","handlePassChange","handleRemeber","Form","Group","Label","autoComplete","username","required","minLength","faEyeSlash","faEye","rolesToDashboard","LoggingIn","Auth","tokenValidate","validated","setItem","removeItem","token_data","jwt_decode","userId","userName","userRole","exp","Provider","Installation","Dashboard","RootRedirect","createBrowserHistory","isLocalhost","Boolean","window","location","hostname","registerValidSW","swUrl","config","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","onUpdate","onSuccess","PasswordRecovery","lazy","NewPassword","ClientLogin","MainRouting","fallback","URL","process","origin","addEventListener","response","contentType","get","indexOf","ready","unregister","checkValidServiceWorker","$","DataTable","arrayToObject","array","keyField","obj","item","Promise","columns","col","$table","el","order","ajax","url","beforeSend","request","setRequestHeader","rowCallback","responsive","lengthMenu","zeroRecords","infoEmpty","infoFiltered","loadingRecords","processing","thousands","paginate","first","last","next","previous","setRefresh","thead","SmallInfoCard","link","colorDescription","main","description","CAMPAIGN","EDIT","NAME","CLIENT","BUDGET","CITIES","START_DATE","END_DATE","NOTIFICATION","PRE_START","START","PRE_END","END","INSTALLED","REMOVED","SHARE","DELETE","PLACEMENT","COUNT","OPERATOR","COMPANY","LISTED","REMOVE","CLEAR","PERSON","EMAIL","PHONE","FLEET","NUMBERPLATE","USER","ROLE","CITY","PASSWORD","roles","badgeColors","rolenr","getBadgeColor","update","team","refresh","number","installOrderCreate","installOrderRemove","Column","assigned","String","setValue","num","Team","teams","loadFullData","teamsObj","teamsInstallOrder","installOrders","Table","bordered","hover","t_id","o","visible","searchable","_","more","defaultContent","add","onclick","options","chart","stacked","xaxis","total","series","serial","toISOString","y","tempDate","x","sm","xl","Ads","places","ClientTool","person","phone","handleDelete","cancelButtonText","clientHardDelete","doRefresh","loadClientData","Control","handleNameChange","handlePersonChange","handleEmailChange","handlePhoneChange","block","ClientsTable","Clients","handleRefresh","Sales","orderable","Settings","CampaignDetails","progress","selection","openLightBox","pictures","cities","countList","Set","getTime","timeLeftPercent","join","totalFleets","budget","creator","mapData","getMapData","flexDirection","alignItems","Image","FullView","TitleContainer","registerLocale","et","Place","lg","Prepend","doButtonPress","doChange","CampaignTool","cities_selected","start_date","end_date","contactEmail","clients","empty","loadCampaignData","citySelection","initialLoad","campaignHardDelete","handleShare","def","inputValue","inputAttributes","autocapitalize","showLoaderOnConfirm","preConfirm","campaignShare","showValidationMessage","allowOutsideClick","isLoading","havePlace","placesSave","campaignUpdate","campaignCreate","handleCityChange","handleClientChange","handleStart","handleEnd","handleBudgetChange","handlePriorityChange","handlePlaceButtonPress","sum","handlePlaceCountChange","handlePlaceGetCount","onSelect","dateFormat","isMulti","CampaignsTable","Campaigns","MailingCheckbox","margin","Mails","createdCell","td","dataCell","dataRow","createCell","change","handleCheckboxClick","userMailing","position","UserTool","k","edit","loadAllCities","componentWillReceiveProps","loadUserData","roleSave","userHardDelete","handleRoleChange","Users","CityAccordion","operatorsAll","op","OperatorAccordion","OperatorToggle","decOnClick","useAccordionToggle","setCompany","setEdit","operatorId","column","disabled","v","Operators","loadCityOperators","handleOperatorChange","TeamsTool","teamHardDelete","loadTeamData","Teams","doSelect","handleInstallerChange","loadInstallers","installersValid","u","installerCreate","installerRemove","ListFeedItem","realDate","dateToString","dangerouslySetInnerHTML","__html","loadMore","activities","feed","ListFeed","doLoadMore","onScroll","scrollHeight","clientHeight","scrollTop","InstallationNotificationFeed","activityTypes","campaignsOnTheFleet","numberPlate","Fleet","ActiveCampaigns","campaignsActive","TotalCampaigns","budgets","LatestCampaigns","IncomePerMonth","campaignsTil","thisMonth","revThis","revLast","cmp","SalesNotificationFeed","CampaignNotificationFeed","GeneralLiveMap","operator_selected","city_selected","operatorVehicles","cityVehicles","tempCity","tempOperator","operators","openCityDefault","appRoutes","general","nav","users","Campaign","sales","Vehicles","Vehicle","assignments","Assignments","assign","Assign","mails","settings","isAllowed","route","RoleLink","replace","entries","TimeSpan","Cities","SaleBy","Budget","Live","InstallPlacementStat","InstallProgress","renderTableData","fleet","ads","removed","ActivityTable"],"mappings":"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","file":"static/js/main.3eca5c82.chunk.js","sourcesContent":["import React, {Component} from \"react\";\nimport AuthContext from \"../../../context/auth-context\";\nimport queryRequest from \"../../../utils/queryRequest\";\nimport { vehID, vehTypeStr } from \"../../../utils/vehicleProps\";\n\nimport Col from 'react-bootstrap/Col';\nimport Row from 'react-bootstrap/Row';\nimport Card from 'react-bootstrap/Card';\nimport Accordion from 'react-bootstrap/Accordion';\n\nimport {translate} from 'react-i18next';\nimport formatDate from \"../../../utils/formatDate\";\n\nconst ListItem = translate()(({t, campaign, selected, click}) =>\n    <Card style={{backgroundColor:'rgba(0,0,0,0)', border:'unset'}}>\n        <Accordion.Toggle as={Card.Header} eventKey={campaign._id} style={{border:'unset'}} onClick={click} className=\"p-1\">\n            <strong><a href={`/dashboard/campaign/${campaign._id}`} className='text-orange'> {campaign.name}</a></strong> <i className={`fa ${ selected ?'fa-angle-up' : 'fa-angle-down'}`} style={{cursor:'pointer'}}/>\n        </Accordion.Toggle>\n\n        <Accordion.Collapse eventKey={campaign._id}>\n            <Card.Body className=\"p-2\">\n                <Col>\n                    <Row>\n                        {t('map.marker.pre.client')}&nbsp;<strong><a href={`/dashboard/client/${campaign.client._id}`} className='text-orange'>{campaign.client.company}</a></strong>\n                    </Row>\n                    <Row>\n                        {t('map.marker.pre.startDate')}&nbsp;<strong>{formatDate(parseInt(campaign.startDate))}</strong>\n                    </Row>\n                    <Row>\n                        {t('map.marker.pre.endDate')}&nbsp;<strong>{formatDate(parseInt(campaign.endDate))}</strong>\n                    </Row>\n                </Col>\n            </Card.Body>\n        </Accordion.Collapse>\n    </Card>);\n\nconst Empty = translate()(({ t }) => <div>{t('map.marker.empty')}</div>);\n\nconst VehicleLink = translate()(({t, data, list }) => {\n    if (!list)\n        return <span>{vehTypeStr(data._id, t).toUpperCase()} {vehID(data._id)} {(data.line ? `(${data.line})` : \"\")} {data.vehicleNumber ? `: ${data.vehicleNumber}` : ''}</span>\n    return <a href={`/dashboard/vehicle/${data._id}`}>{vehTypeStr(data._id, t).toUpperCase()} {vehID(data._id)} {(data.line ? `(${data.line})` : \"\")} {data.vehicleNumber ? `: ${data.vehicleNumber}` : ''}</a>\n});\n\nclass Marker extends Component {\n    state = {\n        selected: null,\n        campaigns: []\n    };\n\n    controller = new AbortController();\n\n    static contextType = AuthContext;\n\n    async componentDidMount() {\n        await this.loadCampaigns();\n        this.props.cb();\n    }\n\n    handleClick = async () => {\n        if (!this.state.selected) return;\n        const query = `query{campaignVehicles(_id:\"${this.state.selected}\"){ _id }}`;\n        try {\n            const { campaignVehicles } = await queryRequest(query, this.controller.signal);\n            if (!campaignVehicles) return;\n\n            this.props.doHighLight(campaignVehicles.map(vehObj => vehObj._id))\n        } catch (e) {\n            console.log(e)\n        }\n    };\n\n    loadCampaigns = async () => {\n        const query = `query{vehicleCampaigns(_id:\"${this.props.data._id}\"){ _id name startDate endDate client {_id company}}}`;\n        try {\n            const { vehicleCampaigns } = await queryRequest(query, this.controller.signal);\n            this.setState({campaigns: vehicleCampaigns})\n        } catch (e) {\n            console.log(e)\n        }\n    };\n\n    handleAccordionClick = (_id) => {\n        if (this.state.selected === _id) {\n            this.setState({selected: null})\n        } else {\n            this.setState({selected: _id})\n        }\n    };\n\n    render() {\n        if (this.state.selected) this.handleClick();\n        else this.props.doUnHighLight();\n        return (\n            <div>\n                <strong>\n                    <VehicleLink data={this.props.data} list={this.props.list}/>\n                </strong>\n                { this.state.campaigns.length > 0 && this.props.list &&\n                    <div className=\"scrollable\" style={{maxHeight: 140, width:'max-content'}}>\n                        <Accordion>\n                            {this.state.campaigns.map(campaign => <ListItem key={campaign._id} campaign={campaign} selected={campaign._id === this.state.selected} click={() => this.handleAccordionClick(campaign._id)}/>)}\n                        </Accordion>\n                    </div>\n                }\n                { this.state.campaigns.length === 0 && this.props.list && <Empty/>}\n            </div>)\n    }\n}\n\nexport default Marker;\n","import React, { Component } from \"react\";\nimport L from \"leaflet\";\nimport \"leaflet.marker.slideto\";\nimport queryRequest from \"../../../utils/queryRequest\";\nimport ReactDOM from \"react-dom\";\nimport VehicleMarker from './marker';\n\nimport AuthContext from \"../../../context/auth-context\";\n\nimport blue from '../../../images/markers/dot_marker_blue_16.png';\nimport orange from '../../../images/markers/dot_marker_orange_16.png';\nimport green from '../../../images/markers/dot_marker_green_16.png';\nimport gray from '../../../images/markers/dot_marker_gray_16.png';\n\nclass LiveMap extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      size: props.data.height || 580,\n      smooth: true,\n      refreshRate: 10000,\n      doSelection: props.doSelection,\n    };\n  }\n\n  static contextType = AuthContext;\n  \n  intervalID = 0;\n  controller = new AbortController();\n\n  componentDidMount() {\n\n    const { latitude, longitude } = this.props.data;\nconst { refreshRate } = this.state;\n    this.map = L.map(\"map\", {\n      center: [latitude || 0, longitude || 0],\n      zoom: this.props.data.zoom || 11,\n      continuousWorld: true,\n    });\n\n    // const TILES = 'https://{s}.tile.openstreetmap.de/tiles/osmde/{z}/{x}/{y}.png'\n    const TILES = 'https://4.base.maps.cit.api.here.com/maptile/2.1/maptile/newest/normal.day/{z}/{x}/{y}/256/png8?app_id=fL46BlQybP6rGwlfCw9f&app_code=nbbrVKYICWOqgenUhmpEBg';\n\n    L.tileLayer(TILES, {\n      detectRetina: true,\n      maxZoom: 19,\n      maxNativeZoom: 17,\n      minZoom: 8,\n    }).addTo(this.map);\n\n\n    this.dotIcon = L.icon({\n      iconUrl: blue,\n      iconSize: [13, 13],\n      iconAnchor: [7, 7], // left-Right down-up\n      popupAnchor: [0, 0]\n    });\n\n    this.dotIconActive = L.icon({\n      iconUrl: green,\n      iconSize: [13, 13],\n      iconAnchor: [7, 7], // left-Right down-up\n      popupAnchor: [0, 0]\n    });\n\n    this.dotIconSpecial = L.icon({\n      iconUrl: orange,\n      iconSize: [13, 13],\n      iconAnchor: [7, 7], // left-Right down-up\n      popupAnchor: [0, 0]\n    });\n\n    this.dotIconUnlisted = L.icon({\n      iconUrl: gray,\n      iconSize: [13, 13],\n      iconAnchor: [7, 7], // left-Right down-up\n      popupAnchor: [0, 0]\n    });\n\n    this.vehicles = {};\n\n    this.refreshData();\n    this.intervalID = setInterval(this.refreshData, refreshRate);\n  }\n\n  // Todo: Make filter by search\n\n  doHighLight = (vehicles) => {\n    this.removeHighLight();\n    vehicles.forEach(vehicle_id =>vehicle_id in this.vehicles? this.vehicles[vehicle_id].setIcon(this.dotIconSpecial): '');\n  };\n\n  removeHighLight = () => {\n    Object.values(this.vehicles).forEach(vehicle => vehicle.setIcon(vehicle.origIcon));\n  };\n\n  refreshData = async () => {\n    try {\n      const data = await queryRequest(this.props.data.query, this.controller.signal, this.props.data.token);\n      const vehicles = this.props.data.getData(data);\n      for (const vehicle of vehicles) {\n        if (vehicle._id in this.vehicles) this.moveVehicle(vehicle);\n        else this.createVehicle(vehicle);\n      }\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  createVehicle = (vehicle) => {\n    const { doSelection} = this.state;\n    const { _id, latitude, longitude, haveAds, listed } = vehicle;\n    const icon = listed !== false ? haveAds ? this.dotIconActive : this.dotIcon : this.dotIconUnlisted;\n\n    let pointer = L.marker([latitude, longitude], {\n      riseOnHover: true,\n      icon,\n      zIndexOffset: (vehicle.haveAds? 800: undefined),\n    }).addTo(this.map);\n\n    pointer.origIcon = icon;\n\n    pointer.click = () => {\n      const marker = this.vehicles[_id];\n      if (!marker.getPopup()) {\n        const popup = document.createElement('div');\n        marker.vehicle = ReactDOM.render(<VehicleMarker data={vehicle} list={!(this.props.data.details === false)}  doUnHighLight={this.removeHighLight} doHighLight={this.doHighLight} cb={() => {\n          marker.bindPopup(popup);\n          marker.openPopup();\n        }} />, popup);\n      }\n    };\n\n    pointer.on(\"click\", (ev) => {\n      const marker = ev.target;\n      if (doSelection) {\n        if (this.props.selected !== _id) doSelection(_id);\n      }\n      else marker.click();\n    });\n\n    pointer.on(\"popupopen\", () => {\n      const marker = this.vehicles[_id];\n      marker.setIcon(this.dotIconSpecial);\n      marker.vehicle.handleClick();\n    });\n\n    pointer.on(\"popupclose\", ev => {\n      this.removeHighLight();\n      if (this.props.doSelection) {\n        if (this.props.selected === _id) {\n          doSelection(\"\");\n        }\n      }\n    });\n    this.vehicles[_id] = pointer;\n  }\n\n  moveVehicle = (veh) => {\n    const { smooth, refreshRate} = this.state;\n    const {_id, latitude, longitude} = veh;\n    if (this.vehicles[_id].getLatLng().equals([latitude, longitude])) return;\n    if (smooth && this.vehicles[_id].getLatLng().distanceTo([latitude, longitude]) < 500) {\n      this.vehicles[_id].slideTo([latitude, longitude], {\n        duration: refreshRate,\n        keepAtCenter: false\n      });\n    }\n    else this.vehicles[_id].setLatLng(new L.latLng(latitude, longitude));\n  }\n\n  hiLight = (selected) => {\n    const marker = this.vehicles[selected];\n    marker.click();\n    if (marker.getPopup()) marker.openPopup();\n  };\n\n  unHiLight = () => {\n    for (const vehicle of Object.values(this.vehicles)) {\n      if (vehicle.isPopupOpen()) {\n        vehicle.closePopup();\n      }\n    }\n  };\n  \n  componentWillReceiveProps(props) {\n    const {doSelection} = this.state;\n    if (props.selected) {\n      setTimeout(() => this.hiLight(props.selected), 1);\n    } else if (doSelection) {\n      this.unHiLight();\n    }\n  }\n\n  componentWillUnmount() {\n    this.controller.abort();\n    clearInterval(this.intervalID);\n  }\n\n  render() {\n    const {size, doSelection, smooth, refreshRate} = this.state;\n    return (\n        <div style={{ minHeight: size, borderRadius: 5 }} id=\"map\" />\n    );\n  }\n}\n\nexport default LiveMap;\n","module.exports = __webpack_public_path__ + \"static/media/logo.7d82b0fb.svg\";","import React, {Component} from 'react';\nimport queryRequest from \"../../../utils/queryRequest\";\nimport {vehID, vehTypeStr} from \"../../../utils/vehicleProps\";\n\nimport Row from \"react-bootstrap/Row\";\nimport Col from \"react-bootstrap/Col\";\nimport Card from \"react-bootstrap/Card\";\nimport Spinner from \"react-bootstrap/Spinner\";\n\nimport {translate} from 'react-i18next';\n\nclass FleetDetails extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            loaded: false,\n            vehicle: {},\n            installs: []\n        }\n    }\n\n    controller = new AbortController();\n\n    componentWillUnmount() {\n        this.controller.abort();\n    }\n\n    componentDidMount() {\n        this.refreshData(this.props.data);\n    }\n\n    async refreshData(_id) {\n        this.setState({loaded: false, vehicle: {}});\n        const query = `query{vehicle(_id:\"${_id}\"){_id type city{name}}\n        vehicleInstalls(_id:\"${_id}\"){count placement{_id place{name}}campaign{ _id name startDate endDate client{_id company}}}}`;\n\n        try {\n            const {vehicle, vehicleInstalls} = await queryRequest(query, this.controller.signal, this.props.token);\n\n            const uniqueInstalls = {};\n            for (const inst of vehicleInstalls) {\n                if (inst[\"placement\"][\"_id\"] in uniqueInstalls) {\n                    uniqueInstalls[inst[\"placement\"][\"_id\"]].count += inst.count;\n                } else {\n                    uniqueInstalls[inst[\"placement\"][\"_id\"]] = inst;\n                }\n            }\n            if (vehicle && vehicleInstalls) {\n                this.setState({vehicle, installs: Object.values(uniqueInstalls), loaded: true});\n            } else {\n                this.setState({loaded: true});\n            }\n        } catch (err) {\n            if (err.name !== 'AbortError') {\n                console.log(\"Ohnoo, \", err.toString());\n                this.setState({loaded: true});\n            }\n        }\n    }\n\n    componentWillReceiveProps(props) {\n        if (props.data === this.state.vehicle._id) return;\n        this.refreshData(props.data);\n    }\n\n    content = () => {\n        const { t } = this.props;\n        if (!this.state.loaded) return (\n            <div className=\"text-center m-3\">\n                <Spinner animation='border' variant='warning'/>\n            </div>);\n\n        if (this.state.loaded && !this.state.vehicle._id) return (<h4 className=\"text-center\">{t('error')}</h4>);\n\n        return (\n            <React.Fragment>\n                <h4 className=\"mb-1\">{vehTypeStr(this.state.vehicle._id, t).toUpperCase()} {vehID(this.state.vehicle._id)}</h4>\n                <h5 className=\"mt-1\">{this.state.vehicle.city.name}</h5>\n                <h5 className=\"mb-0 border-bottom\">{t('db.campaign.vehicle.list.title')}</h5>\n                <p>{JSON.stringify(this.state.placements)}</p>\n                {this.state.installs && this.state.installs.map(install => {\n                    return (\n                        <Row key={install.placement._id}>\n                            <Col className=\"shadow p-3 mb-2 bg-white rounded\">\n                                <h6>{install.campaign.name}: {install.count}x {install.placement.place.name}</h6>\n                            </Col>\n                        </Row>)\n                })}\n            </React.Fragment>);\n    };\n\n    render() {\n        return (\n            <Card className=\"m-b-20\">\n                <Card.Body>\n                    {this.content()}\n                </Card.Body>\n            </Card>\n        )\n    }\n}\n\nexport default translate()(FleetDetails);","export default async (query, signal, key) => {\n  let token = key || sessionStorage.getItem('_t') || localStorage.getItem('_t');\n  const res = await fetch('/api', {\n    method: 'POST',\n    signal: signal,\n    body: JSON.stringify({ query: query }),\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: token ? `Bearer ${token}` : '',\n    },\n  });\n\n  const json = await res.json();\n  if (json.errors) throw new Error(JSON.stringify(json.errors));\n  return json.data;\n};\n\n// const query = { query: `query{ clients { _id }}`}\n\n// try {\n//    const {clients} = await queryRequest(query);\n//    if (clients) { }\n// } catch (err) {\n//   if (err.name === 'SyntaxError') {\n//     // No Connection\n//   } else if (err.name === 'AbortError') {\n//     // Aborted\n//   } else {\n//     // Bad request\n//   }\n// }\n","import React from 'react';\n\nimport { translate } from 'react-i18next';\n\nimport FormControl from 'react-bootstrap/FormControl';\n\nexport default translate()(({ i18n }) => {\n  return (\n    <FormControl\n      defaultValue={i18n.language}\n      onChange={(e) => i18n.changeLanguage(e.target.value)}\n      as=\"select\"\n    >\n      {i18n.validLangs.map(({ short }) => (\n        <option key={short} value={short}>\n          {short.toUpperCase()}\n        </option>\n      ))}\n    </FormControl>\n  );\n});\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsIAAA7CARUoSoAAAAHuSURBVDhPY0AHZ8+etf/06dPsjx8/3vv69et/EAay7wPxbKCcA1QZJpg6dSr7mzdvlv/79+8/LgCSA6kBqYVqY2AEESCB6Ojok/z8/Pog/oHTdxg2HX7A8OjlZwaG/wwMchK8DH62CgwOpiogaQagay4uW7bMPCsr6yfYAJCpwsLCEb9+/WEonbiH4djV9wyMjGApOAA6gMFKW4ihK9+ZgZ2NheHdu3crgHoiGUF+NjQ0PADSUNy3i+Hw5XdQLdiBra4QQ2+RG9jA8+fPOzCpqqrGgDSfuvSA4eClt1BluMHBi2/BakF6QHqZgCY5gyQ2HXnAwITmbGyAiYkRrBYEgHpdmFhYWBRBnMevvoIFiQEwtUC9CkxgFhAwA00mFiCrZfrz5w/YPYqSPGABYoCiFC+YBukFuWAPiBPuqg701D8QEz8Aqgl3UYNyGPYw3blzZykoStQUxBmC7WWh4rgBSA1ILUgPSC8sIYESRThIsHfxUYbV+x8BEyA8eMCAkeEfQ6iDHENxnDU4Ct++fbtSREQkghkkKS8vv1ldXd2Xg4NDwkpfjsHTQhro1N8MfFwsDLJiXAxWumIMTakWDJ426mDNoKS8YsUK761bt/4Fmw4C06ZNA2WmFURkphUgtVBtmACUZaHZ+T7h7MzAAADkjSMLDltY0QAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsIAAA7CARUoSoAAAAGPSURBVDhPjZPPSgJRFMbPHYdaFijUsizbz7Y/JNQLBEEGPUKLgnqKhFa6cR0ZtGnVxoVotQhkegDLwBYJKmrMRse5ne92RwbNmh/cuWfO+b7LHeYcGqdSqWz3er1ct9t9cxxHYnFc45XjWlLLJslkMrPNZvPa8zw5DdSggVbbfkCi0+m8aJ0cfBTloHwi+/d7aiFGzgfabDarDhF44NRoNJqiYZ/cpzOixqNfCiCJFjbIXE8TRWao3W7n2XMo8M2WZRWFEOQ+nBJ9lrVhCotbZG5eEl+EbNtOGolE4gjmYeOZzSWt+gPWQAsPvAaftIO8rN3xc/zavyG0lj1S7hqmaS6rN6eutlBoLXuXDBUxHkV09D9BreG67rsK5uIqEQZfCy9uUMCLWD3AFoqAtmBUq9Ur/JLI/BqJ+L7OTwcaaOGB128kNAUfK8m1L4hebznroRTAILHCZuucY0GtVusmFoulVAmtzMMyauXhV10O7LTsl47VQoycT7CVRyCBm4QYpvyEOQhGVo9z7f9xJvoGl9RK2nAZgogAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsIAAA7CARUoSoAAAAGISURBVDhPjZM/S8NQFMVfnvUPutjiB6hDRBSELq4WdFFRcFAcOikIxaXgoH6Qdik4VdpNVNSliLiHOGQRQtMlW4NJIFQk5PnOM6nVEM0vXPJy7zk3Kb2X/EZRlBXXdeuO43Q8z2MIfjZ41HmtGMriVKvV8V6v1wyCgCWBGjTQhrYvkLBt+yXUseu3e7Zt7LP512UROCMXAW2tVvtugq4o9IN3tmnsMapl2YiW+xFUmxY1aIBlWU14JfzmQqHwJEkS2emWyK33IJomsTW1Tq7yDcJ7EFVVi1SW5RLMj+4zufHuQlky0EALD7yUd1pF4cJuEIlQIfoLaKAF3LtGM5nMLB70j45IpiHScm9+8MpRfqVlWEt93+/isDAxJxJpiLTw4gvaeDjOHeGWiiFtm+q6fom/ZGlykZSzh2E+mXL2QGjhgVck+SC1eIIF/KqYZ2xMm4kNEnIV81RoADzCDDDKfFkGo6z3DXZinrONzq4InJGLiI0yQAJdUyxTK2YeBisbrrPx/zoT8glMe3fWyqhIqgAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsEAAA7BAbiRa+0AAAGVSURBVDhPjZO9TsJgFIZPC2HDSNoFU0IUouBmZAMl4sA16AV4UY4McgkkECGoCQM1TEgcEEkRGfizkBASfux7QgmCSp+kzfl536/92vPROuVyOdLtdhPD4VAbjUZzXIg7nU4CvYVsk1QqtdNut+9ms9n8L9CDBtqFjQTcUAiHw/dOpzOEvF7XqFqtUa/XR0ou1y75fPvk9Xo4HwwGaqFQuIzH4zovgFUlSbqaTCaUzz9Ro9Fk4TqKskfRaITsdjsZW0rKsnwtYF/BYPBREATKZh9I0xoL+e94PArFYudk7IgqlcqZ6Ha7b2D+aH5uNQNooIUHXtHhcFygUXt7Z4EVTC28os1mU5D0+19ctIKphVfkyEAQluFWVrXidDrljUuSiwtWMLXwiuPxOIfE7z/gD7MNaKAF8IqtVusWv0SWJQoEDrnxH9BACw+8PwYJRfW5RJWXVxasgicHj48odHrCsTlI3MQo67peNEyMMcJzVS3NM5kcX4hRMzFGuZhOp5fngUHBeJOklcO0YV4Fo42ja+04E30DoEc977NtoxoAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAB3RJTUUH5AMEBTI2rcIdsAAABQRJREFUWMO1V11oU2cYfs53TpPUo02zpm6wrKWdpgpTZ8OwXuynTJrtJsqgndALvdEtKQiCjFEGS2ctg+HVlhirF1JGwYatAcERJ1XZYBVx6SqoJ+1O/AmKq/mp+enx5Jzz7WbRnCar1sbn8vm+7/35zvt+530YLIGxsTH09PQAAMLhcIvVanXwPO/ieX4bx3F2k8kEAJAkCYqizORyuclsNnsmkUhcdTqdIgCEQiHs2rULy0YgEAAAeL3ezaIoRmRZzquqSp8FVVWpLMt5URQjXq93CwAcO3bs+R0PDQ0BAA4fPtwoCMJxWZbpi0KWZSoIwvEjR440ltp+Jnw+ny2ZTKZolZBMJlM+n89WyRdTmnl/fz8mJia62tvbfzGbzaTSgT/+FBCJPsTtB1lk8wUAwJraGjS9thpb7VZsb2+rmNT8/LwWiUQ+7uzsPFf0pQugmHlvb+/txc4ppfjtynX0+3/HAjWDJQwAWpaLqlHUMmkMed7Du+9sBMMwZUGMjo42ezyeuO4GAoEA5ubmGvv6+qIWi6W+9FAqlcKB787h2m0ZBoOhguPyS5VlGW81G/D9F05Y6nXmkE6n0z6fz97Q0DDndrvBFFtNEITjdrt9f+nmew+S6P4yhAKzGqDa8tqIITDQHE5/uxOvv/qKbikajZ5oa2vbHwwGwQaDQXi93s0ul+sky7JPNmWzGew89DNkugrMM7OuBAqF1mB84hp6PlwHg8H4ZKWurs7Bcdy4x+N5wACAKIqRlpaWt0u/+f6Bn/DXHW35mVe4iS1NLIa//kRXE7FYbKq1tXUrCYfDLTabTVe60dg9XJnJrdw5AFANV6JZRGP3dLTNZmsLh8MtxGq1OliWrS1dPHT0LGoMJlQLNUYTDh09q+NYlq21Wq0OwvO8i5CnXTcbu4v4I/4Fv/v/9QVFPMNjNnb3CUcIAc/zLsLz/LbSzdOzD8GyBNUGSwimZxM6juf5DsJxnL2UvHU/A7LoAakGCMPg1v1HOo7juPWk+EstIicpeFlYbNtkMoGUXxXz0gKoZJtIkqQj6tcYXloAi21LkgSiKMpMKbnOZoZGadWda5Rinc2s4xRFmSH5fH6ylOzY9AakfKbqATxeyKJjU5O+JnK5SZLJZM5omlbyTpvxkaMeqlY956oGdLWbUVdX9/RGNA3ZbPYMSSQSV1VVXSg9MHDABQ5S1QLgIOGbAy59UKq6kEgkrhKn0ynG4/Go7oGoNWJ3pw0FdeXOCyqwu9MGvtao4+PxeNTpdIoEAEZGRvYUCgXdhoN7d8DRrK2oIDVK4WjWcHDvDn1QhQJGRkb2AABTnNsFQRi22+379FWqom9wDJN/A0Zuee/DY4Vi+5vAD1/1gONY3ZogCCc3bNiwLxQKPR3JEolEo9vtnrFYLObFxoZPX8KP5+/gkcTCwLFLjGUMZEVFnVFF744mfLb7/bIdqVRq3u/32xsaGv5xu90Vh9I7ZrO5LN3HsoKTwUsIjF9HzSorCGFQ/GVQCmgahZx/iM93bsS+Tz+A0cBVmozp6OhoU+lQWiZILl682JVOp7Wl5vzpGyIdPz9FT4Uu01Ohy3T81yk6fSO2pDZIp9PahQsXup5LoPj9flsymUxXUZik/X6/bbnSbK0gCMMrlWY3b948MTg4uHZZ0qxUUA4MDGwWRXHqBcTp1POI0yV7KxgMoru7uyjPW61Wa/t/8ryD47j11ZDn/wJiWtpgN/kHzAAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAB3RJTUUH5AMEBTAJKZJSDwAABJ1JREFUWMO1V01MG0cYfTu7gGFVHMKaA7JamSiGQ5qkBUHUHipVCr5ZuYCQOOTSEBlOVMqlJ0ckXHuy+QnKgYMPWKJIHCr3AFRKI9QGgVIqsZBslMap1Dpr1sV27PXOTg8Otdc2/+YdP++8ed8383m+x+EQzM3Nob+/HwAQiURckiR1iqLoFUWxRxAEt81mAwBkMhkYhrGTSqVWk8nkoqqqax6PRwGAhYUF3Lp1CyfG5OQkAMDv919VFGVd1/U0pZQdBUop03U9rSjKut/vvwYAExMTx994fHwcADA2NuaQZXlK13V2Wui6zmRZnnr48KGjmPtIBAIBZzwe32VVQjwe3w0EAs5jZb60tNSraVrFWpuMMePtE5Z9PsGMp/dYeukuSy/dZcbTe/nY2yfMPECEpml0eXm5t7QSXGnmg4ODr+12O7HKY8hEfwH323fgjT2A4ytnwSgo/xFY9zhszi9L6ZFIJMxQKPTJ8PBw1CJgcnISsVjMMTIyst3U1HSheBFNx0CffgsSfw4QoYy0ggrANMAufgryxffgGxyWXzVN0wKBgLu5uTnm8/nA7beaLMtTbrd7qPhjM/UXzJ/6AJrFqcDXgfSGQcRWS3h7e/tRe3v7UDgcBh8Oh+H3+696vd4Zni+Ulmb/BfvRC5jZY2R9UDEMMGUerK0fRKj7P9zY2NgpCMIPw8PDf3MAoCjKusvlul5cxuzSEPj4OqoB8+I11H49Y0nk1atXG21tbZ+RSCTicjqd7cULsuoL8O9+RbVA3j1DVn1hiTmdzvZIJOIikiR18jxfb1mwOvrhwlVLgQBuddR6PXi+XpKkTiKKopeQQtdR7QW41JvTn3tFcCCpN6BaoQqEEIii6CWiKPZY2u7d7wf3+Zk08HnuIoiieIMIguC2lCb1GuDIOQggee4iCIJwmew/qfswMnGcF0q5bTYbylKlpP7cBFTiJplMxhKoqWs8NwGl3JlMBsQwjB2LogtugNHq785onrv4SAxjh6TT6VXLv1ZLz7kJMFssDYdUKrVK9vb2Fk3TLJTJ1gjaerO6IhgFbb2JGlvhCEzTRDKZXCSqqq5RSt9bWrF7DIzUVm9/Ugu+e8x6ISl9r6rqGvF4PEo0Gt229GdtA9ilAcDMVeElyoFdGoBQ22AJR6PRbY/HoxAAmJ2dvZ3LWTervT4KSF0AY2dInQFSV56rCLlcDrOzs7cBgNuf22VZnna73Xcs600D9OchIPYMOOmRmDrg6AL/1TS4kodNluWZjo6OOwsLC4WRTFVVh8/n22lqarKXDFjIbU4BOyGQnAaQmiNLbtZcAHd5AMIVX9mTtru7mwgGg+7m5uZ/fD5fxaH0T7vdXv4U0iwymzMQtiYATsi/FxxXKDUzAWYg1+FD/ZVvAL6ujCKRSLBQKPRx8VBaNpavrKz0appmHuh8GGN67A9GX86z9OZjlt58zOjL+XzsEG+gaZpZaSyviGAw6IzH41oVjYkWDAadJ7VmLbIsT5/Vmm1tbT168OBBy4msWbGhvH///lVFUTZOYU43jmNOD527wuEw+vr69u15myRJn3+w5zcEQbhcDXv+H1Kc+KaA2vifAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAB3RJTUUH5AMEBS0dzCTqbgAABLpJREFUWMO1V01MFGcYfubbAQam2B13sG26LbWty8VgUhP1QGIvdQ9t8K+amqjcTDYe7K2JbcISRI02vdhdVC7CrXIxNZosB+FIqwbrbiKzqxst0LTF2R3C7jLM39sDXZyBBRTXJ5nL837f977P+81knpfDKrh+/ToOHz4MAEgkEptlWd4uimK7KIo7eZ4PCYIAANB1HZZlZYrF4mihULipqur9cDicBYAbN25g3759eGVcvnwZABCNRluz2eyYYRgl27ZpLdi2TYZhlLLZ7Fg0Gt0GAL29vS+f+OzZswCA7u7uJkVRrhiGQeuFYRikKMqVnp6eJvfZayIWiwVzuVyeqoRcLpePxWLBl1J+586dPZqmVe61Q3R7Zog6p87T1087KJw+SOH0Qfr6aQd1Tp2n2zNDRE7lIjRNs4eHh/es2olYLBaslNwhh27lhsj/sJmQ3EAsJZEvtdHzsJRESG4g/8NmupUbIqdCJZqm2fF43NMJrvzCTU9PN508eTItSZLfveAf/Tn2TnyD3/TfwRgPbmHLiiAQHDKxo24Hfv3gF7wjyJ64pmlaLBYLBQKB6UgkAq78qSmKciUUCp1wL35q/Imtj3dBp3msBwJXh9Sno/io9kMPn06n+1paWk4MDg4uyIlGo62nT5/+o6amZnHRrFHEu4+3QCd9TdWrdUPgBPz9SQaNdeIib5omzp07t62zs/MhA4Djx4/3u5MTCHufHcE8za87+cL9cpinebRPHAGBFvmamhocO3asHwBYIpHYHAwGW9wbU7OPMDw/jGphRB9GavaRhwsGgy2JRGIzk2V5u8/nq3cH908cBcfxVSuA43jsnzjq4Xw+X70sy9uZKIrtjLHFQLL0CE+cDBhY1QpgYHjiZJAsvegCYwyiKLYzURR3uhePFu5VVb27C6OFex5OFMVdjOf5kJvMmNVV7+5Cxsx4OJ7nt7DyL7UM1crjTWHp2YIgLJcqkvjGCqh0NtN13UNsqHvrjRWw9Gxd18Esy/JcTKuwFTbsqie3YaNV2OrhLMvKsFKpNOomvxA/B2yr+vIdc+FsF4rF4iibnZ296TjOIinV+nFAPAAbVhXVWzjQcBBS7YsfreM4KBQKN5mqqvdt255zb7jW3ItaEqpWQC3V4Vqz1xfatj2nqup9Fg6Hs5OTk2l3sJEXccofgU3G66snA6ekCBp57xcwOTmZDofDWQYAAwMDHaZpehZcCEbR1tAGB876rx0O2hracOH9Lg9vmiYGBgY6UPbtAKAoytVlrtYxaXfmK0KyYZkFW+tBUqTdj78kwzGXWbPx8fG+cu5FS6aqalMkEslIkvT2UiXdf/2In/I/QyMVPq52zZb7uQC+3RhB53vfLYvn8/mZeDweCgQC/0YikYqmtKKvnbPn6IdnPYRkPSHZSFzKTywlEUtJxKX8hGQjIVlP3z/roTl7biVn7Cw1pcts+cjIyJ6Viihb87szY9T3vJ8uTl2ii1OXqO95P92dGVvRkpeTr2nLy4jH48FcLqdVcTDRVlS+ymi2SVGUq687mo2Pj/edOXNm0yuNZu6BsqurqzWbzT5Yx3D64GWG01Ut7+DgIA4dOlQezz+WZfmz/8fzXTzPb6nGeP4fNK2j/eABaRYAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsIAAA7CARUoSoAAAAQnSURBVFhHtZddTxtHFIYPu8YmNYi4xnwFx0BkqJI0wEVLKVKRFWrftspN1SpSpUr8AH4B/6IS4qpF6VWVCwqoLrSGqCDKBViitHwIWOwmARxC7DWJHbA77/Tg+gNSqJdHWjFzxvOeZebMmbMldA4GBgaooaHhekdHx6dVVVUei8XSZjKZrpvNZgXjyWQydXR0tJ1IJIJ7e3uBxcXFh+FwWMO8ohkbG/twc3PzB13XX6fPCX6LOaOjo93/+yWGhoaqVldXvxH/1THrXhjMFRrfQotlz8f4+Pj7u7u7GusUDbSgyfI5FMTA1NSUV+z19xUVFeVsyiC06OnTXfHs0PODA9L1Q2kvt75FNttVqq2tEU81lZQUhlYsFtMXFhbu9fT0+Nkkyfkl3rK7u3sy33kqlaK1tQ1aWloWTnW2nk55uZVu375FbnczKYqM0Qxirj4zM3PX5/P9xiZS+a/cc4/HM2Gz2RxskogXp4nJAK2triPa2Xo2yeRrCof/osePn1BdXS1ZLGYeIRKnxlxZWelraWkZHhkZkcuXWQEEnNvtvs9dyfODF/STf5JevnzFlotx5UoZfey9S7arlWz5B+FruLW1VfqSa4Sj5nK5vkD7hHj8sCjnAHOhAa1sGhsbP4dPtFWc097e3q/tdnurHBUg2H7+5REdiBUoFpGg6Nn+Pt240ZQJTlVVS0pLS2vFdj9QkOEcDodPjjDadoh2RKQbxY44OdDMBj7hW0F6tVqtJrZLfl/6g1vGka8Jn/CtILezTRKNxigSecY944AmtLOBbwUXC/clSDSXRb42fCu41bgviUaj3DKefG34Vk6u1BPyj4yRxA9zteE7N1cKFDWTHA1HUQq1FRQT3JbgYrks8rXhW0Elw32J3f42t4wnXxu+FZRR3JdUVzuQqbhnHNCEdjbwraCG476krMxCTmcD94wDmtDOBr4VFJDxePyIbZI7d24V3OXFAC1oZgOfwWDwoYLqVbzJj2yXoLq5efMd7hUPtKCZDXyGQiFNDQQC5PV6NXEdf4lbiseppqZapk8UJMVQX19HXV2dYhX+Lb4Q/XNzc1/19fWF5DrPz8//qmnaAznKqKpCHs9HdO1aPVsuDuZCA1rZbG1tfQefaMtwxyq0tbU9cjqdn4lbKlO+YO+amlxoiNWIUDqV5pE3o5pUofcudX3wXoFzobPt9/vv9ff355ZkQBSlnaIonTitItb1OC0v/0kbm1uUeJVgay7icqHm5ka55yhO80FROjs72yu2fI5NhaAsFyV0TBb0p3B8fJyORPbT6+sb6cXgknzQhg1jZwHN6elpL7t5M2KJOkWUbvPcohFaGjRZ/nwMDg46VlZWhov9NIOGKPlzU+BFEHFxqR+nOUF4FhARJ8TV3t7+yRmf52lxsWjI7UivyHBIMv/9ZUz0NwKdjI1k5P8pAAAAAElFTkSuQmCC\"","import React from 'react';\n\nexport default React.createContext({\n  token: null,\n  tokenExpiration: null,\n  _id: null,\n  name: null,\n  role: null,\n  login: () => {},\n  logout: () => {},\n});\n","module.exports = __webpack_public_path__ + \"static/media/trolleybus.b1dd7a6e.svg\";","module.exports = __webpack_public_path__ + \"static/media/bus.a489e26c.svg\";","module.exports = __webpack_public_path__ + \"static/media/tram.23f970ee.svg\";","const trolley = require('../images/app/trolleybus.svg');\nconst bus = require('../images/app/bus.svg');\nconst tram = require('../images/app/tram.svg');\n\nconst types = {\n  1: { name: 'trolleybus', img: trolley },\n  2: { name: 'bus', img: bus },\n  3: { name: 'tram', img: tram },\n};\n\nfunction vehID(id) {\n  if (!id) return '';\n  return id.split('-').slice(-1)[0];\n}\nfunction vehType(id) {\n  if (!id) return '';\n  return parseInt(id.split('-').slice(-2)[0]);\n}\nfunction vehTypeStr(id, t) {\n  const type = vehType(id);\n  return Object.keys(types).includes(type.toString())\n    ? t('vehicle.type.' + types[type].name)\n    : t('vehicle.type.unk');\n}\nfunction vehTypeObject(id) {\n  return types[vehType(id)];\n}\n\nfunction measure(lat1, lon1, lat2, lon2) {\n  // generally used geo measurement function\n  const R = 6378.137; // Radius of earth in KM\n  const dLat = (lat2 * Math.PI) / 180 - (lat1 * Math.PI) / 180;\n  const dLon = (lon2 * Math.PI) / 180 - (lon1 * Math.PI) / 180;\n  const a =\n    Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n    Math.cos((lat1 * Math.PI) / 180) *\n      Math.cos((lat2 * Math.PI) / 180) *\n      Math.sin(dLon / 2) *\n      Math.sin(dLon / 2);\n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n  const d = R * c;\n  return d * 1000; // meters\n}\n\nexports.vehID = vehID;\nexports.vehType = vehType;\nexports.vehTypeStr = vehTypeStr;\nexports.vehTypeObject = vehTypeObject;\nexports.measure = measure;\n","import styled from 'styled-components';\n\nexport const ErrorImageOverlay = styled.div`\n  height: 60vh;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n`;\n\nexport const ErrorImageContainer = styled.div`\n  display: inline-block;\n  background-image: ${({ imageUrl }) => `url(${imageUrl})`};\n  background-size: cover;\n  background-position: center;\n  width: 40vh;\n  height: 40vh;\n`;\n\nexport const ErrorImageText = styled.h2`\n  font-size: 28px;\n  color: #2f8e89;\n`;\n","import React, { Component } from 'react';\n\nimport {\n  ErrorImageOverlay,\n  ErrorImageContainer,\n  ErrorImageText,\n} from './ErrorBoundaryStyles';\n\nclass ErrorBoundary extends Component {\n  constructor() {\n    super();\n\n    this.state = {\n      hasErrored: false,\n    };\n  }\n\n  static getDerivedStateFromError(error) {\n    return { hasErrored: true };\n  }\n\n  componentDidCatch(error, info) {\n    console.log(error);\n  }\n\n  render() {\n    if (this.state.hasErrored) {\n      return (\n        <ErrorImageOverlay>\n          <ErrorImageContainer imageUrl=\"https://i.imgur.com/lKJiT77.png\" />\n          <ErrorImageText>Sorry a dog ate this page</ErrorImageText>\n        </ErrorImageOverlay>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n\nexport default ErrorBoundary;\n","import styled from 'styled-components';\n\nexport const SpinnerOverlay = styled.div`\n  height: 60vh;\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`;\n\nexport const SpinnerContainer = styled.div`\n  display: inline-block;\n  width: 50px;\n  height: 50px;\n  border: 3px solid rgba(195, 195, 195, 0.6);\n  border-radius: 50%;\n  border-top-color: #636767;\n  animation: spin 1s ease-in-out infinite;\n  -webkit-animation: spin 1s ease-in-out infinite;\n  @keyframes spin {\n    to {\n      -webkit-transform: rotate(360deg);\n    }\n  }\n  @-webkit-keyframes spin {\n    to {\n      -webkit-transform: rotate(360deg);\n    }\n  }\n`;\n","import React from 'react';\n\nimport { SpinnerContainer, SpinnerOverlay } from './SpinnerStyles';\n\nconst Spinner = () => {\n  return (\n    <SpinnerOverlay>\n      <SpinnerContainer />\n    </SpinnerOverlay>\n  );\n};\n\nexport default Spinner;\n","import i18n from 'i18next';\nimport Backend from 'i18next-xhr-backend';\nimport { reactI18nextModule } from 'react-i18next';\nimport detector from 'i18next-browser-languagedetector';\n\nconst supportedLangs = [\n  { short: 'en', name: 'English' },\n  // {short:'et', name:\"Eesti\"},\n  { short: 'fi', name: 'Suomi' },\n];\n\ni18n\n  .use(detector)\n  .use(Backend)\n  .use(reactI18nextModule)\n  .init({\n    whitelist: supportedLangs.map((lng) => lng.short),\n    fallbackLng: 'en',\n    backend: {\n      loadPath: '/assets/i18n/{{ns}}/{{lng}}.json',\n    },\n    ns: ['translations'],\n    defaultNS: 'translations',\n    keySeparator: false,\n    interpolation: {\n      escapeValue: false,\n      formatSeparator: ',',\n    },\n    react: {\n      wait: true,\n    },\n    missingKeyHandler: (lng, ns, key, fallbackValue) => {\n      console.log('MISSING LANGUAGE KEY:', lng, ns, key, fallbackValue);\n    },\n  });\n\ni18n.validLangs = supportedLangs;\n\nexport default i18n;\n","import React, { useContext } from \"react\";\n\nimport { getNavs, RoleLink } from '../routes';\nimport AuthContext from \"../../../context/auth-context\";\n\nimport {translate} from 'react-i18next';\n\nimport logo from '../../../images/logo.svg'\n\nconst NavbarItem = (props) => {\n  return (\n      <li>\n        <RoleLink to={props.data.to} className='waves-effect'>\n          <i className={\"mdi \" + props.data.icon}/>\n          <span>{ props.data.name }</span>\n        </RoleLink>\n      </li>);\n};\n\nexport default translate()(({t}) => {\n  const context = useContext(AuthContext);\n  return (\n    <div className=\"left side-menu\" style={{zIndex:1005}}>\n    <div className=\"topbar-left\">\n      <a className=\"logo\" href=\"/dashboard\">\n        <img src={logo} height=\"50\" alt=\"logo\" />\n      </a>\n    </div>\n    <div className=\"sidebar-inner slimscrollleft\">\n      <div id=\"sidebar-menu\">\n        <ul>\n          <li className=\"menu-title\"/>\n          { getNavs(context.role).map(n =>\n              <NavbarItem key={n.path} data={{ name: t(n.translation), badge: \"\", icon: n.icon, to:n.name }}/>)}\n        </ul>\n      </div>\n    </div>\n  </div>);\n})\n","import React, {Component} from \"react\";\n\nimport AuthContext from \"../../../context/auth-context\";\nimport {roleTranslate} from '../../../utils/roles';\n\nimport {translate} from 'react-i18next';\n\n// function invertColor(hex) {\n//     if (hex.indexOf('#') === 0) hex = hex.slice(1);\n//     // convert 3-digit hex to 6-digits.\n//     if (hex.length === 3) hex = hex[0] + hex[0] + hex[1] + hex[1] + hex[2] + hex[2];\n//     if (hex.length !== 6) throw new Error('Invalid HEX color.');\n//     // invert color components\n//     let r = (255 - parseInt(hex.slice(0, 2), 16)).toString(16),\n//         g = (255 - parseInt(hex.slice(2, 4), 16)).toString(16),\n//         b = (255 - parseInt(hex.slice(4, 6), 16)).toString(16);\n//     // pad each with zeros and return\n//     return '#' + padZero(r) + padZero(g) + padZero(b);\n// }\n// function padZero(str, len) {\n//     len = len || 2;\n//     return (new Array(len).join('0') + str).slice(-len);\n// }\n\nconst initialColors = {\n    0: '#355fa7',\n    1: '#4ac18e',\n    3: '#ffbb44',\n    5: '#ea553d',\n    11: '#ea553d',\n}\n\nfunction getInitials(fullName, role) {\n    let f, l;\n    const nameTrim = fullName && fullName.trim();\n    if (!fullName || nameTrim.length === 0) f = '-';\n    else if (nameTrim.length === 1) f = nameTrim[0];\n    else if (nameTrim.split(' ').length > 1) {\n        const split = nameTrim.split(' ');\n        f = split[0][0]\n        l = split[split.length - 1][0]\n    } else {\n        f = nameTrim[0]\n        l = nameTrim[1]\n    }\n\n    let canvas = document.createElement('canvas');\n    canvas.style.display = 'none';\n    canvas.width = 32;\n    canvas.height = 32;\n    document.body.appendChild(canvas);\n    let context = canvas.getContext('2d');\n    context.fillStyle = initialColors[role];\n    context.fillRect(0, 0, canvas.width, canvas.height);\n    context.font = \"18px Cousine, monospace\";\n    context.fillStyle = '#fff';\n\n    let initials = l ? f + l : f;\n    context.fillText(initials.toUpperCase(), l ? 5: 10, 22);\n\n    let data = canvas.toDataURL();\n    document.body.removeChild(canvas);\n    return data;\n}\n\nclass Toolbar extends Component {\n\n  static contextType = AuthContext;\n  static imgUrl = \"https://picsum.photos/100\";\n\n  state = {\n      title: this.props.t('dashboard'),\n      lang_toggle: false,\n      user_toggle: false\n  };\n\n  togglescreen = (e) => {\n      if (!document.fullscreenElement && !document.mozFullScreenElement && !document.webkitFullscreenElement) {  // current working methods\n          if (document.documentElement.requestFullscreen) {\n              document.documentElement.requestFullscreen();\n          } else if (document.documentElement.mozRequestFullScreen) {\n              document.documentElement.mozRequestFullScreen();\n          } else if (document.documentElement.webkitRequestFullscreen) {\n              document.documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);\n          }\n      } else {\n          if (document.cancelFullScreen) {\n              document.cancelFullScreen();\n          } else if (document.mozCancelFullScreen) {\n              document.mozCancelFullScreen();\n          } else if (document.webkitCancelFullScreen) {\n              document.webkitCancelFullScreen();\n          }\n      }\n  };\n\n  componentDidMount() {\n    if (this.context.role) this.setState({title:`${roleTranslate(this.context.role, this.props.t)} ${this.props.t('dashboard').toLowerCase()}`});\n  }\n\n  handleLogout(evt) {\n    evt.preventDefault();\n    this.context.logout();\n  }\n\n  render() {\n      const { t, i18n } = this.props;\n    return (\n      <div className=\"topbar\" style={{zIndex:1010}}>\n        <nav className=\"navbar-custom\">\n          {/*<div className=\"search-wrap\" id=\"search-wrap\">*/}\n          {/*  <div className=\"search-bar\">*/}\n          {/*    <input className=\"search-input\" type=\"search\" placeholder=\"Search\" />*/}\n          {/*    <span className=\"close-search toggle-search\" data-target=\"#search-wrap\">*/}\n          {/*      <i className=\"mdi mdi-close-circle\"/>*/}\n          {/*    </span>*/}\n          {/*  </div>*/}\n          {/*</div>*/}\n\n          <ul className=\"list-inline float-right mb-0\">\n            {/* <li className=\"list-inline-item dropdown notification-list\">*/}\n            {/*  <span className=\"nav-link waves-effect toggle-search\" data-target=\"#search-wrap\">*/}\n            {/*    <i className=\"mdi mdi-magnify noti-icon\"/>*/}\n            {/*  </span>*/}\n            {/*</li>*/}\n            <li className=\"list-inline-item dropdown notification-list hidden-xs-down\">\n              <span className=\"nav-link waves-effect\" onClick={this.togglescreen}>\n                <i className=\"mdi mdi-fullscreen noti-icon\"/>\n              </span>\n            </li>\n            <li onClick={() =>this.setState({lang_toggle: !this.state.lang_toggle})}\n                className={\"list-inline-item dropdown notification-list hidden-xs-down\" + (this.state.lang_toggle ? ' show': '')}>\n              <span className=\"nav-link dropdown-toggle arrow-none waves-effect text-muted\" data-toggle=\"dropdown\">\n                {i18n.language.toUpperCase()}\n              </span>\n              <div className=\"dropdown-menu dropdown-menu-right language-switch\" style={{minWidth:'5rem'}}>\n                  { i18n.validLangs.map(({short, name}) =>\n                      <span className=\"dropdown-item\" key={short} style={{cursor:\"pointer\"}}>\n                        {/*<img src=\"/assets/images/flags/germany_flag.jpg\" height=\"16\"/>*/}\n                        <span onClick={() => i18n.changeLanguage(short)}>{name}</span>\n                      </span>)}\n              </div>\n            </li>\n            <li onClick={() => this.setState({user_toggle: !this.state.user_toggle})}\n                className={\"list-inline-item dropdown notification-list\" + (this.state.user_toggle ? ' show': '')}>\n              <span className=\"nav-link dropdown-toggle arrow-none waves-effect nav-user\" data-toggle=\"dropdown\">\n                <img src={ getInitials(this.context.name, this.context.role) } alt=\"usr\" className=\"init-logo\"/>\n              </span>\n              <div className=\"dropdown-menu dropdown-menu-right profile-dropdown\">\n                <span className=\"dropdown-item\">\n                  <i className=\"dripicons-user text-muted\"/>{t('toolbar.profile')}\n                </span>\n                <div className=\"dropdown-divider\"/>\n                <span className=\"dropdown-item\" onClick={ (evt) => this.handleLogout(evt) }>\n                  <i className=\"dripicons-exit text-muted\"/>{t('toolbar.logout')}\n                </span>\n              </div>\n            </li>\n          </ul>\n          <ul className=\"list-inline menu-left mb-0\">\n            <li className=\"list-inline-item\">\n              <button type=\"button\" className=\"button-menu-mobile open-left waves-effect\" onClick={this.props.doNavbarDisplay}>\n                <i className=\"ion-navicon\"/>\n              </button>\n            </li>\n            <li className=\"hide-phone list-inline-item app-search\">\n              <h3 className=\"page-title text-capitalize\">{this.state.title}</h3>\n            </li>\n          </ul>\n        </nav>\n      </div>\n    );\n  }\n}\n\nexport default translate()(Toolbar);\n","import React, { Component } from 'react';\nimport Helmet from 'react-helmet';\n\nconst TitleFunction = ({ title }) => {\n    let defaultTitle = 'App';\n    return (\n        <Helmet>\n            <title>{ title || defaultTitle}</title>\n        </Helmet>\n    );\n};\n\n// withTitle function\nexport default ({ component: Inner, title }) => {\n    return class Title extends Component {\n        render() {\n            return (\n                <React.Fragment>\n                    <TitleFunction title={title} />\n                    <Inner {...this.props} />\n                </React.Fragment>\n            );\n        }\n    };\n  };\n\n","import React, { useContext } from 'react';\nimport { Switch, Route, Redirect } from 'react-router-dom';\nimport AuthContext from '../context/auth-context';\n\nimport Navbar from '../components/dashboard/all/navbar';\nimport Toolbar from '../components/dashboard/all/toolbar';\nimport { getRoutes } from '../components/dashboard/routes';\nimport Title from '../components/dashboard/all/title';\nimport { translate } from 'react-i18next';\n\nconst handleNavBar = () =>\n  document.getElementById('wrapper').classList.toggle('enlarged');\n\nexport default translate()(({ t }) => {\n  const context = useContext(AuthContext);\n  return (\n    <div id=\"wrapper\">\n      <Navbar />\n      <div className=\"content-page\">\n        <div className=\"content\">\n          <Toolbar doNavbarDisplay={handleNavBar} />\n          <div className=\"page-content-wrapper\">\n            <Switch>\n              {getRoutes(context.role).map((r) => (\n                <Route\n                  key={r.path}\n                  path={r.path}\n                  component={Title({\n                    component: r.component,\n                    title: t(r.translation),\n                  })}\n                />\n              ))}\n              <Route\n                path={'/dashboard/:sth'}\n                render={() => <Redirect to=\"/dashboard/general\" />}\n              />\n              <Route\n                path={'/dashboard/'}\n                render={() => <Redirect to=\"/dashboard/general\" />}\n              />\n            </Switch>\n          </div>\n        </div>\n        <footer className=\"footer\"> {t('company.name')}</footer>\n      </div>\n    </div>\n  );\n});\n","import React, {Component}  from 'react';\nimport queryRequest from \"../../../utils/queryRequest\";\n\nimport AuthContext from \"../../../context/auth-context\";\n\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport Modal from 'react-bootstrap/Modal';\nimport Button from \"react-bootstrap/Button\";\n\nimport Lightbox from 'react-image-lightbox';\nimport 'react-image-lightbox/style.css';\n\nimport Swal from 'sweetalert2';\n\nimport { translate } from 'react-i18next';\n\nconst removeImg = async (id, reload, t) => {\n    const query = `mutation{ pictureDelete(id:\"${id}\")}`;\n    try {\n        const { pictureDelete } = await queryRequest(query);\n        if (pictureDelete) {\n            Swal.fire({\n                icon: 'success',\n                title: t('i.image.remove.form.success.title'),\n                showConfirmButton: false,\n                timer: 1500\n            });\n            reload();\n        }\n        else\n            Swal.fire({\n                icon: 'error',\n                title: t('i.image.remove.form.failed.title'),\n                text: t('i.image.remove.form.failed.text'),\n                showConfirmButton: false,\n                timer: 1500\n            });\n    } catch (err) {\n        console.log(err)\n    }\n}\n\nconst Img = translate()(({t, data, me, reload, openLB}) => {\n    const splited = data.path.split('/');\n    return (\n        <Row className='pt-2 pb-2 border-bottom border-top font-xs'>\n            <Col onClick={openLB} >\n                <img src={data.thumbnail || data.path} alt='i' style={{maxHeight:60, maxWidth:73}}/>\n            </Col>\n            <Col className='align-self-center'>\n                {splited[splited.length-1]}\n            </Col>\n            {data.user_id === me && <Col className='align-self-center'>\n                <Button className='images' variant='danger' onClick={() => removeImg(data.id, reload, t)}>\n                    {t('i.image.list.remove')}\n                </Button>\n            </Col>}\n        </Row>\n    )\n});\n\nclass Images extends Component {\n    state = {\n        images: [],\n        index: 0,\n        lightbox: false\n    };\n\n    static contextType = AuthContext;\n    controller = new AbortController();\n\n    componentWillUnmount() {\n        this.controller.abort();\n    }\n\n    componentDidMount() {\n        this.loadImages()\n    }\n\n    loadImages = async () => {\n        const query = `query{campaignPictures(_id:\"${this.props.id}\"){ id path thumbnail user_id }}`;\n        try {\n            const { campaignPictures } = await queryRequest(query, this.controller.signal);\n            this.setState({ images: campaignPictures})\n        } catch (err) {\n        }\n    };\n\n    openLightbox = (index) => {\n        this.setState({lightbox: true, index})\n    }\n\n    render() {\n        const { t } = this.props;\n        const { images, index } = this.state;\n        return (<Modal centered scrollable onHide={this.props.handleClose} keyboard={false} animation={true} show={true} className='text-center'>\n            <Modal.Header style={{display:'unset', borderBottom: 'unset'}}>\n                <Modal.Title>{t('i.image.campaign.title')}</Modal.Title>\n            </Modal.Header>\n\n            <Modal.Body>\n                {images.length > 0 &&\n                    <React.Fragment>\n                        {images.map((i, index) => <Img key={i.path} openLB={() => this.openLightbox(index)} data={i} me={this.context._id} reload={this.loadImages}/>)}\n                    </React.Fragment>\n                }\n                {images.length === 0 && <h5>{t('i.image.list.empty')}</h5>}\n                {images.length > 0 && this.state.lightbox && <Lightbox\n                    mainSrc={images[index].path}\n                    nextSrc={images[(index + 1) % images.length].path}\n                    prevSrc={images[(index + images.length - 1) % images.length].path}\n                    onCloseRequest={() => this.setState({ lightbox: false })}\n                    onMovePrevRequest={() => this.setState({index: (index + images.length - 1) % images.length,})}\n                    onMoveNextRequest={() => this.setState({index: (index + 1) % images.length,})}\n                />}\n            </Modal.Body>\n            <Modal.Footer style={{display:'unset', borderTop:'unset'}}>\n                <Button className='w-sm' variant=\"success\" onClick={this.props.handleClose}>{t('i.image.list.close')}</Button>\n            </Modal.Footer>\n        </Modal>)\n    }\n}\nexport default translate()(Images);\n","import React, {useContext, useState} from 'react';\n\nimport Container from 'react-bootstrap/Container';\nimport Row from 'react-bootstrap/Row';\nimport Button from 'react-bootstrap/Button';\nimport Col from 'react-bootstrap/Col';\nimport InputGroup from 'react-bootstrap/InputGroup';\nimport FormControl from 'react-bootstrap/FormControl';\nimport NavDropdown from 'react-bootstrap/NavDropdown';\nimport Navbar from 'react-bootstrap/Navbar';\n\nimport { translate } from 'react-i18next';\nimport ProgressBar from \"react-bootstrap/ProgressBar\";\nimport ImagesView from \"./uploadImage\";\nimport AuthContext from \"../../../context/auth-context\";\n\nimport Swal from 'sweetalert2';\n\nconst uploadImage = async (t, campaign_id, file) => {\n    let token;\n\n    if (sessionStorage.getItem(\"_t\")) {\n        token = sessionStorage.getItem(\"_t\")\n    } else if (localStorage.getItem(\"_t\")) {\n        token = localStorage.getItem(\"_t\")\n    }\n    const fd = new FormData();\n    fd.append('campaign_id', campaign_id);\n    fd.append('img', file);\n\n    Swal.fire({\n        title: 'Uploading image...',\n        text: 'Please wait',\n        timerProgressBar: true,\n        onBeforeOpen: async () => {\n            Swal.showLoading();\n            Swal.close(await fetch(\"/api/upload/picture\", {\n                method: \"POST\",\n                body: fd,\n                headers: {\n                    \"Authorization\": token ? `Bearer ${token}`:\"\",\n                }\n            }));\n        }\n    }).then((result) => {\n        if (result.status === 200)\n            Swal.fire({ icon: 'success',\n                title: t('i.image.uploading.success.title'),\n                text: t('i.image.uploading.success.text'),\n                showConfirmButton: false, timer: 1500\n            })\n\n        else\n            Swal.fire({icon: 'error',\n                title: t('i.image.uploading.failed.title'),\n                text: t('i.image.uploading.failed.text'),\n                showConfirmButton: false, timer: 1500\n            });\n    })\n\n};\n\nconst SearchAndTriggerNav = translate()(({t, mt, onSubmit, value, onChange,placeholder, trigger}) => {\n    return (\n        <Navbar fixed='top' className='pl-1 pr-1 pb-0 navbar-container'>\n            <Container>\n                <Row className='pl-1 pr-2'>\n                    <Col>\n                        <form onSubmit={onSubmit}>\n                            <InputGroup>\n                                <FormControl placeholder={t(placeholder)} value={value} onChange={onChange}/>\n                                <InputGroup.Append>\n                                    <Button variant=\"outline-secondary\" type=\"submit\">\n                                        <i className=\"fa fa-search\"/>\n                                    </Button>\n                                </InputGroup.Append>\n                            </InputGroup>\n                        </form>\n                    </Col>\n                    <Col xs={3}>\n                        {trigger && <React.Fragment>\n                            <input type=\"checkbox\" id='h' switch={trigger.type} checked={trigger.value}\n                                   onChange={trigger.click}/>\n                            <label htmlFor='h' data-on-label={t(trigger.on)} data-off-label={t(trigger.off)}\n                                   style={{marginTop: 7, marginBottom:0}}/>\n                        </React.Fragment>}\n                    </Col>\n                </Row>\n            </Container>\n        </Navbar>\n    )\n});\n\nconst CampaignNav = translate()(({t, onSubmit, mt, placeholder, value, onChange, campaign}) => {\n    const name = campaign.name;\n    const start = new Date(parseInt(campaign.startDate));\n    const end = new Date(parseInt(campaign.endDate));\n\n    const placements = campaign.placements.map(pl => pl.count).reduce((a,b) => a+b,0);\n    const installs = campaign.placements.map(pl => pl.installs.map(i => i.count).reduce((a,b) => a+b, 0) ).reduce((a,b) => a+b, 0);\n\n    const [show, setState] = useState(false);\n    let uploadBtn;\n    return (\n        <Navbar fixed='top' className='pl-1 pr-1 navbar-container'>\n            <Container className=\"text-center text-white\" style={{lineHeight:0.9}}>\n                {!!onSubmit && <Row className='pl-1 pr-2'>\n                    <Col>\n                        <form onSubmit={onSubmit}>\n                            <InputGroup>\n                                <FormControl placeholder={t(placeholder)} value={value} onChange={onChange}/>\n                                <InputGroup.Append>\n                                    <Button variant=\"outline-secondary\" type=\"submit\">\n                                        <i className=\"fa fa-search\"/>\n                                    </Button>\n                                </InputGroup.Append>\n                            </InputGroup>\n                        </form>\n                    </Col>\n                </Row>}\n                <h5 className=\"m-0 mb-1\">{name}</h5>\n                <Row>\n                    <Col>\n                        <Row>\n                            <Col>\n                                <strong>{start.getDate()} {t('month.'+start.getMonth())}</strong>\n                                <div className='description'>{t('i.campaign.startDate')}</div>\n                            </Col>\n\n                            <Col>\n                                <strong>{end.getDate()} {t('month.'+end.getMonth())}</strong>\n                                <div className='description'>{t('i.campaign.endDate')}</div>\n                            </Col>\n                        </Row>\n                    </Col>\n                    <Col>\n                        <strong>{installs}/{placements}</strong>\n                        <div className='description'>{t('i.campaign.placements')}</div>\n                    </Col>\n                </Row>\n                <ProgressBar className='campaign-progress' variant='warning' now={installs * 100 / placements}/>\n                <Row className='campaign-images mt-2'>\n                    <Col onClick={() => setState(true)}>\n                        <i className=\"fa fa-th-list\"/>\n                    </Col>\n                    <Col>\n                        <i className=\"ion ion-images\" onClick={() => uploadBtn.click()}/>\n                        <input hidden type=\"file\" name=\"file\" ref={input => uploadBtn = input} onChange={(e) => uploadImage(t, campaign._id,e.target.files[0])}/>\n                    </Col>\n                </Row>\n            </Container>\n            {show && <ImagesView id={campaign._id} handleClose={() => setState(false)}/>}\n        </Navbar>\n    )\n});\n\nconst HomeNav = translate()(({t, i18n, placeholder, onSubmit, onChange, value}) => {\n    const context = useContext(AuthContext);\n    return (\n        <Navbar fixed='top' style={{justifyContent:'space-between'}}>\n            <NavDropdown title={i18n.language.toUpperCase()} className='lang' id='install-navbar'>\n                { i18n.validLangs.map(({short, name}) =>\n                    <NavDropdown.Item key={short} onClick={() => i18n.changeLanguage(short)}>{name}</NavDropdown.Item>\n                    )}\n            </NavDropdown>\n\n            <form onSubmit={onSubmit} style={{maxWidth:'150px'}}>\n                <InputGroup className=\"p-1\">\n                    <FormControl placeholder={t(placeholder)} value={value} onChange={onChange}/>\n                    <InputGroup.Append>\n                        <Button variant=\"outline-secondary\" type=\"submit\">\n                            <i className=\"fa fa-search\"/>\n                        </Button>\n                    </InputGroup.Append>\n                </InputGroup>\n            </form>\n\n            <Button variant=\"primary\" onClick={context.logout}>\n                <i className=\"dripicons-exit\"/> Logout\n            </Button>\n        </Navbar>)\n});\n\nexport {\n    CampaignNav,\n    SearchAndTriggerNav,\n    HomeNav\n};\n","import React, { Component } from 'react';\nimport { Link } from \"react-router-dom\";\nimport queryRequest from '../../../utils/queryRequest';\n\nimport Container from 'react-bootstrap/Container';\nimport Card from 'react-bootstrap/Card';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport ProgressBar from 'react-bootstrap/ProgressBar';\n\nimport { HomeNav } from '../components/navs';\n\nimport { translate } from 'react-i18next';\n\nfunction placesLeftPercent(placements, installs) {\n    return installs * 100 / placements;\n}\n\nconst CampaignItem = translate() (({campaign, t}) => {\n    const name = campaign.name;\n    const company = campaign.client.company;\n    const start = new Date(parseInt(campaign.startDate));\n    const end = new Date(parseInt(campaign.endDate));\n\n    const placements = campaign.placements.map(pl => pl.count).reduce((a,b) => a+b,0);\n    const installs = campaign.placements.map(pl => pl.installs.map(i => i.count).reduce((a,b) => a+b, 0) ).reduce((a,b) => a+b, 0);\n\n    const statusSize = placesLeftPercent(placements, installs);\n\n    return (\n      <Link to={'/install/c/'+ campaign._id} style={{color: 'black'}}>\n        <Card className=\"mb-3 mt-2 shadow\" style={{border: 'none'}}>\n          <Card.Body className=\"waves-effect p-3\">\n            <Card.Title className={`text-center text-vehicle-info ${campaign.priority && 'text-danger'}`}>\n                {name}\n            </Card.Title>\n              <div className='text-center font-sm'>{company}</div>\n            <Row className='text-center font-sm'>\n              <Col>\n                <Row>\n                  <Col className='install-col-val'>\n                    <strong>{start.getDate()} {t('month.'+ start.getMonth())}</strong>\n                    <div className='description'>{t('i.campaign.startDate')}</div>\n                  </Col>\n\n                  <Col className='install-col-val'>\n                    <strong>{end.getDate()} {t('month.'+ end.getMonth())}</strong>\n                    <div className='description'>{t('i.campaign.endDate')}</div>\n                  </Col>\n                </Row>\n              </Col>\n\n              <Col className='install-col-val'>\n                <strong>{installs}/{placements}</strong>\n                <div className='description'>{t('i.campaign.placements')}</div>\n              </Col>\n            </Row>\n          </Card.Body>\n\n          <ProgressBar className=\"card-bottom-progress\" striped variant={statusSize >= 100 ? 'success': 'warning'} now={statusSize} label/>\n        </Card>\n      </Link>\n    );\n});\n\n\nclass CampaignList extends Component {\n    state = {\n        search: '',\n        campaigns: [],\n    };\n\n    controller = new AbortController();\n    searchTimeout = 0;\n    componentDidMount() {\n      this.loadInCampaigns();\n    }\n    componentWillUnmount() {\n        this.controller.abort();\n    }\n\n    loadInCampaigns = async () => {\n      const query = `query{ campaignsForInstallers(search:\"${this.state.search}\"){ _id name client{company} priority startDate endDate placements { count installs { count }} }}`;\n      try {\n        const { campaignsForInstallers } = await queryRequest(query, this.controller.signal);\n        if (campaignsForInstallers) this.setState({campaigns: campaignsForInstallers});\n      } catch (err) {\n        console.log(\"error\", err);\n      }\n    };\n\n    handleSearchChange = (e) => {\n        this.setState({search: e.target.value});\n        clearTimeout(this.searchTimeout);\n        this.searchTimeout = setTimeout(this.loadInCampaigns, 600);\n    };\n\n    handleSearchSubmit = (e) => {\n        e.preventDefault();\n        this.loadInCampaigns();\n    };\n\n    render() {\n        return (\n          <React.Fragment>\n            <HomeNav onSubmit={this.handleSearchSubmit} placeholder=\"i.search.campaign\"\n                    onChange={this.handleSearchChange} value={this.state.search}/>\n            <Container style={{marginTop:65}}>\n              <Row className='border-bottom' style={{display:'block'}}>\n                <h4 className=\"text-center text-white\">{this.props.t('i.campaigns.title')}</h4>\n              </Row>\n                {this.state.campaigns.length > 0 && this.state.campaigns.map(camp => {\n                    return <CampaignItem key={camp._id} campaign={camp} />\n                })}\n            </Container>\n          </React.Fragment>\n        );\n    }\n}\n\nexport default translate()(CampaignList);\n","import React from 'react';\n\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport {Link} from \"react-router-dom\";\nimport Card from \"react-bootstrap/Card\";\nimport {vehID, vehTypeObject} from \"../../../utils/vehicleProps\";\nimport ProgressBar from \"react-bootstrap/ProgressBar\";\nimport ActivityTypes from \"../../../utils/activityTypes\";\nimport Badge from \"react-bootstrap/Badge\";\n\nimport { translate } from 'react-i18next';\n\nconst VehicleByPlacement = translate()(({t,data}) => {\n    return (\n        <Link to={`/install/f/${data._id}`} style={{color: 'black'}}>\n            <Card className=\"mb-3 mt-2 shadow\" style={{border: 'none'} }>\n                <Card.Body className=\"waves-effect pb-2\">\n                    <Row className='text-center'>\n                        <Col xs={3} className='m-auto'>\n                            <img src={vehTypeObject(data._id).img} alt={vehTypeObject(data._id).name} height='60'/>\n                        </Col>\n\n                        <Col xs={9} className='m-auto install-col-val' style={{lineHeight:'1.1rem'}}>\n                            <strong>{vehID(data._id)}{!data.listed && <Badge variant=\"warning\">{t('i.vehicle.unlisted')}</Badge>}</strong>\n                            <div className='description'>{data.operator.company}</div>\n                            <h4>{data.installs.map(i=> i.count).reduce((a,b) => a+b, 0)}x {t('i.vehicle.placements')}</h4>\n                        </Col>\n                    </Row>\n                </Card.Body>\n                <ProgressBar className=\"card-bottom-progress\" variant='success' now={100} style={{borderRadius:0}}/>\n            </Card>\n        </Link>\n    );\n});\n\nconst VehicleByHistory = translate()(({t, data}) => {\n    const install = data.activityType === ActivityTypes.INSTALL.NEW;\n    const color = install ? 'green' : 'red';\n    const date = new Date(parseInt(data.created_at));\n\n    let object = install? data.install :data.remove;\n\n    return (\n        <Card className=\"mb-3 mt-2 shadow\" style={{border: 'none'}}>\n            <Link to={`/install/c/${data.campaign._id}/${data.vehicle._id}/${data.placement._id}`} style={{display: \"flex\", color: 'black'}}>\n                <div className=\"vertical-text-wrapper\" style={{backgroundColor: color}}>\n                    <div className=\"vertical-text\">{install ? 'INSTALLED' : 'REMOVED'}</div>\n                </div>\n                <Card.Body className=\"waves-effect p-2 pb-1\">\n                    <Row className='text-center'>\n                        <Col xs={3} className='m-auto'>\n                            <div>\n                                <img src={vehTypeObject(data.vehicle._id).img}\n                                     alt={vehTypeObject(data.vehicle._id).name} height='55'/>\n                            </div>\n\n                            <div style={{fontSize: '1rem'}}>\n                                <strong>{vehID(data.vehicle._id)}</strong>\n                            </div>\n                            {!data.vehicle.listed && <Badge variant=\"warning\">{t('i.vehicle.unlisted')}</Badge>}\n                        </Col>\n\n                        <Col xs={9} className='m-auto install-col-val'>\n                            <div>{data.user.name}</div>\n                            <h4>{object.count}x {data.placement.place.name}</h4>\n                            <div className='description'>{data.campaign.name}</div>\n                            <div className=\"float-right description\">{date.getDate().toString().padStart(2, \"0\")}.{(date.getMonth()+1).toString().padStart(2, \"0\")}.{date.getFullYear()}</div>\n                        </Col>\n                    </Row>\n                </Card.Body>\n            </Link>\n            {data.vehicle.haveAds && <ProgressBar className=\"card-bottom-progress\" variant='success' now={100}/>}\n        </Card>\n    );\n});\n\nconst VehicleByCampaign = translate()(({t, path, doVehicleSelect, data}) => {\n    return (\n        <Link to={path} onClick={() => doVehicleSelect(data)} style={{color: 'black'}}>\n            <Card className=\"mb-3 mt-2 shadow\" style={{border: 'none'}}>\n                <Card.Body className=\"waves-effect pb-2 pt-2\">\n                    <Row className='text-center font-sm'>\n                        <Col>\n                            <Row>\n                                <Col xs={5} className='m-auto' style={{padding: 0}}>\n                                    <img src={vehTypeObject(data._id).img}\n                                         alt={vehTypeObject(data._id).name} height='60'/>\n                                </Col>\n\n                                <Col xs={7} className='install-col-val' style={{padding: 0}}>\n                                    <strong>{vehID(data._id)}{!data.listed && <Badge variant=\"warning\">{t('i.vehicle.unlisted')}</Badge>}</strong>\n                                    <div >{data.operator.company}</div>\n                                </Col>\n                            </Row>\n                        </Col>\n\n                        <Col className='m-auto install-col-val' style={{padding: 0}}>\n                            <strong>{data.totalAds}</strong>\n                            <div className='description'>{t('i.vehicle.placements')}</div>\n                        </Col>\n\n                    </Row>\n                </Card.Body>\n\n                {!!data.totalAds &&\n                <ProgressBar className=\"card-bottom-progress\" variant='success' now={100}/>}\n            </Card>\n        </Link>\n    );\n});\n\nexport {\n    VehicleByPlacement,\n    VehicleByHistory,\n    VehicleByCampaign\n};\n","import React, {Component} from \"react\";\nimport queryRequest from \"../../../utils/queryRequest\";\n\nimport { SearchAndTriggerNav } from '../components/navs';\nimport {VehicleByHistory} from '../components/vehicleCards';\n\nimport Container from 'react-bootstrap/Container';\nimport Row from 'react-bootstrap/Row';\n\nimport { translate } from 'react-i18next';\n\nclass History extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            search: '',\n            history: [],\n            loading: true,\n            me: true,\n        };\n    }\n\n    controller = new AbortController();\n    searchTimeout = 0;\n\n    componentWillUnmount() {\n        this.controller.abort();\n        clearTimeout(this.searchTimeout);\n    }\n\n    componentDidMount() {\n        this.installsLoadIn()\n    }\n\n    installsLoadIn = async () => {\n        const query = `query{ history(search:\"${this.state.search}\", skip:${this.state.history.length}, all:${this.state.me ? 'false':'true'}){ \n        id user{name}\n        vehicle{_id haveAds listed}\n        campaign{_id name}\n        placement{_id place{name}}\n        install{count}\n        remove{count}\n        activityType created_at }}`;\n        try {\n            const {history} = await queryRequest(query, this.controller.signal);\n            if (history) this.setState({history});\n        } catch (err) {\n          console.log(err)\n        }\n    };\n\n    handleSearchChange = (e) => {\n        this.setState({search: e.target.value, history:[]});\n        clearTimeout(this.searchTimeout);\n        this.searchTimeout = setTimeout(this.installsLoadIn, 600)\n    };\n\n    handleSearchSubmit = (e) => {\n        e.preventDefault();\n    };\n    handleSwitchTrigger = () => {\n      this.setState({me: !this.state.me, history:[]});\n      setTimeout(this.installsLoadIn, 10);\n    };\n\n    scrolling = (e, load) => {\n        // if (e.target.scrollTopMax - e.target.scrollTop < 90) load();\n    };\n\n    render() {\n        return (\n            <React.Fragment>\n                <SearchAndTriggerNav value={this.state.search} onChange={this.handleSearchChange}\n                                  placeholder=\"i.search.vehicle\"\n                                  onSubmit={this.handleSearchSubmit} trigger={{\n                    value: this.state.me, on: 'i.switch.me', off: 'i.switch.all', type: 'none',\n                    click: this.handleSwitchTrigger\n                }}/>\n\n                <Container style={{marginTop: 65}}>\n                    <Row className='border-bottom' style={{display: 'block'}}>\n                        <h4 className=\"text-center text-white\">{this.props.t('i.history.title')}</h4>\n                    </Row>\n                    <div>\n                        {this.state.history.length > 0 && this.state.history.map(history =>\n                            <VehicleByHistory key={history.id} data={history}/>)}\n                    </div>\n                </Container>\n            </React.Fragment>\n        );\n    }\n}\n\nexport default translate()(History);\n","import React, {Component} from 'react';\n\nimport {VehicleByCampaign} from '../components/vehicleCards';\n\nimport Container from 'react-bootstrap/Container';\nimport {CampaignNav} from \"../components/navs\";\nimport queryRequest from \"../../../utils/queryRequest\";\n\nimport { translate } from 'react-i18next';\n\nclass VehicleList extends Component {\n\n    state = {\n        inUse: false,\n        search: '',\n        vehicles: [],\n    }\n\n    searchTimeout = 0;\n    controller = new AbortController();\n\n    componentWillUnmount() {\n        this.controller.abort();\n        clearTimeout(this.searchTimeout);\n    }\n\n    componentDidMount() {\n        this.handleLoadIn()\n    }\n\n    handleSwitchTrigger = () => {\n        this.setState({inUse: !this.state.inUse});\n        setTimeout(this.handleLoadIn, 10);\n    };\n\n    handleSearch = async (e) => {\n        this.setState({search: e.target.value});\n        clearTimeout(this.searchTimeout);\n        this.searchTimeout = setTimeout(this.handleLoadIn, 600)\n    };\n\n    handleLoadIn = () => {\n        if (!this.state.search) this.loadCampaign();\n        else this.loadAll();\n    };\n\n    loadCampaign = async () => {\n        const query = `query{campaignVehiclesForInstallers(_id: \"${this.props.campaign._id}\", search:\"${this.state.search}\", skip:0){_id listed operator{company} totalAds}}`;\n        try {\n            const {campaignVehiclesForInstallers} = await queryRequest(query, this.controller.signal);\n            if (campaignVehiclesForInstallers) {\n                this.setState({vehicles: campaignVehiclesForInstallers});\n                console.log(campaignVehiclesForInstallers)\n            }\n        } catch (err) {\n            console.log(\"error\", err);\n        }\n    };\n\n    loadAll = async () => {\n        const query = `query{vehiclesForInstallers(search:\"${this.state.search}\", skip:0){_id listed operator{company} totalAds}}`;\n\n        try {\n            const {vehiclesForInstallers} = await queryRequest(query, this.controller.signal);\n            if (vehiclesForInstallers) {\n                this.setState({vehicles: vehiclesForInstallers});\n            }\n        } catch (err) {\n            console.log(\"error\", err);\n        }\n    };\n\n    handleSearchSubmit = (e) => {\n        e.preventDefault();\n        this.handleLoadIn()\n    };\n\n    render() {\n        const { t } = this.props;\n        return (\n            <Container style={{marginTop: 170}}>\n                <CampaignNav value={this.state.search} onSubmit={this.handleSearchSubmit}\n                             placeholder=\"i.search.vehicle\" onChange={this.handleSearch}\n                             campaign={this.props.campaign}\n                             goBack={this.props.history.goBack}/>\n\n                    {this.state.vehicles.map(veh => <VehicleByCampaign key={veh._id}\n                                                                       doVehicleSelect={this.props.doVehicleSelect}\n                                                                       path={`${this.props.path}/${veh._id}`}\n                                                                       data={veh}/>)}\n                {this.state.vehicles.length === 0 && <h3 className='pt-2 text-white text-center'>{t('i.campaign.fleet.empty')}</h3>}\n            </Container>\n\n        )\n    }\n}\n\nexport default translate()(VehicleList);\n","import Swal from 'sweetalert2';\nimport queryRequest from '../../utils/queryRequest';\n\nconst compressInstallsInVehicle = (installs) => {\n  const uniqueInstalls = {};\n  for (const install of installs) {\n    if (uniqueInstalls[install.placement._id])\n      uniqueInstalls[install.placement._id].count += install.count;\n    else uniqueInstalls[install.placement._id] = install;\n  }\n  return Object.values(uniqueInstalls);\n};\n\nconst handleAdRemoving = (vehicle_id, placement_id, t, cb) => {\n  const query = `mutation{removeAd(vehicle:\"${vehicle_id}\",placement:\"${placement_id}\")}`;\n\n  Swal.fire({\n    title: t('i.remove.form.confirm.title'),\n    text: t('i.remove.form.confirm.text'),\n    icon: 'warning',\n    showCancelButton: true,\n    confirmButtonColor: '#3085d6',\n    cancelButtonColor: '#d33',\n    confirmButtonText: t('i.remove.form.confirm.yes'),\n  }).then((result) => {\n    if (result.value) removeAdd(query, t, cb);\n  });\n};\n\nconst removeAdd = async (query, t, cb) => {\n  try {\n    const { removeAd } = await queryRequest(query);\n\n    if (removeAd) {\n      if (cb) cb();\n\n      Swal.fire({\n        title: 'Removed!',\n        text: `${removeAd} ${t('i.remove.form.success.text')}`,\n        icon: 'success',\n        timer: 1500,\n        showConfirmButton: false,\n      });\n    } else {\n      Swal.fire({\n        icon: 'error',\n        title: t('i.remove.form.invalid.unk.title'),\n        text: t('i.remove.form.invalid.unk.text'),\n        showConfirmButton: false,\n        timer: 2500,\n      });\n    }\n  } catch (err) {\n    if (err.name !== 'AbortError') {\n      Swal.fire({\n        icon: 'error',\n        title: t('i.remove.form.invalid.request.title'),\n        text: t('i.remove.form.invalid.request.text'),\n        showConfirmButton: false,\n        timer: 1500,\n      });\n      console.log('Fetch failed: ', err.toString());\n    }\n  }\n};\n\nexport { compressInstallsInVehicle, handleAdRemoving };\n","import React, { Component } from \"react\";\nimport queryRequest from \"../../../utils/queryRequest\";\nimport { compressInstallsInVehicle, handleAdRemoving } from '../utils';\n\nimport Swal from 'sweetalert2';\n\nimport Alert from 'react-bootstrap/Alert';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport Button from 'react-bootstrap/Button';\nimport ProgressBar from 'react-bootstrap/ProgressBar';\nimport InputGroup from 'react-bootstrap/InputGroup';\nimport FormControl from 'react-bootstrap/FormControl';\n\nimport { translate } from 'react-i18next';\n\nconst UninstallCard = translate()(({t, data, doRemove, displayCampaign}) => {\n\n  return (\n    <Row className=\"text-center p-2 pt-3 pb-3 shadow mt-2\">\n      <Col xs={8} className=\"m-auto\">\n        <strong>{data.count}x {data.placement.place.name}</strong>\n        {!!displayCampaign && <div className='description'>{data.campaign.name}</div>}\n      </Col>\n      <Col xs={4} className=\"m-auto\" style={{ padding: 0 }}>\n        <Button onClick={doRemove} variant=\"danger\" className=\"waves-effect\" style={{ fontSize: \"0.9rem\" }}>{t('i.remove.form.button.label')}</Button>\n      </Col>\n    </Row>)\n});\n\nconst OtherCampaignUninstallCard = (props) => {\n  return <UninstallCard {...props} displayCampaign={true}/>\n};\n\n\nconst successful = (t) => {\n  Swal.fire({\n    icon: 'success',\n    title: t('i.install.form.successful.title'),\n    showConfirmButton: false,\n    timer: 1500\n  });\n};\n\nconst error = (t) => {\n  Swal.fire({\n    icon: 'error',\n    title: t('i.install.form.invalid.unk.title'),\n    showConfirmButton: false,\n    timer: 1500\n  });\n};\nconst badRequest = (t) => {\n  Swal.fire({\n    icon: 'error',\n    title: t('i.install.form.invalid.request.title'),\n    showConfirmButton: false,\n    timer: 1500\n  });\n};\nconst limit = (t) => {\n  Swal.fire({\n    icon: 'error',\n    title: t('i.install.form.invalid.amount.title'),\n    text: t('i.install.form.invalid.amount.text'),\n    showConfirmButton: false,\n    timer: 1800\n  });\n};\n\n\nclass PlacementView extends Component {\n  state = {\n    alert: true,\n    installs: [],\n    showOthers: false,\n    count: '',\n  };\n\n  controller = new AbortController();\n  componentWillUnmount() {\n    this.controller.abort();\n  }\n\n  componentDidMount() {\n    if (!this.props.placement._id) this.props.doPlacementLoad(this.props.match.params.placement);\n    this.handlePlacementsLoad()\n  }\n\n  handlePlacementsLoad = async () =>{\n    const query = `query{ vehicleInstalls(_id:\"${this.props.vehicle._id}\"){ id count campaign{ _id name } count placement{_id place{name}}}}`;\n\n    try {\n      const {vehicleInstalls} = await queryRequest(query, this.controller.signal);\n      if (vehicleInstalls) {\n        this.setState({installs: compressInstallsInVehicle(vehicleInstalls)});\n      }\n    } catch (err) {\n      console.log(\"error\", err);\n    }\n  };\n\n  handleInstall = async (count) => {\n    if (count <= 0) return;\n    const installed = this.props.placement.installs.filter(i=> i.installed).map(pl => pl.count).reduce((a,b) => a+b,0);\n    if (count + installed > this.props.placement.count) {\n      limit(this.props.t);\n      return;\n    }\n\n    const query = `mutation{ installAd(vehicle:\"${this.props.vehicle._id}\", placement:\"${this.props.placement._id}\", count:${count})}`;\n\n    try {\n      const {installAd} = await queryRequest(query, this.controller.signal);\n      if (installAd) {\n        this.props.doCampReload().then(() => {\n          this.props.doPlacementLoad(this.props.match.params.placement);\n        });\n        this.props.doVehicleReload();\n        this.handlePlacementsLoad();\n        successful(this.props.t);\n      } else {\n        error(this.props.t);\n      }\n    } catch (err) {\n      if (err.name !== 'AbortError') {\n        badRequest(this.props.t);\n      }\n    }\n  };\n\n  handleSubmit = async (e) => {\n    e.preventDefault();\n    this.handleInstall(parseInt(this.state.count))\n  };\n\n  handleInstallCountChange = (e) => {\n    if (e.target.value === \"\" || /^\\d+$/.test(e.target.value)) {\n      this.setState({ count: e.target.value });\n    }\n  };\n\n  handleFullRefresh = () => {\n    this.props.doCampReload().then(() => {\n      this.props.doPlacementLoad(this.props.match.params.placement);\n    });\n    this.props.doVehicleReload();\n    this.handlePlacementsLoad();\n  };\n\n  render() {\n    if (!this.props.placement._id) return null;\n\n    const installed = this.props.placement.installs.filter(i=> i.installed).map(pl => pl.count).reduce((a,b) => a+b,0);\n    const all = this.props.placement.count;\n\n    const { t } = this.props;\n\n    console.log('placementView.state', this.state);\n    console.log('placementView.props', this.props);\n    return (\n      <React.Fragment>\n        <h4 className='text-center mt-0'>{t('i.vehicle.placement.selected.title')}</h4>\n        <Row className=\"text-center\">\n          <Col>\n            <strong>{this.props.placement.place.name}</strong>\n          </Col>\n          <Col>\n            {installed}/{all}\n          </Col>\n        </Row>\n        <ProgressBar striped variant='success' now={installed*100/all}/>\n        <form onSubmit={this.handleSubmit}>\n          <InputGroup className=\"mt-2\">\n            <FormControl onChange={this.handleInstallCountChange}\n              placeholder={t('i.install.form.input.placeholder')} value={this.state.count}\n            />\n            <InputGroup.Append>\n              <Button className=\"waves-effect\" variant=\"primary\" type=\"submit\">{t('i.install.form.button.label')}</Button>\n            </InputGroup.Append>\n          </InputGroup>\n        </form>\n\n        {this.state.installs.filter(install=> install.campaign._id === this.props.campaign._id).length > 0 && <h4 className='text-center mt-5'>{t('i.install.form.title.currentInstalls')}</h4>}\n        <div className=\"mb-3\" style={{ marginLeft: 10, marginRight: 10 }}>\n          {this.state.installs.length > 0 && this.state.installs.filter(install=> install.campaign._id === this.props.campaign._id).map((install) => <UninstallCard key={install.id} doRemove={() => handleAdRemoving(this.props.vehicle._id ,install.placement._id, t, this.handleFullRefresh)} data={install}/>)}\n        </div>\n\n        <Alert show={!this.state.showOthers && this.state.installs.filter(p => p.campaign._id !== this.props.campaign._id).length > 0} variant=\"warning\" className=\"mt-4 mb-0\">\n          <Alert.Heading>{t('i.install.form.others.title')}</Alert.Heading>\n          <p>{t('i.install.form.others.text')}</p>\n          <hr/>\n          <div className=\"d-flex justify-content-end\">\n            <Button onClick={() => this.setState({ showOthers: true })} variant=\"outline-warning\" style={{color:\"#856404\", borderColor:\"#856404\"}} >\n              {t('i.install.form.others.button')}\n            </Button>\n          </div>\n        </Alert>\n        {this.state.showOthers && (\n            <div className=\"mt-4 pt-4 mb-2\" style={{ marginLeft: 10, marginRight: 10 }}>\n              <h4 className=\"text-center\">{t('i.install.form.title.otherCampaigns')} foo bar </h4>\n              {this.state.installs.filter(p => p.campaign._id !== this.props.campaign._id).map((install) => <OtherCampaignUninstallCard key={install.id} doRemove={() => handleAdRemoving(this.props.vehicle._id, install.placement._id, t, this.handleFullRefresh)} data={install}/>)}\n            </div>\n        )}\n      </React.Fragment>\n    );\n  }\n}\n\nexport default translate()(PlacementView);\n","import React, {Component} from \"react\";\nimport {Link, Switch, Route, Redirect} from \"react-router-dom\";\n\nimport PlacementView from './placementView';\n\nimport Container from 'react-bootstrap/Container';\nimport Card from 'react-bootstrap/Card';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport ProgressBar from 'react-bootstrap/ProgressBar';\nimport Badge from 'react-bootstrap/Badge';\nimport { CampaignNav } from \"../components/navs\";\nimport {vehTypeObject, vehID} from \"../../../utils/vehicleProps\";\n\nimport { translate } from 'react-i18next';\n\nconst PlacementItem = ({data, doSelection, path}) => {\n    const installed = data.installs.map(pl => pl.count).reduce((a, b) => a + b, 0);\n    const all = data.count;\n    return (\n        <Col xs={6} md={4} onClick={doSelection}>\n            <Link to={`${path}/${data._id}`} style={{color: 'black'}}>\n                <Card className=\"text-center mb-1 mt-2 shadow\">\n                    <Card.Body className=\"waves-effect pl-1 pr-1\">\n                        <strong>{installed}/{all}</strong>\n                        <div className='description font-sm'>{data.place.name}</div>\n                    </Card.Body>\n                    <ProgressBar className=\"card-bottom-progress\" variant='success' now={installed * 100 / all}\n                                 style={{borderRadius: 0}}/>\n                </Card>\n            </Link>\n        </Col>\n    );\n};\n\nconst Placements = translate()(({t, campaign, doSelection, path}) => {\n    return (\n        <React.Fragment>\n            <h4 className='text-center m-0'>{t('i.vehicle.placements.title')}</h4>\n            <Row className=\"mt-3\">\n                {campaign.placements.map(placem => {\n                    return <PlacementItem doSelection={() => doSelection(placem)} key={placem._id} path={path} data={placem}/>;\n                })}\n            </Row>\n        </React.Fragment>\n    )\n});\n\nclass VehicleView extends Component {\n    // const {campaign, vehicle} = this.props.match.params;\n    state = {\n        selectedPlacement: {}\n    };\n\n    controller = new AbortController();\n\n    componentWillUnmount() {\n        this.controller.abort();\n    }\n\n    componentDidMount() {\n        if (!this.props.vehicle._id) this.props.doVehicleLoad();\n    }\n\n    handlePlacementLoad = (_id) => {\n        const placement = this.props.campaign.placements.find(placement => placement._id === _id);\n        if (placement) this.setState({selectedPlacement: placement});\n        else console.log(\"PLACEMENT DOES NOT EXIST\")\n    };\n    \n    handleSelection = (placement) => {\n        this.setState({selectedPlacement: placement});\n    };\n\n    render() {\n        const { t } = this.props;\n        return (\n            <React.Fragment>\n                <CampaignNav campaign={this.props.campaign}/>\n                {!this.props.vehicle._id && null}\n                {this.props.vehicle._id && (\n                    <Container style={{marginTop: 135}}>\n                        <Card className=\"mb-2 mt-2 shadow\" style={{border: 'none'}}>\n                            <Card.Body className=\"pb-3\">\n                                <h3 className='text-center mb-3 mt-0'>{t('i.vehicle.placement.title')}</h3>\n                                <Row className='text-center font-sm'>\n                                    <Col>\n                                        <Row>\n                                            <Col xs={5} className='m-auto' style={{padding: 0}}>\n                                                <img src={vehTypeObject(this.props.vehicle._id).img}\n                                                     alt={vehTypeObject(this.props.vehicle._id).name} height='60'/>\n                                            </Col>\n\n                                            <Col xs={7} style={{padding: 0}}>\n                                                <strong>{vehID((this.props.vehicle._id))}{!this.props.vehicle.listed && <Badge variant=\"warning\">{t('i.vehicle.unlisted')}</Badge>}</strong>\n                                                <div className='description'>{this.props.vehicle.operator.company}</div>\n                                            </Col>\n                                        </Row>\n                                    </Col>\n\n                                    <Col className='m-auto' style={{padding: 0}}>\n                                        <strong>{this.props.vehicle.totalAds}</strong>\n                                        <div className='description'>{t('i.vehicle.placements')}</div>\n                                    </Col>\n                                </Row>\n                            </Card.Body>\n                        </Card>\n                        {/*  */}\n                        <Card>\n                            <Card.Body>\n                                <Switch>\n                                    <Route\n                                        path=\"/install/c/:campaign/:vehicle/:placement\"\n                                        render={(props) => <PlacementView {...props}\n                                                                          doPlacementLoad={this.handlePlacementLoad}\n                                                                          doCampReload={this.props.doCampReload}\n                                                                          doVehicleReload={this.props.doVehicleLoad}\n                                                                          path={`/install/c/${props.match.params.campaign}/${props.match.params.vehicle}/${props.match.params.placement}`}\n                                                                          placement={this.state.selectedPlacement}\n                                                                          campaign={this.props.campaign}\n                                                                          vehicle={this.props.vehicle}\n                                        />}\n                                    />\n                                    <Route path=\"/install/c/:campaign/:vehicle/\"\n                                        render={(props) => <Placements doSelection={this.handleSelection}\n                                                                       path={`/install/c/${props.match.params.campaign}/${props.match.params.vehicle}`}\n                                                                       campaign={this.props.campaign}/>}/>\n                                    <Route render={() => <Redirect to={`/install/c/${this.state.campaign}`}/>} />\n                                </Switch>\n                            </Card.Body>\n                        </Card>\n                    </Container>)}\n            </React.Fragment>\n        );\n    }\n}\n\nexport default translate()(VehicleView);\n","import React, { Component } from \"react\";\nimport queryRequest from \"../../../utils/queryRequest\";\nimport { Switch, Route, Redirect } from \"react-router-dom\";\n\n// import Title from \"../../dashboard/all/title\";\n\nimport VehicleList from \"./vehicleList\";\nimport VehicleView from \"./vehicleView\";\n\nclass ByCampaign extends Component {\n  // const { campaign } = this.props.match.params;\n\n  state = {\n    selectedCampaign: {},\n    selectedVehicle: {},\n    redirect: false,\n  };\n\n  controller = new AbortController();\n\n  componentWillUnmount() {\n    this.controller.abort();\n  }\n\n  componentDidMount() {\n    this.handleCampaignLoading(this.props.match.params.campaign)\n  }\n\n  handleCampaignLoading = async (_id) => {\n    const query = `query{campaign(_id:\"${_id}\"){ _id name startDate endDate } placementsForInstaller(_id:\"${_id}\") { _id count place { name } installs { count installed } } }`;\n    try {\n      const { campaign, placementsForInstaller } = await queryRequest(query, this.controller.signal);\n      campaign.placements = placementsForInstaller;\n\n      if (campaign) {\n        this.setState({selectedCampaign: campaign});\n      } else {\n        console.log('Campaign not found', campaign);\n        this.setState({redirect:true})\n      }\n    } catch (err) {\n      console.log(\"error\", err);\n    }\n  };\n\n  handleVehicleSelect = (vehicle) => {\n    this.setState({selectedVehicle: vehicle});\n  };\n\n  handleVehicleLoading = async (_id) => {\n    const query = `query{ vehicle(_id:\"${_id}\"){ _id operator{company} totalAds listed}}`;\n\n    try {\n      const { vehicle } = await queryRequest(query, this.controller.signal);\n      if (vehicle) {\n        this.setState({selectedVehicle: vehicle});\n      } else {\n        this.setState({redirect:true})\n      }\n    } catch (err) {\n      console.log('ERROR', err);\n      this.setState({redirect:true})\n    }\n  };\n\n  render() {\n    if (this.state.redirect) return <Redirect push to={\"/install\"}/>;\n    if (!this.state.selectedCampaign._id) return null;\n\n    return (\n          <Switch>\n            <Route\n              path=\"/install/c/:campaign/:vehicle\"\n              render= { (props) => {\n                return (<VehicleView {...props} campaign={this.state.selectedCampaign} doVehicleLoad={async () =>  { await this.handleVehicleLoading(props.match.params.vehicle)}} doCampReload={async () => { await this.handleCampaignLoading(props.match.params.campaign)}} vehicle={this.state.selectedVehicle}/>);\n              }}\n            />\n            <Route\n              path=\"/install/c/:campaign\"\n              render= { (props) => {\n                return (<VehicleList {...props} path={`/install/c/${props.match.params.campaign}`} doVehicleSelect={this.handleVehicleSelect} campaign={this.state.selectedCampaign}/>);\n              }}\n            />\n          </Switch>\n    );\n  }\n}\n\nexport default ByCampaign;\n","import React, { Component } from \"react\";\nimport queryRequest from \"../../../utils/queryRequest\";\n\nimport { SearchAndTriggerNav } from '../components/navs';\nimport { VehicleByPlacement} from '../components/vehicleCards';\n\nimport Container from 'react-bootstrap/Container';\nimport Row from 'react-bootstrap/Row';\n\nimport { translate } from 'react-i18next';\n\nclass FleetList extends Component {\n  constructor(props) {\n    super(props);\n\n    const { campaign } = this.props.match.params;\n\n    this.state = {\n      campaign,\n      search: \"\",\n      vehicles: [],\n    };\n  }\n\n  controller = new AbortController();\n\n  searchTimeout = 0;\n\n  componentWillUnmount() {\n    clearTimeout(this.searchTimeout);\n    this.controller.abort();\n  }\n\n  handleSearchChange = (e) => {\n    this.setState({ search: e.target.value });\n    clearTimeout(this.searchTimeout);\n    this.searchTimeout = setTimeout(this.loadVehicles, 400)\n  };\n  handleSearchSubmit = (e) => {\n    e.preventDefault();\n\n  };\n  componentDidMount() {\n    this.loadVehicles();\n  }\n\n  loadVehicles = async () => {\n    const query = `query{ activeVehicles(search:\"${this.state.search}\", skip:0){_id listed operator{company} installs{count}}}`;\n\n    try {\n      const {activeVehicles} = await queryRequest(query, this.controller.signal);\n      if (activeVehicles) {\n        this.setState({vehicles: activeVehicles});\n        console.log('Active vehicles loaded', activeVehicles)\n      }\n    } catch (err) {\n      if (err.name === 'SyntaxError') {\n        // No Connection\n      } else if (err.name === 'AbortError') {\n        // Aborted\n      } else {\n        // Bad request\n      }\n      console.log(\"error\", err);\n    }\n  };\n\n  render() {\n    return (\n      <React.Fragment>\n        <SearchAndTriggerNav value={this.state.search} onChange={this.handleSearchChange} onSubmit={this.handleSearchSubmit}\n                placeholder=\"i.search.vehicle\"/>\n        <Container style={{marginTop:65}}>\n          <Row className='border-bottom' style={{display:'block'}}>\n            <h4 className=\"text-center text-white\">{this.props.t('i.vehicles.title')}</h4>\n          </Row>\n          {this.state.vehicles.map(vehicle => <VehicleByPlacement key={vehicle._id} data={vehicle}/>)}\n        </Container>\n      </React.Fragment>\n\n    );\n  }\n}\n\nexport default translate()(FleetList);\n","import React, { Component } from \"react\";\nimport queryRequest from \"../../../utils/queryRequest\";\nimport { Redirect} from \"react-router-dom\";\nimport { vehID, vehTypeObject } from \"../../../utils/vehicleProps\";\n\nimport Container from 'react-bootstrap/Container';\nimport Card from 'react-bootstrap/Card';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport Button from 'react-bootstrap/Button';\nimport Badge from \"react-bootstrap/Badge\";\n\nimport {compressInstallsInVehicle, handleAdRemoving} from \"../utils\";\n\nimport { translate } from 'react-i18next';\n\nconst PlacementUninstallCard = translate()(({data, doRemoving, t}) => {\n  return (\n    <Row className=\"text-center p-2 pt-3 pb-3 shadow mt-2\">\n      <Col xs={8} className=\"m-auto\">\n        <strong>{data.count}x {data.placement.place.name}</strong>\n        <div className='description'>{data.campaign.name}</div>\n      </Col>\n      <Col xs={4} className=\"m-auto\" style={{ padding: 0 }}>\n        <Button onClick={doRemoving} variant=\"danger\" className=\"waves-effect\" style={{ fontSize: \"0.9rem\" }}>{t('i.remove.form.button.label')}</Button>\n      </Col>\n    </Row>\n  )\n});\n\nclass PlacementViewFleet extends Component {\n  // const { vehicle } = this.props.match.params;\n  state = {\n    installs: [],\n    vehicle: null,\n    redirect: false\n  };\n\n  controller = new AbortController();\n\n  componentWillUnmount() {\n    this.controller.abort();\n  }\n\n  componentDidMount() {\n    this.handleVehicleLoad().then(() => {\n      this.handlePlacementsLoad();\n    }).catch(() =>{\n      this.setState({redirect: true})\n    });\n  }\n\n  handleVehicleLoad = async () => {\n    const query = `query{ vehicle(_id:\"${this.props.match.params.vehicle}\"){ _id operator{company} listed}}`;\n\n    try {\n      const { vehicle } = await queryRequest(query, this.controller.signal);\n      if (vehicle) {\n        console.log('Vehicle loaded', vehicle);\n        this.setState({vehicle});\n      } else {\n        console.log('Vehicle not found', vehicle);\n        this.setState({redirect:true})\n      }\n    } catch (err) {\n      console.log('ERROR', err);\n      this.setState({redirect:true})\n    }\n  };\n\n  handlePlacementsLoad = async () => {\n    const query = `query{ vehicleInstalls(_id:\"${this.state.vehicle._id}\"){ id count campaign{ _id name } count placement{_id place{name}}}}`;\n\n    try {\n      const {vehicleInstalls} = await queryRequest(query, this.controller.signal);\n      if (vehicleInstalls) this.setState({ installs: compressInstallsInVehicle(vehicleInstalls) });\n    } catch (err) {\n      console.log(\"error\", err);\n    }\n  };\n\n  render() {\n    if (this.state.redirect) return <Redirect to=\"/install/f\"/>;\n    if (!this.state.vehicle) return null;\n    const { t } = this.props;\n\n    return (\n      <Container>\n        <Card className=\"mt-2 shadow\" style={{border: 'none'}}>\n          <Card.Body>\n            <Row className='text-center'>\n              <Col>\n                <Row>\n                  <Col xs={5} className='m-auto' style={{padding:0}}>\n                    <img src={vehTypeObject(this.state.vehicle._id).img} alt={vehTypeObject(this.state.vehicle._id).name} height='60'/>\n                  </Col>\n\n                  <Col xs={7} style={{padding:0}}>\n                    <strong>{vehID((this.state.vehicle._id))}{!this.state.vehicle.listed && <Badge variant=\"warning\">{t('i.vehicle.unlisted')}</Badge>}</strong>\n                    <div className='description'>{this.state.vehicle.operator.company}</div>\n                  </Col>\n                </Row>\n              </Col>\n\n              <Col className='m-auto p-0'>\n                <strong>{this.state.installs.length && this.state.installs.map(i=> i.count).reduce((a,b) => a+b,0)}</strong>\n                <div className='description'>{t('i.vehicle.placements')}</div>\n              </Col>\n            </Row>\n\n            <div className=\"border-top mt-4\" style={{marginLeft:10, marginRight:10}}>\n              {this.state.installs.map(i => <PlacementUninstallCard key={i.id} doRemoving={() => handleAdRemoving(this.state.vehicle._id, i.placement._id, t, this.handlePlacementsLoad)} data={i}/>)}\n            </div>\n\n          </Card.Body>\n        </Card>\n      </Container>\n    );\n  }\n}\n\nexport default translate()(PlacementViewFleet);\n","import React, { useState, useContext } from 'react';\nimport { Switch, Route, NavLink } from 'react-router-dom';\nimport Title from '../components/dashboard/all/title';\n\nimport Container from 'react-bootstrap/Container';\nimport Navbar from 'react-bootstrap/Navbar';\nimport Col from 'react-bootstrap/Col';\nimport Row from 'react-bootstrap/Row';\nimport Card from 'react-bootstrap/Card';\nimport { translate } from 'react-i18next';\nimport AuthContext from '../context/auth-context';\n\nimport CampaignsList from '../components/installation/views/campaignsList';\nimport History from '../components/installation/views/history';\n\nimport ByCampaign from '../components/installation/views/byCampaign';\nimport ByFleet from '../components/installation/views/byFleet';\nimport PlacementViewFleet from '../components/installation/views/placementViewFleet';\n\nimport queryRequest from '../utils/queryRequest';\nimport Button from 'react-bootstrap/Button';\n\nconst getInstallerId = async (setInstaller) => {\n  const query = `query{ installerMe{ _id }}`;\n  try {\n    const { installerMe } = await queryRequest(query);\n    if (installerMe) setInstaller(installerMe);\n    else setInstaller(null);\n  } catch (err) {\n    setInstaller(null);\n  }\n};\n\nexport default translate()(({ t }) => {\n  const [intaller, setInstaller] = useState('');\n\n  if (intaller === null) {\n    const context = useContext(AuthContext);\n    return (\n      <Container className=\"mt-5\">\n        <Card>\n          <Card.Body className=\"text-center\">\n            <h4 className=\"text-center\">{t('i.noTeam')}</h4>\n            <Button variant=\"primary\" onClick={context.logout}>\n              <i className=\"dripicons-exit\" /> {t('i.logout')}\n            </Button>\n          </Card.Body>\n        </Card>\n      </Container>\n    );\n  }\n  if (intaller === '') {\n    getInstallerId(setInstaller);\n    return null;\n  }\n\n  return (\n    <React.Fragment>\n      <div style={{ marginBottom: 80 }}>\n        {/*<Toolbar/>*/}\n\n        <Switch>\n          <Route\n            path=\"/install/f/:vehicle/\"\n            component={Title({\n              component: PlacementViewFleet,\n              title: t('i.navbar.vehicle'),\n            })}\n          />\n          <Route\n            path=\"/install/f\"\n            component={Title({\n              component: ByFleet,\n              title: t('i.navbar.vehicles'),\n            })}\n          />\n          <Route path=\"/install/c/:campaign\" component={ByCampaign} />\n          <Route\n            path=\"/install/h\"\n            component={Title({\n              component: History,\n              title: t('i.navbar.history'),\n            })}\n          />\n          <Route\n            path=\"/install\"\n            component={Title({\n              component: CampaignsList,\n              title: t('i.navbar.campaigns'),\n            })}\n          />\n        </Switch>\n      </div>\n\n      <Navbar fixed=\"bottom\" className=\"navbar-container bg-main\">\n        <Container>\n          <Row className=\"text-white text-center i-bot-nav\">\n            <Col xs={4}>\n              <NavLink to=\"/install\" exact>\n                <i className=\"fa fa-home\" />\n              </NavLink>\n            </Col>\n            <Col xs={4}>\n              <NavLink to=\"/install/f\">\n                <i className=\"fa fa-bus\" />\n              </NavLink>\n            </Col>\n            <Col xs={4}>\n              <NavLink to=\"/install/h\">\n                <i className=\"fa fa-history\" />\n              </NavLink>\n            </Col>\n          </Row>\n        </Container>\n      </Navbar>\n    </React.Fragment>\n  );\n});\n","import styled from 'styled-components';\n// import * as COLOR from \"../../constants/colors\";\n\nexport const HideIcon = styled.span`\n  padding: 5px;\n  margin-left: 10px;\n`;\n\nexport const LoginInput = styled.input`\n  border-width: 2px;\n  border-color: #a9a9a9ff;\n  border-radius: 4px;\n  padding: 5px;\n  width: 85%;\n`;\n\nexport const InputWrapper = styled.div`\n  align-items: center;\n  justify-content: center;\n`;\n","import { faEye, faEyeSlash } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport React, { Component } from 'react';\nimport Alert from 'react-bootstrap/Alert';\nimport Button from 'react-bootstrap/Button';\nimport Card from 'react-bootstrap/Card';\nimport Col from 'react-bootstrap/Col';\nimport Form from 'react-bootstrap/Form';\nimport Row from 'react-bootstrap/Row';\nimport Spinner from 'react-bootstrap/Spinner';\nimport { translate } from 'react-i18next';\nimport { Link } from 'react-router-dom';\n\nimport AuthContext from '../../context/auth-context';\n\nimport logo from '../../images/logo.svg';\n\nimport LanguageSelector from '../../utils/languageSelector';\nimport queryRequest from '../../utils/queryRequest';\n\nimport './loginPage.styles';\nimport { HideIcon, InputWrapper, LoginInput } from './loginPage.styles';\n\nconst AlertDismiss = (props) => {\n  return (\n    <Alert\n      className=\"mt-2\"\n      variant={props.type}\n      onClose={() => props.hide()}\n      dismissible\n    >\n      {props.message}\n    </Alert>\n  );\n};\n\nclass Login extends Component {\n  state = {\n    email: '',\n    password: '',\n    remember: true,\n    logging: null,\n    expired: this.props.expired,\n    invalid: false,\n    connection: this.props.connection,\n    hidden: true,\n  };\n\n  controller = new AbortController();\n  static contextType = AuthContext;\n\n  componentWillUnmount() {\n    this.controller.abort();\n  }\n\n  handleSubmit = async (evt) => {\n    evt.preventDefault();\n    if (!this.state.email || !this.state.password) return;\n    this.setState({ logging: true });\n    const query = `query{login(email:\"${this.state.email}\",password:\"${this.state.password}\")}`;\n\n    try {\n      const { login } = await queryRequest(query, this.controller.signal);\n      if (!login)\n        this.setState({ invalid: true, logging: false, expired: false });\n      else this.context.login(login, this.state.remember);\n    } catch (err) {\n      if (err.name === 'SyntaxError') {\n        this.setState({ connection: true, logging: false, expired: false });\n      } else {\n        this.setState({ invalid: true, logging: false, expired: false });\n      }\n    }\n  };\n\n  handlePasswordToggle = () => {\n    this.setState((prevState) => ({ hidden: !prevState.hidden }));\n  };\n\n  handleUserChange = (evt) => {\n    this.setState({\n      email: evt.target.value,\n    });\n  };\n\n  handlePassChange = (evt) => {\n    this.setState({\n      password: evt.target.value,\n    });\n  };\n\n  handleRemeber = (evt) => {\n    this.setState({\n      remember: evt.target.checked,\n    });\n  };\n\n  render() {\n    const { t } = this.props;\n    const hidden = this.state.hidden;\n    return (\n      <div className=\"wrapper-page\">\n        <Card>\n          <Card.Body>\n            <div className=\"p-2\">\n              <h3 className=\"text-center m-0\">\n                <a href=\"/\" className=\"logo logo-admin\">\n                  <img src={logo} height=\"100\" alt=\"logo\" />\n                </a>\n              </h3>\n\n              {this.state.expired && (\n                <AlertDismiss\n                  message={t('login.failed.session')}\n                  hide={() => this.setState({ expired: false })}\n                  type=\"warning\"\n                />\n              )}\n              {this.state.invalid && (\n                <AlertDismiss\n                  message={t('login.failed.invalid')}\n                  hide={() => this.setState({ invalid: false })}\n                  type=\"danger\"\n                />\n              )}\n              {this.state.connection && (\n                <AlertDismiss\n                  message={t('login.failed.connection')}\n                  hide={() => this.setState({ connection: false })}\n                  type=\"warning\"\n                />\n              )}\n\n              <Form onSubmit={this.handleSubmit}>\n                <InputWrapper>\n                  <Form.Group>\n                    <Row>\n                      <Form.Label>{t('login.email.label')}</Form.Label>\n                    </Row>\n                    <Row>\n                      <LoginInput\n                        type=\"email\"\n                        name=\"email\"\n                        autoComplete=\"username\"\n                        placeholder={t('login.email.placeholder')}\n                        value={this.state.username}\n                        onChange={this.handleUserChange}\n                        required\n                      />\n                    </Row>\n                  </Form.Group>\n                  <Form.Group>\n                    <Row>\n                      <Form.Label>{t('login.password.label')}</Form.Label>\n                    </Row>\n                    <Row>\n                      <LoginInput\n                        // pattern=\".{6,}\"\n                        minLength=\"6\"\n                        type={hidden === true ? 'password' : 'text'}\n                        name=\"password\"\n                        autoComplete=\"password\"\n                        placeholder={t('login.password.placeholder')}\n                        value={this.state.password}\n                        onChange={this.handlePassChange}\n                        required\n                      />\n\n                      <HideIcon onClick={this.handlePasswordToggle}>\n                        {hidden === true ? (\n                          <FontAwesomeIcon icon={faEyeSlash} />\n                        ) : (\n                          <FontAwesomeIcon icon={faEye} />\n                        )}\n                      </HideIcon>\n                    </Row>\n                  </Form.Group>\n                </InputWrapper>\n                <Row className=\"m-t-20\">\n                  <Col xs={6}>\n                    <div className=\"custom-control custom-checkbox\">\n                      <input\n                        type=\"checkbox\"\n                        className=\"custom-control-input\"\n                        id=\"customControlInline\"\n                        checked={this.state.remember}\n                        onChange={this.handleRemeber}\n                      />\n                      <label\n                        className=\"custom-control-label\"\n                        htmlFor=\"customControlInline\"\n                      >\n                        {t('login.remember.label')}\n                      </label>\n                    </div>\n                  </Col>\n                  <Col xs={6} className=\"text-right\">\n                    <Button\n                      variant=\"primary\"\n                      className=\"w-md waves-effect waves-light\"\n                      type=\"submit\"\n                    >\n                      {this.state.logging && (\n                        <Spinner\n                          animation=\"border\"\n                          size=\"sm\"\n                          className=\"mr-1\"\n                        />\n                      )}\n                      {t('login.button.submit.label')}\n                    </Button>\n                  </Col>\n                </Row>\n              </Form>\n              <Row>\n                <Col className=\"m-t-20 p-0 d-flex align-items-center\">\n                  <Link className=\"text-muted\" to=\"/reset_password\">\n                    <i className=\"mdi mdi-lock\" />\n                    {t('login.forget.label')}\n                  </Link>\n                </Col>\n                <Col xs={2} className=\"m-t-20 p-0\">\n                  <LanguageSelector />\n                </Col>\n              </Row>\n            </div>\n          </Card.Body>\n        </Card>\n      </div>\n    );\n  }\n}\nexport default translate()(Login);\n","import jwt_decode from 'jwt-decode';\nimport React, { Component } from 'react';\nimport Card from 'react-bootstrap/Card';\nimport Spinner from 'react-bootstrap/Spinner';\nimport { translate } from 'react-i18next';\nimport { Redirect, Route, Switch } from 'react-router-dom';\n\nimport AuthContext from '../context/auth-context';\n\nimport Dashboard from '../pages/dashboard';\nimport Installation from '../pages/installation';\nimport Login from '../pages/login/login';\n\nimport queryRequest from '../utils/queryRequest';\n\nconst rolesToDashboard = [1, 3, 5];\n\nconst LoggingIn = translate()(({ t }) => (\n  <div className=\"wrapper-page\">\n    <Card>\n      <Card.Body>\n        <div className=\"p-2\">\n          <div className=\"text-center m-3\">\n            <Spinner\n              animation=\"border\"\n              variant=\"info\"\n              style={{ width: '4rem', height: '4rem' }}\n            />\n          </div>\n          <h4 className=\"mt-0 header-title text-center\">\n            {t('login.logging')}\n          </h4>\n        </div>\n      </Card.Body>\n    </Card>\n  </div>\n));\n\nclass Auth extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      validated: null,\n      expired: false,\n      connection: false,\n      token: null,\n      user: {\n        name: null,\n        role: null,\n      },\n      tokenExpiration: null,\n    };\n    if (sessionStorage.getItem('ACCESS_TOKEN')) {\n      sessionStorage.setItem('_t', sessionStorage.getItem('ACCESS_TOKEN'));\n      sessionStorage.removeItem('ACCESS_TOKEN');\n    }\n    if (localStorage.getItem('ACCESS_TOKEN')) {\n      localStorage.setItem('_t', localStorage.getItem('ACCESS_TOKEN'));\n      localStorage.removeItem('ACCESS_TOKEN');\n    }\n    if (sessionStorage.getItem('_t') || localStorage.getItem('_t')) {\n      this.state.token =\n        sessionStorage.getItem('_t') || localStorage.getItem('_t');\n      this.tokenValidate();\n    }\n  }\n  controller = new AbortController();\n  componentWillUnmount() {\n    this.controller.abort();\n  }\n\n  tokenValidate = async () => {\n    const query = 'query{tokenValidate}';\n    try {\n      const { tokenValidate } = await queryRequest(\n        query,\n        this.controller.signal\n      );\n      this.login(tokenValidate, true);\n    } catch (err) {\n      if (err.name === 'SyntaxError') {\n        this.setState({ validated: false, connection: true });\n      } else {\n        this.setState({ validated: false, expired: true });\n      }\n    }\n  };\n\n  login = (token, remember) => {\n    if (!token) return;\n    if (remember) {\n      localStorage.setItem('_t', token);\n      sessionStorage.removeItem('_t');\n    } else {\n      localStorage.removeItem('_t');\n      sessionStorage.setItem('_t', token);\n    }\n    const token_data = jwt_decode(token);\n    this.setState({\n      token,\n      user: {\n        _id: token_data.userId,\n        name: token_data.userName,\n        role: token_data.userRole,\n      },\n      tokenExpiration: token_data.exp,\n      validated: true,\n      connection: false,\n      expired: false,\n    });\n  };\n\n  logout = () => {\n    localStorage.removeItem('_t');\n    sessionStorage.removeItem('_t');\n    this.setState({\n      token: null,\n      user: { name: null, role: null },\n      tokenExpiration: null,\n      validated: null,\n    });\n  };\n\n  render() {\n    const {\n      validated,\n      token,\n      user,\n      expired,\n      connection,\n      tokenExpiration,\n    } = this.state;\n    if (validated === null && token !== null) return <LoggingIn />;\n\n    return (\n      <AuthContext.Provider\n        value={{\n          tokenExpiration: tokenExpiration,\n          token: token,\n          _id: user._id,\n          name: user.name,\n          role: user.role,\n          validated: validated,\n          login: this.login,\n          logout: this.logout,\n        }}\n      >\n        {!validated && <Login expired={expired} connection={connection} />}\n        {validated && (\n          <Switch>\n            <Route path=\"/install\" component={Installation} />\n            {rolesToDashboard.includes(user.role) && (\n              <Route path=\"/dashboard\" component={Dashboard} />\n            )}\n\n            <Route component={() => <RootRedirect role={user.role} />} />\n          </Switch>\n        )}\n      </AuthContext.Provider>\n    );\n  }\n}\n\nconst RootRedirect = ({ role }) => {\n  if (rolesToDashboard.includes(role)) return <Redirect to=\"/dashboard\" />;\n  return <Redirect to=\"/install\" />;\n};\n\nexport default Auth;\n","import { createBrowserHistory } from 'history';\n\nexport default createBrowserHistory();\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React, { lazy, Suspense } from 'react';\nimport ReactDOM from 'react-dom';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './css/custom.css';\nimport './css/style.css';\nimport 'leaflet/dist/leaflet.css';\nimport './css/icons/css/materialdesignicons.css';\nimport './css/icons/css/fontawesome.css';\nimport './css/icons/css/ionicons.css';\nimport './css/icons/css/dripicons.css';\n\nimport ErrorBoundary from './components/dashboard/ErrorBoundary/ErrorBoundaryComponent';\nimport Spinner from './components/dashboard/Spinner/SpinnerComponent'\nimport './i18n';\nimport Auth from './utils/withAuth';\nimport { Router, Switch, Route } from 'react-router-dom';\nimport history from './history';\nimport * as serviceWorker from './serviceWorker';\n\nconst PasswordRecovery = lazy(() => import('./pages/passwordRecovery'));\nconst NewPassword = lazy(() => import('./pages/newPassword'));\nconst ClientLogin = lazy(() => import('./components/client/login'));\n\nconst MainRouting = () => {\n  return (\n    <Router history={history}>\n      <Switch>\n        <ErrorBoundary>\n          <Suspense fallback={<Spinner />}>\n            <Route path=\"/reset_password\" component={PasswordRecovery} />\n            <Route path=\"/new_password/:token\" component={NewPassword} />\n            <Route path=\"/campaign/:id\" component={ClientLogin} />\n            <Route component={Auth} />\n          </Suspense>\n        </ErrorBoundary>\n      </Switch>\n    </Router>\n  );\n};\n\nReactDOM.render(<MainRouting />, document.getElementById('root'));\n\nserviceWorker.register();\n","import React, { Component } from 'react';\nimport './css/jquery.dataTables.min.css';\nimport './css/dataTables.bootstrap4.min.css';\nimport 'datatables.net-bs4';\nimport 'datatables.net-responsive-bs4';\n\nimport { translate } from 'react-i18next';\n\nconst $ = require('jquery');\n$.DataTable = require('datatables.net');\n\n\nclass DataTable extends Component {\n\n    componentWillUnmount() {\n        // if (this.$table) this.$table.destroy(true);\n    }\n\n    async componentDidMount() {\n        await Promise.all(this.props.columns.map(col => col.load ? col.load(this.arrayToObject) : ''));\n        const { t } = this.props;\n\n        let token = sessionStorage.getItem(\"_t\") || localStorage.getItem(\"_t\");\n\n        this.$table = $(this.el).DataTable({\n            order: this.props.order,\n            data: this.props.data,\n            ajax: !this.props.data ? {\n                url: this.props.ajax,\n                type: 'GET',\n                beforeSend: function (request) {\n                    if (token) request.setRequestHeader(\"Authorization\", `Bearer ${token}`);\n                }\n            } : undefined,\n            columns: this.props.columns,\n            rowCallback: this.props.rowCallback,\n            responsive: true,\n            language: {\n                lengthMenu:     t('dataTable.lengthMenu'),\n                zeroRecords:    t('dataTable.zeroRecords'),\n                info:           t('dataTable.info'),\n                infoEmpty:      t('dataTable.infoEmpty'),\n                infoFiltered:   t('dataTable.infoFiltered'),\n                search:         t('dataTable.search'),\n                loadingRecords: t('dataTable.loadingRecords'),\n                processing:     t('dataTable.processing'),\n                thousands:      t('dataTable.thousands'),\n                paginate: {\n                    first:    t('dataTable.paginate.first'),\n                    last:     t('dataTable.paginate.last'),\n                    next:     t('dataTable.paginate.next'),\n                    previous: t('dataTable.paginate.previous')\n                },\n            }\n        });\n\n        if (this.props.setRefresh) this.props.setRefresh(this.$table.ajax.reload)\n    }\n\n    arrayToObject = (array, keyField) =>\n        array.reduce((obj, item) => {\n        obj[item[keyField]] = item;\n        return obj }, {});\n\n    render() {\n        return (\n            <table className=\"display\" width=\"100%\" ref={el=> {this.el = el}}>\n                <thead>\n                    <tr>\n                        {this.props.thead.map(name => <th key={name}>{name}</th>)}\n                    </tr>\n                </thead>\n            </table>\n        )\n    }\n}\n\n\nexport default translate()(DataTable);","import React from \"react\";\nimport { RoleLink } from '../routes';\n\nimport Spinner from 'react-bootstrap/Spinner';\n\nconst SmallInfoCard = (props) => {\n    const { link, id, colorDescription, loaded, title, main, description } = props.item;\n    const color = props.item.color || 'orange';\n\n    return (\n            <div className=\"mini-stat bg-white text-center\">\n                {title}\n                {!loaded &&\n                <div className=\"text-center m-3\">\n                    <Spinner variant=\"warning\" animation='border'/>\n                </div>}\n\n                {loaded &&\n                <React.Fragment>\n                    <div className=\"mini-stat-info\">\n                        {link && <RoleLink to={link} id={id}><span className={\"counter text-\" + color}>{main}</span></RoleLink>}\n                        {!link && <span className={\"counter text-\" + color}>{main}</span>}\n                    </div>\n                    <p className={\"mb-0 m-t-20 text-\" + (colorDescription ? colorDescription : \"primary\")}>\n                        {description}\n                    </p>\n                </React.Fragment>}\n            </div>\n    );\n};\n\nexport default SmallInfoCard;\n","export default {\n  CAMPAIGN: {\n    NEW: 'campaign.new', //DONE user1 (creator)   campaign\n    EDIT: {\n      // user1 (changer)   campaign\n      NAME: 'campaign.edit.name', //DONE user1 (changer)  campaign  strValue1 (oldVal) strValue2 (newVal)\n      CLIENT: 'campaign.edit.client', //DONE user1 (changer)  campaign  strValue1 (oldVal) strValue2 (newVal)\n      BUDGET: 'campaign.edit.budget', //DONE user1 (changer)  campaign  strValue1 (oldVal) strValue2 (newVal)\n      CITIES: 'campaign.edit.cities', //  user1 (changer)  campaign  strValue1 (oldVal) strValue2 (newVal)\n      START_DATE: 'campaign.edit.start_date', //DONE user1 (changer)  campaign  strValue1 (oldVal) strValue2 (newVal)\n      END_DATE: 'campaign.edit.end_date', //DONE user1 (changer)  campaign  strValue1 (oldVal) strValue2 (newVal)\n    },\n    NOTIFICATION: {\n      PRE_START: 'campaign.notification.pre_start', // campaign\n      START: 'campaign.notification.start', // campaign\n      PRE_END: 'campaign.notification.pre_end', // campaign\n      END: 'campaign.notification.end', // campaign\n      INSTALLED: 'campaign.notification.installed', // campaign\n      REMOVED: 'campaign.notification.removed', // campaign\n    },\n    SHARE: 'campaign.share',\n    DELETE: 'campaign.del', // user1 (deleter)   campaign\n  },\n  PLACEMENT: {\n    NEW: 'placement.new',\n    EDIT: {\n      COUNT: 'placement.edit.count',\n    },\n    DELETE: 'placement.del',\n  },\n  OPERATOR: {\n    EDIT: {\n      COMPANY: 'operator.edit.company', // user1 (changer)  operator  strValue1 (oldVal) strValue2 (newVal)\n      LISTED: 'operator.edit.listed', // user1 (changer)  operator  strValue1 (oldVal) strValue2 (newVal)\n    },\n  },\n  INSTALL: {\n    NEW: 'install.new', //DONE user1 (installer)  installation fleet\n    EDIT: {\n      COUNT: 'install.edit.count', // user1 (changer)  installation  strValue1 (oldVal) strValue2 (newVal) fleet\n    },\n    DELETE: 'install.del', // user1  strValue1 (oldVal) strValue2 (newVal) fleet\n  },\n  REMOVE: {\n    NEW: 'remove.new', // user1 (uninstaller)  installation fleet\n    EDIT: {\n      COUNT: 'remove.edit.count', // user1 (changer)  installation fleet\n    },\n    DELETE: 'remove.del', // user1 (deleter) installation fleet\n    CLEAR: 'client.clear', //DONE user (deleter)  client\n  },\n  CLIENT: {\n    NEW: 'client.new', //DONE user1 (creator)  client\n    EDIT: {\n      COMPANY: 'client.edit.company', //DONE user1 (changer)  client  strValue1 (oldVal) strValue2 (newVal)\n      PERSON: 'client.edit.person', //DONE user1 (changer)  client  strValue1 (oldVal) strValue2 (newVal)\n      EMAIL: 'client.edit.email', //DONE user1 (changer)  client  strValue1 (oldVal) strValue2 (newVal)\n      PHONE: 'client.edit.phone', //DONE user1 (changer)  client  strValue1 (oldVal) strValue2 (newVal)\n    },\n    DELETE: 'client.del', //DONE user (deleter)  client\n    CLEAR: 'client.clear', //DONE user (deleter)  client\n  },\n  FLEET: {\n    EDIT: {\n      NUMBERPLATE: 'fleet.edit.numberplate', //DONE user1 (changer) fleet strValue1 (oldVal) strValue2 (newVal)\n    },\n  },\n  USER: {\n    NEW: 'user.new', //DONE user1 (creator)  user2 (user)\n    EDIT: {\n      NAME: 'user.edit.name', //DONE user1 (chagner-) user2 (user)  strValue1 (oldVal) strValue2 (newVal)\n      PHONE: 'user.edit.phone', //DONE user1 (chagner-) user2 (user)  strValue1 (oldVal) strValue2 (newVal)\n      ROLE: 'user.edit.role', //DONE user1 (chagner-) user2 (user)  strValue1 (oldId) strValue2 (newId)\n      CITY: 'user.edit.city', //DONE user1 (chagner-) user2 (user)  strValue1 (oldId) strValue2 (newId)\n      EMAIL: 'user.edit.email', //DONE user1 (chagner-) user2 (user)  strValue1 (oldVal) strValue2 (newVal)\n      PASSWORD: 'user.edit.pass', //DONE user1 (chagner-)\n    },\n    DELETE: 'user.del', //DONE user1 (deleter-) user2 (user)\n    CLEAR: 'user.clear', //DONE user (deleter)  user2 (user)\n  },\n};\n","const roles = [0, 1, 3, 5];\n// 0: \"Installer\",\n// 1: 'Install lead',\n// 3: 'Sales',\n// 5: 'Admin',\n// 11: 'Super Admin',\n\nconst badgeColors = {\n  0: 'primary',\n  1: 'success',\n  3: 'warning',\n  5: 'danger',\n  11: 'danger',\n};\n\nconst roleTranslate = (rolenr, t) => {\n  return roles.includes(rolenr) ? t('user.role.' + rolenr) : t('user.role.-');\n};\n\nconst getBadgeColor = (rolenr) => {\n  return rolenr in badgeColors ? badgeColors[rolenr] : 'secondary';\n};\n\nexport { roles, roleTranslate, getBadgeColor };\n","export default (data) => {\n  const date = new Date(data);\n  return `${date.getDate().toString().padStart(2, '0')}.${(date.getMonth() + 1)\n    .toString()\n    .padStart(2, '0')}.${date.getFullYear()}`;\n};\n\nexport const formatDateTime = () => {\n  console.log('Not implemented!');\n  return 'Not implemented';\n};\n","import React, { Component, useState } from \"react\";\n\nimport Card from 'react-bootstrap/Card';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport Table from 'react-bootstrap/Table';\nimport Form from 'react-bootstrap/Form';\nimport Button from 'react-bootstrap/Button';\nimport InputGroup from 'react-bootstrap/InputGroup';\nimport FormControl from 'react-bootstrap/FormControl';\n\nimport {translate} from 'react-i18next';\nimport queryRequest from \"../../../utils/queryRequest\";\n\nconst update = async (team, placement, count, refresh) => {\n    const number = count ? parseInt(count) : 0;\n    if (number === 0) return remove(team, placement, refresh);\n    const query = `mutation{installOrderCreate(placement:\"${placement}\", team:\"${team}\", count:${number}){count}}`;\n\n    try {\n        const {installOrderCreate} = await queryRequest(query);\n        if (installOrderCreate) refresh();\n    } catch (err) {\n        console.log(\"Ohnoo, \", err.toString());\n    }\n}\n\nconst remove = async (team, placement, refresh) => {\n\n    const query = `mutation{installOrderRemove(placement:\"${placement}\", team:\"${team}\")}`;\n    console.log(query);\n    try {\n        const {installOrderRemove} = await queryRequest(query);\n        if (installOrderRemove) {\n            refresh();\n        } else {\n            console.log('Cant Remove')\n        }\n    } catch (err) {\n        console.log(\"Ohnoo, \", err.toString());\n    }\n}\n\nconst isNumber = (num) => {\n    return num === \"\" || /^\\d+$/.test(num);\n}\n\nconst Column = translate()(({t, assigned, team, placement, refresh}) => {\n    const [value, setValue] = useState(String(assigned));\n\n    return (\n        <td>\n            <Form onSubmit={(e) => {\n                e.preventDefault();\n                if (value === '') setValue('0');\n                update(team, placement, value, refresh)\n            }} >\n                <InputGroup>\n                    <FormControl\n                        value={value}\n                        onChange={(e) => isNumber(e.target.value) ? setValue(e.target.value):undefined}\n                        style={{maxWidth: \"55px\"}}\n                        type='text'\n                    />\n                    {value !== String(assigned) && <InputGroup.Append>\n                        <Button variant='primary' type='submit' ><i className='fa fa-paper-plane'/></Button>\n                    </InputGroup.Append>}\n                </InputGroup>\n            </Form>\n        </td>\n    )\n})\n\nclass Team extends Component {\n    state = {\n        campaign: {},\n        teams: {},\n        loaded: false,\n    };\n\n    controller = new AbortController();\n\n    componentWillUnmount() {\n        this.controller.abort();\n    }\n\n    componentDidMount() {\n        console.log(\"Assigns\");\n        this.loadFullData();\n    }\n\n    loadFullData = async () => {\n        const query = `query{teams{_id company} campaign(_id:\"${this.props.match.params.id}\"){name placements {_id count place{name}installOrders{team{_id}count}}}}`;\n        try {\n            const {campaign, teams} = await queryRequest(query, this.controller.signal);\n            const teamsObj = {}\n            for (const team of teams) teamsObj[team._id] = team;\n\n            for (const placement of campaign.placements) {\n                placement.teamsInstallOrder = {};\n                for (const order of placement.installOrders) placement.teamsInstallOrder[order.team._id] = order;\n            }\n\n            console.log(campaign)\n            this.setState({campaign, teams: teamsObj, loaded: true});\n        } catch (err) {\n            console.log(\"Ohnoo, \", err.toString());\n            this.setState({loaded: true});\n        }\n    }\n\n    refresh = async () => {\n        console.log('REFRESHING')\n        const query = `query{campaign(_id:\"${this.props.match.params.id}\"){name placements {_id count place{name}installOrders{team{_id}count}}}}`;\n\n        try {\n            const {campaign} = await queryRequest(query, this.controller.signal);\n            for (const placement of campaign.placements) {\n                placement.teamsInstallOrder = {};\n                for (const order of placement.installOrders) placement.teamsInstallOrder[order.team._id] = order;\n            }\n            this.setState({campaign});\n        } catch (err) {\n            console.log(\"Ohnoo, \", err.toString());\n            this.setState({loaded: true});\n        }\n    }\n\n    render() {\n        if (!this.state.loaded) return null;\n        const { t } = this.props;\n        return (\n            <div className=\"container-fluid\">\n                <Row>\n                    <Col>\n                        <Card>\n                            <Card.Header>{t('db.assign.table.title')} {this.state.campaign.name}</Card.Header>\n                            <Card.Body>\n                                <Table responsive striped bordered hover size='sm'>\n                                    <thead>\n                                    <tr>\n                                        <th>{t('db.assign.table.placements')}</th>\n                                        {Object.keys(this.state.teams).map(t_id => <th key={t_id}>{this.state.teams[t_id].company}</th>)}\n                                        <th>{t('db.assign.table.total')}</th>\n                                    </tr>\n                                    </thead>\n                                    <tbody>\n                                        { this.state.campaign.placements.map(p => {\n                                            const now = p.installOrders.map(o => o.count).reduce((a,b) => a+b, 0);\n                                            return (<tr key={p._id}>\n                                                <td>{p.place.name} {p.count-now === 0 && <i className='text-lime fa fa-check'/>}</td>\n                                                {Object.keys(this.state.teams).map(t_id =>\n                                                        <Column key={t_id} assigned={p.teamsInstallOrder[t_id]? p.teamsInstallOrder[t_id].count:0} refresh={this.refresh}\n                                                        placement={p._id} team={t_id}/>)}\n                                                <td>{now}/{p.count}</td>\n                                            </tr>)\n                                        })}\n                                    </tbody>\n                                </Table>\n                            </Card.Body>\n                        </Card>\n                    </Col>\n                </Row>\n            </div>\n        );\n    }\n}\n\nexport default translate()(Team);\n","import React, { Component } from \"react\";\n\nimport {translate} from 'react-i18next';\nimport Col from \"react-bootstrap/Col\";\nimport Card from \"react-bootstrap/Card\";\nimport Table from \"../utils/dataTable\";\nimport Row from \"react-bootstrap/Row\";\nimport {Redirect} from \"react-router-dom\";\n\nclass Team extends Component {\n    state = {\n        redirect: '',\n        thead: ['#',\n            this.props.t('db.assignments.table.name'),\n            this.props.t('db.assignments.table.placements'),\n            this.props.t('db.assignments.table.assigned'),\n            this.props.t('db.assignments.table.start'), // \"Email\", 'Phone',\n            this.props.t('db.assignments.table.end')], // \"Email\", 'Phone',\n        columns: [\n            {\n                data: \"_id\",\n                visible: false,\n                searchable: false,\n            },\n            {\n                data: \"name\",\n                render: (data,_, more) => {\n                    return `${data}${more.priority?' <badge class=\"badge badge-danger ml-2\">Removal priority</badge>' : ''}`\n                },\n            },\n            {\n                data: \"placements\",\n                defaultContent: \"0\"\n            },\n            {\n                data: \"assigned\",\n                defaultContent: \"0\"\n            },\n            {\n                data: 'startDate',\n                render: (data) => {\n                    const date = new Date(data);\n                    return `${date.getDate().toString().padStart(2, \"0\")}.${(date.getMonth()+1).toString().padStart(2, \"0\")}.${date.getFullYear()}`\n                },\n                searchable: false,\n            },\n            {\n                data: 'endDate',\n                render: (data) => {\n                    const date = new Date(data);\n                    return `${date.getDate().toString().padStart(2, \"0\")}.${(date.getMonth()+1).toString().padStart(2, \"0\")}.${date.getFullYear()}`\n                },\n                searchable: false,\n            },\n        ],\n        ajax: '/api/datatable/assignments',\n        rowCallback: (el, data) => {\n            el.classList.add(\"click\");\n            el.onclick = () => this.setState({redirect: data._id})\n        }\n    };\n\n    componentDidMount() {\n        console.log('assignments')\n    }\n\n    render() {\n        if (this.state.redirect) return <Redirect push to={`/dashboard/assign/${this.state.redirect}`}/>;\n        const { t } = this.props;\n        return (\n            <div className=\"container-fluid\">\n                <Row>\n                    <Col xs={12}>\n                        <Card className=\"m-b-20\">\n                            <Card.Body>\n                                <h4 className=\"mt-0 header-title\">{t('db.assignments.table.title')}</h4>\n                                <Table ajax={this.state.ajax} columns={this.state.columns} thead={this.state.thead} rowCallback={this.state.rowCallback}/>\n                            </Card.Body>\n                        </Card>\n                    </Col>\n                </Row>\n            </div>\n        );\n    }\n}\n\nexport default translate()(Team);\n","import React, { Component } from 'react';\nimport Chart from \"react-apexcharts\";\nimport queryRequest from '../../../utils/queryRequest';\n\nimport Col from 'react-bootstrap/Col';\nimport Row from 'react-bootstrap/Row';\nimport Card from 'react-bootstrap/Card';\n\nimport {translate} from 'react-i18next';\n\nclass History extends Component {\n    state = {\n        options: {\n            chart: {\n                stacked: false,\n            },\n            xaxis: { type: 'bar', }\n        },\n        total: 0,\n        series: [],\n    };\n    controller = new AbortController();\n    \n    componentWillUnmount() {\n        this.controller.abort();\n    }\n\n    async componentDidMount() {\n        const query = `query{place(_id:\"${this.props.data._id}\") {placements {count created_at}}}`;\n\n        try {\n            const { place } = await queryRequest(query, this.controller.signal);\n            if (place && place.placements.length > 0) {\n                const serial = { name: '', data: []};\n\n                const data = {};\n                let total = 0;\n\n                for (const placement of place.placements) {\n                    const date = new Date(parseInt(placement.created_at)).toISOString().split('T')[0].slice(0, -2) + '01';\n                    \n                    if (data[date]) {\n                        data[date].y += placement.count;\n                    } else {\n                        const tempDate = new Date(date);\n                        data[date] = { x: `${this.props.t('month.'+tempDate.getMonth())} ${tempDate.getFullYear()}`, y: placement.count }\n                    }\n                    total += placement.count;\n                }\n                serial.data.push(...Object.values(data));\n                this.setState({series: [serial], total})\n            }\n        } catch (err) {\n        }\n    }\n\n    render() {\n        if (this.state.total <= 0) return null;\n        return (\n        <Col sm={12} md={6} xl={4}>\n            <Card className=\"m-b-20\">\n                <Card.Body>\n                    <Row className=\"pl-3 p-0 m-0\">\n                           {this.state.total} {this.props.data.name}\n                    </Row>\n                    <Chart\n                        options={this.state.options}\n                        series={this.state.series}\n                        type=\"bar\"\n                        height=\"250\"/>\n                </Card.Body>\n            </Card>\n        </Col>\n        );\n    }\n}\n\nexport default translate()(History);","import React, { Component } from 'react';\nimport PlaceHistory from '../ads/history';\nimport queryRequest from '../../../utils/queryRequest';\n\nimport Row from 'react-bootstrap/Row';\n\nclass Ads extends Component {\n    state = {\n        places: []\n    };\n    controller = new AbortController();\n    \n    componentWillUnmount() {\n        this.controller.abort();\n    }\n\n    async componentDidMount() {\n        const query = `query{places { _id name }}`;\n\n        try {\n            const { places } = await queryRequest(query, this.controller.signal);\n            if (places) {\n                this.setState({places})\n            }\n        } catch (err) {\n        }\n    }\n\n    render() {\n        return (\n            <div className=\"container-fluid\">\n                <Row>\n                    { this.state.places.map(place => { return <PlaceHistory key={place._id} data={place} />})}\n                </Row>\n            </div>\n        );\n    }\n}\n\nexport default Ads;","import React, { Component } from \"react\";\nimport queryRequest from \"../../../utils/queryRequest\";\nimport { RoleLink } from \"../routes\";\n\nimport Card from \"react-bootstrap/Card\";\nimport Row from \"react-bootstrap/Row\";\nimport Col from \"react-bootstrap/Col\";\nimport Button from \"react-bootstrap/Button\";\nimport Form from \"react-bootstrap/Form\";\n\nimport AuthContext from \"../../../context/auth-context\";\nimport Swal from \"sweetalert2\";\n\nimport { translate } from \"react-i18next\";\n\nclass ClientTool extends Component {\n  state = {\n    client: { _id: \"\", company: \"\", person: \"\", email: \"\", phone: \"\" },\n  };\n\n  controller = new AbortController();\n  static contextType = AuthContext;\n\n  componentWillReceiveProps(props) {\n    this.setState({\n      client: { _id: \"\", company: \"\", person: \"\", email: \"\", phone: \"\" },\n    });\n    if (props.selected) {\n      this.loadClientData(props.selected);\n    }\n  }\n\n  async loadClientData(id) {\n    const query = `query{ client(_id: \"${id}\"){ company person email phone }}`;\n    try {\n      const { client } = await queryRequest(query, this.controller.signal);\n      if (client) {\n        if (!client.email) client.email = \"\";\n        if (!client.phone) client.phone = \"\";\n        this.setState({ client: { ...client, _id: id } });\n      }\n    } catch (err) {\n      console.log(\"Fetch failed: \", err.toString());\n    }\n  }\n\n  handleDelete = async (evt) => {\n    const { t } = this.props;\n    const query = `mutation{clientHardDelete(_id:\"${this.state.client._id}\")}`;\n    Swal.fire({\n      title: t(\"db.client.form.delete.warning.title\"),\n      text: t(\"db.client.form.delete.warning.text\"),\n      icon: \"warning\",\n      showCancelButton: true,\n      confirmButtonColor: \"#3085d6\",\n      cancelButtonColor: \"#d33\",\n      confirmButtonText: \"Yes\",\n      cancelButtonText: \"Cancel\",\n    }).then(async (result) => {\n      if (!result.value) return;\n      try {\n        const { clientHardDelete } = await queryRequest(\n          query,\n          this.controller.signal\n        );\n        if (clientHardDelete) {\n          Swal.fire({\n            icon: \"success\",\n            title: t(\"db.client.form.delete.success.title\"),\n            showConfirmButton: false,\n            timer: 1500,\n          });\n          this.setState({\n            client: { _id: \"\", company: \"\", person: \"\", email: \"\", phone: \"\" },\n          });\n          this.props.doRefresh();\n        } else {\n          Swal.fire({\n            icon: \"error\",\n            title: t(\"db.client.form.delete.failed.title\"),\n            text: t(\"db.client.form.delete.failed.text\"),\n            showConfirmButton: false,\n            timer: 1500,\n          });\n        }\n      } catch (err) {\n        console.log(\"Error while loading\", err.toString());\n      }\n    });\n  };\n\n  async handleSubmit(evt) {\n    evt.preventDefault();\n\n    const { _id, company, email, person, phone } = this.state.client;\n    const query = _id\n      ? `mutation{clientUpdate(_id:\"${_id}\" company:\"${company}\",person:\"${person}\",email:\"${email}\",phone:\"${phone}\"){ company }}`\n      : `mutation{clientCreate(company:\"${company}\",person:\"${person}\",email:\"${email}\",phone:\"${phone}\"){ company }}`;\n    try {\n      await queryRequest(query, this.controller.abort());\n      this.setState({\n        client: { _id: \"\", company: \"\", person: \"\", email: \"\", phone: \"\" },\n      });\n      this.props.doRefresh();\n    } catch (err) {\n      console.log(err);\n    }\n  }\n\n  handleNameChange(evt) {\n    this.state.client.company = evt.target.value;\n    this.setState({ client: this.state.client });\n  }\n\n  handlePersonChange(evt) {\n    this.state.client.person = evt.target.value;\n    this.setState({ client: this.state.client });\n  }\n\n  handleEmailChange(evt) {\n    this.state.client.email = evt.target.value;\n    this.setState({ client: this.state.client });\n  }\n\n  handlePhoneChange(evt) {\n    this.state.client.phone = evt.target.value;\n    this.setState({ client: this.state.client });\n  }\n\n  render() {\n    const { t } = this.props;\n    return (\n      <Col xl={4}>\n        <Card className=\"m-b-20\">\n          <Card.Body>\n            <h4>\n              {this.state.client._id ? (\n                <React.Fragment>\n                  {t(\"db.client.form.title\")}\n                  <RoleLink\n                    to=\"client\"\n                    id={this.state.client._id}\n                    className=\"pull-right\"\n                  >\n                    <i className=\"mdi mdi-arrow-expand-all m-r-5 text-primary\" />\n                  </RoleLink>\n                </React.Fragment>\n              ) : (\n                t(\"db.client.form.title.new\")\n              )}\n            </h4>\n\n            <Form onSubmit={(evt) => this.handleSubmit(evt)}>\n              <Form.Group>\n                <Form.Label>{t(\"db.client.form.name\")}</Form.Label>\n                <Form.Control\n                  type=\"text\"\n                  value={this.state.client.company}\n                  onChange={(evt) => this.handleNameChange(evt)}\n                  required\n                />\n              </Form.Group>\n\n              <Form.Group>\n                <Form.Label>{t(\"db.client.form.person\")}</Form.Label>\n                <Form.Control\n                  type=\"text\"\n                  value={this.state.client.person}\n                  onChange={(evt) => this.handlePersonChange(evt)}\n                  required\n                />\n              </Form.Group>\n\n              <Row>\n                <Col sm={6}>\n                  <Form.Group>\n                    <Form.Label>{t(\"db.client.form.email\")}</Form.Label>\n                    <Form.Control\n                      type=\"email\"\n                      value={this.state.client.email}\n                      onChange={(evt) => this.handleEmailChange(evt)}\n                    />\n                  </Form.Group>\n                </Col>\n                <Col sm={6}>\n                  <Form.Group>\n                    <Form.Label>{t(\"db.client.form.phone\")}</Form.Label>\n                    <Form.Control\n                      type=\"text\"\n                      value={this.state.client.phone}\n                      onChange={(evt) => this.handlePhoneChange(evt)}\n                    />\n                  </Form.Group>\n                </Col>\n              </Row>\n\n              <Row>\n                <Col>\n                  <Button\n                    block\n                    variant=\"primary\"\n                    type=\"submit\"\n                    className=\"waves-effect waves-light\"\n                  >\n                    {this.state.client._id\n                      ? t(\"db.client.form.button.update\")\n                      : t(\"db.client.form.button.create\")}\n                  </Button>\n                </Col>\n                {this.state.client._id && [5, 11].includes(this.context.role) && (\n                  <Col>\n                    <Button\n                      variant=\"danger\"\n                      onClick={this.handleDelete}\n                      block\n                      className=\"waves-effect waves-light\"\n                    >\n                      {t(\"db.client.form.button.delete\")}\n                    </Button>\n                  </Col>\n                )}\n              </Row>\n            </Form>\n          </Card.Body>\n        </Card>\n      </Col>\n    );\n  }\n}\n\nexport default translate()(ClientTool);\n","import React, { Component } from \"react\";\nimport ClientTool from \"../clients/clientTool\";\nimport Table from '../utils/dataTable';\n\nimport Card from 'react-bootstrap/Card';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\n\nimport {translate} from 'react-i18next';\n\n\nconst ClientsTable = translate()(({t, rowCallback, setRefresh}) => {\n  const thead = ['ID',\n    t('db.clients.table.name'),\n    t('db.clients.table.person'),\n    t('db.clients.table.campaigns'),\n    t('db.clients.table.totalBudget'),\n    t('db.clients.table.createdAt')]; // \"Email\", 'Phone',\n  const columns = [\n    {\n      data: '_id',\n      visible: false,\n      searchable: false,\n    },\n    {\n      data: 'company',\n      render: (data) => {\n        return data.length > 22? data.slice(0,21) + '...' : data\n      }\n    },\n    {\n      data: 'person'\n    },\n    {\n      data: 'campaigns',\n      defaultContent: '0',\n      searchable: false,\n    },\n    {\n      data: 'totalBudget',\n      defaultContent: \"0\",\n      render: (data) => {\n        return `${data} `;\n      },\n      searchable: false,\n    },\n    {\n      data: 'created_at',\n      render: (data) => {\n        const date = new Date(data);\n        return `${date.getDate().toString().padStart(2, \"0\")}.${(date.getMonth()+1).toString().padStart(2, \"0\")}.${date.getFullYear()}`\n      },\n      searchable: false,\n    },\n  ];\n\n  return (\n      <Card className=\"m-b-20\">\n        <Card.Body>\n          <h4 className=\"mt-0 header-title\">{t('db.clients.table.title')}</h4>\n          <Table ajax='/api/datatable/clients' order={[[5, 'desc']]} columns={columns} thead={thead} rowCallback={rowCallback} setRefresh={setRefresh}/>\n        </Card.Body>\n      </Card>)\n});\n\nclass Clients extends Component {\n  state = {\n    selected: {},\n    handleRefresh: () =>{}\n  };\n\n  componentDidMount() {\n    console.log(\"Clients\")\n  }\n\n  controller = new AbortController();\n\n  componentWillUnmount() {\n    this.controller.abort();\n  }\n\n  handleSelection(selected) {\n    if (this.state.selected === selected) this.setState({ selected: {} });\n    else this.setState({ selected });\n  }\n\n  setRefresh = (f) => this.setState({handleRefresh: f});\n\n  render() {\n    return (\n      <div className=\"container-fluid\">\n        <Row>\n          <Col xs={12} xl={8}>\n            <ClientsTable setRefresh={this.setRefresh} rowCallback={(el, data) => el.onclick = () => this.handleSelection(data)}/>\n          </Col>\n          <ClientTool\n            doRefresh={this.state.handleRefresh}\n            selected={this.state.selected._id}/>\n        </Row>\n      </div>\n    );\n  }\n}\n\nexport default Clients;\n","import React, { Component } from \"react\";\nimport Table from '../utils/dataTable';\n\nimport Card from 'react-bootstrap/Card';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\n\nimport {translate} from 'react-i18next';\n\n\nclass Sales extends Component {\n    state = {\n      thead: ['ID',\n          this.props.t('db.sales.table.userName'),\n          this.props.t('db.sales.table.activeCampaigns'),\n          this.props.t('db.sales.table.totalCampaigns'),\n          this.props.t('db.sales.table.totalBudget')],\n      columns: [\n        {\n          data: '_id',\n          visible: false,\n          orderable: false,\n          searchable: false,\n        },\n        {\n            data: 'name'\n        },\n        {\n            data: 'running',\n            searchable: false,\n            orderable: false,\n        },\n        {\n            data: 'campaigns',\n            searchable: false,\n            orderable: false,\n        },\n        {\n            data: 'budget',\n            searchable: false,\n            orderable: false,\n        }\n      ],\n      ajax: '/api/datatable/sales',\n      // rowCallback: (el, data) => el.onclick = () => this.setState({redirect: data._id}),\n\n      redirect: '',\n    };\n\n  componentDidMount() {\n    console.log(\"Sales\");\n  }\n\n  render() {\n    // if (this.state.redirect) return <Redirect push to={`/dashboard/user/${this.state.redirect}`}/>;\n    const { t } = this.props;\n    return (\n      <div className=\"container-fluid\">\n        <Row>\n          <Col xs={12}>\n            <Card className=\"m-b-20\">\n              <Card.Body>\n                  <h4 className=\"mt-0 header-title\">{t('db.sales.table.title')}</h4>\n\n                  <Table ajax={this.state.ajax} columns={this.state.columns} thead={this.state.thead} rowCallback={this.state.rowCallback}/>\n              </Card.Body>\n            </Card>\n          </Col>\n        </Row>\n      </div>\n    );\n  }\n}\n\nexport default translate()(Sales);\n","import React, { Component } from 'react';\n// import queryRequest from \"../../../utils/queryRequest\";\n\nclass Settings extends Component {\n    componentDidMount() {\n        console.log(\"settings\")\n    }\n\n    render() { \n        return ( \n            <div className=\"container-fluid\">\n                <div className=\"row\">\n\n                </div>\n                <div className=\"row\">\n\n                </div>\n                <div className=\"row\">\n\n                </div>\n            </div>\n         );\n    }\n}\n \nexport default Settings;","import React, { Component } from 'react';\nimport queryRequest from '../../../utils/queryRequest';\nimport FleetDetails from '../campaigns/fleetDetails';\n\nimport Accordion from 'react-bootstrap/Accordion';\nimport Card from 'react-bootstrap/Card';\nimport Col from 'react-bootstrap/Col';\nimport Image from 'react-bootstrap/Image';\nimport Row from 'react-bootstrap/Row';\n\nimport { translate } from 'react-i18next';\nimport Lightbox from 'react-image-lightbox';\n\nimport AuthContext from '../../../context/auth-context';\nimport Badge from 'react-bootstrap/Badge';\nimport Swal from 'sweetalert2';\n\nimport {\n  TimeSpan,\n  SaleBy,\n  Cities,\n  Live,\n  InstallProgress,\n  Budget,\n  ActivityTable,\n} from '../campaignDetails/cards';\n\nclass CampaignDetails extends Component {\n  state = {\n    campaign: {},\n    loaded: false,\n    selected: '',\n\n    progress: {},\n    index: 0,\n    lightbox: false,\n  };\n\n  controller = new AbortController();\n  static contextType = AuthContext;\n\n  componentWillUnmount() {\n    this.controller.abort();\n  }\n\n  async componentDidMount() {\n    const query = `query{campaign(_id:\"${this.props.match.params.id}\"){\n            _id name client{_id company}creator{_id name}budget startDate endDate created_at cities{name latitude longitude}\n            pictures { path thumbnail created_at }\n            placements{_id place{name} installs{installed vehicle{_id city{name}operator{company operatorId}}created_at count}\n      count isPublic}}}`;\n\n    try {\n      const { campaign } = await queryRequest(query, this.controller.signal);\n      if (campaign) this.setState({ campaign, loaded: true });\n      else this.setState({ loaded: true });\n    } catch (err) {\n      console.log('Ohnoo, ', err.toString());\n      this.setState({ loaded: true });\n    }\n  }\n\n  getMapData() {\n    const query = `query{campaignVehicles(_id: \"${this.state.campaign._id}\"){_id haveAds longitude latitude}}`;\n\n    return {\n      height: 530,\n      query: query,\n      latitude: this.state.campaign.cities[0].latitude,\n      longitude: this.state.campaign.cities[0].longitude,\n      zoom: 7,\n      getData: (data) => data.campaignVehicles,\n      smooth: true,\n    };\n  }\n\n  handleSelection = (selection) => {\n    if (this.state.selected !== selection)\n      this.setState({ selected: selection });\n    else this.setState({ selected: '' });\n  };\n\n  totalFleets() {\n    const countList = [];\n    for (const placement of this.state.campaign.placements)\n      for (const install of placement.installs)\n        countList.push(install.vehicle._id);\n\n    return new Set(countList).size;\n  }\n\n  timeLeftPercent() {\n    return (\n      ((new Date().getTime() - this.state.campaign.startDate) /\n        (this.state.campaign.endDate - this.state.campaign.startDate)) *\n      100\n    );\n  }\n\n  openLightBox = () => {\n    const { t } = this.props;\n    if (\n      this.state.campaign &&\n      this.state.campaign.pictures &&\n      this.state.campaign.pictures.length > 0\n    )\n      this.setState({ lightbox: true });\n    else {\n      Swal.fire({\n        icon: 'info',\n        title: t('db.campaign.images.info.empty.title'),\n        text: t('db.campaign.images.info.empty.text'),\n        showConfirmButton: false,\n        timer: 3000,\n      });\n    }\n  };\n\n  render() {\n    console.log('campaignDetails.state', this.state);\n    const { t } = this.props;\n    if (this.state.loaded && Object.keys(this.state.campaign).length === 0)\n      return (\n        <div className=\"container-fluid text-center\">\n          <h3 className=\"text-white\">{t('db.campaign.404')}</h3>\n        </div>\n      );\n    const { pictures } = this.state.campaign;\n    const { index, loaded } = this.state;\n\n    return (\n      <div className=\"container-fluid\">\n        {this.state.lightbox && (\n          <Lightbox\n            mainSrc={pictures[index].path}\n            nextSrc={pictures[(index + 1) % pictures.length].path}\n            prevSrc={\n              pictures[(index + pictures.length - 1) % pictures.length].path\n            }\n            onCloseRequest={() => this.setState({ lightbox: false })}\n            onMovePrevRequest={() =>\n              this.setState({\n                index: (index + pictures.length - 1) % pictures.length,\n              })\n            }\n            onMoveNextRequest={() =>\n              this.setState({ index: (index + 1) % pictures.length })\n            }\n          />\n        )}\n        <Row className=\"border-bottom mb-4\">\n          <Col xs={12}>\n            <h3 className=\"text-white\">\n              {!loaded && 'Loading...'}\n              {loaded &&\n                this.state.campaign.client.company +\n                  ': ' +\n                  this.state.campaign.name}\n            </h3>\n          </Col>\n        </Row>\n\n        <Row>\n          <Col\n            md={this.props.client ? 12 : 6}\n            xl={this.props.client ? 4 : 3}\n            className=\"mb-4\"\n          >\n            <TimeSpan\n              data={{\n                loaded: loaded,\n                startDate: loaded && this.state.campaign.startDate,\n                endDate: loaded && this.state.campaign.endDate,\n                now: loaded && this.timeLeftPercent(),\n              }}\n            />\n          </Col>\n          <Col md={6} xl={this.props.client ? 4 : 3}>\n            <Cities\n              data={{\n                loaded: loaded,\n                cities:\n                  loaded &&\n                  this.state.campaign.cities\n                    .map((city) => city.name)\n                    .join(', '),\n                vehicles: loaded && this.totalFleets(),\n              }}\n            />\n          </Col>\n          {!this.props.client && (\n            <Col md={6} xl={this.props.client ? 4 : 3}>\n              <Budget\n                data={{\n                  loaded: loaded,\n                  budget: this.state.campaign.budget,\n                  placements:\n                    loaded &&\n                    this.state.campaign.placements\n                      .map((place) => place.count)\n                      .reduce((a, b) => a + b, 0),\n                }}\n              />\n            </Col>\n          )}\n          <Col md={6} xl={this.props.client ? 4 : 3}>\n            <SaleBy\n              data={{\n                loaded: loaded,\n                creator: loaded && this.state.campaign.creator,\n                date: loaded && this.state.campaign.created_at,\n              }}\n            />\n          </Col>\n        </Row>\n\n        <Row>\n          <Col xl={8}>\n            <Live\n              data={{\n                loaded: loaded,\n                mapData: loaded && this.getMapData(),\n                selected: this.state.selected,\n                handleSelection: this.handleSelection,\n              }}\n            />\n          </Col>\n\n          <Col xl={4}>\n            <InstallProgress\n              data={{\n                loaded: loaded,\n                placements: loaded && this.state.campaign.placements,\n              }}\n            />\n\n            {loaded && (\n              <Accordion>\n                <Card>\n                  <Accordion.Toggle as={Card.Header} eventKey=\"0\">\n                    <i className=\"ion ion-images\" /> Campaign Images{' '}\n                    <Badge\n                      className=\"hvr-grow\"\n                      variant={pictures.length ? 'success' : 'danger'}\n                    >\n                      {pictures.length}\n                    </Badge>\n                  </Accordion.Toggle>\n                  <Accordion.Collapse eventKey=\"0\">\n                    <Card.Body style={{display: 'flex', flexDirection: 'row', alignItems: 'center' }}>\n                      {pictures.map((images, index) => (\n                        <div style={{ padding: '5px'}}>\n                          <Image\n                            onClick={this.openLightBox}\n                            src={images.thumbnail}\n                            key={index}\n                            thumbnail\n                          />\n                        </div>\n                      ))}\n                    </Card.Body>\n                  </Accordion.Collapse>\n                </Card>\n              </Accordion>\n            )}\n          </Col>\n        </Row>\n\n        <Row>\n          {loaded && (\n            <Col xl={8}>\n              <ActivityTable\n                data={{\n                  placements: this.state.campaign.placements,\n                  rowCallback: (el, data) =>\n                    (el.onclick = () => this.handleSelection(data._id)),\n                }}\n              />\n            </Col>\n          )}\n\n          {this.state.selected && (\n            <Col xl={4}>\n              <FleetDetails data={this.state.selected} />\n            </Col>\n          )}\n        </Row>\n      </div>\n    );\n  }\n}\n\nexport default translate()(CampaignDetails);\n","import styled from 'styled-components';\nimport COLOR from '../../../constants/colors';\n\nexport const FullView = styled.div`\n  padding: 5px;\n`;\n\nexport const TitleContainer = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n`;\n","import React, { Component } from \"react\";\nimport queryRequest from \"../../../utils/queryRequest\";\nimport DatePicker, { registerLocale } from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport Select from \"react-select\";\nimport { RoleLink } from \"../routes\";\nimport Swal from \"sweetalert2\";\nimport et from \"date-fns/locale/et\";\n\nimport Card from \"react-bootstrap/Card\";\nimport Row from \"react-bootstrap/Row\";\nimport Col from \"react-bootstrap/Col\";\nimport Button from \"react-bootstrap/Button\";\nimport Form from \"react-bootstrap/Form\";\nimport InputGroup from \"react-bootstrap/InputGroup\";\nimport FormControl from \"react-bootstrap/FormControl\";\nimport { FullView, TitleContainer } from './CampaignTool.styles';\nimport AuthContext from \"../../../context/auth-context\";\n\nimport { translate } from \"react-i18next\";\n\nregisterLocale(\"et\", et);\n\nconst Place = (props) => {\n  return (\n    <Col sm={6} md={6} lg={4} xl={6}>\n      <label className=\"mb-0\">{props.label}</label>\n      <InputGroup className=\"mb-3 place-field\">\n        <InputGroup.Prepend>\n          <Button\n            variant=\"primary\"\n            onClick={(e) => props.doButtonPress(e, -10)}\n          >\n            -\n          </Button>\n        </InputGroup.Prepend>\n        <FormControl\n          type=\"text\"\n          value={props.value}\n          onChange={props.doChange}\n        />\n        <InputGroup.Append>\n          <Button variant=\"primary\" onClick={(e) => props.doButtonPress(e, 10)}>\n            +\n          </Button>\n        </InputGroup.Append>\n      </InputGroup>\n    </Col>\n  );\n};\n\nclass CampaignTool extends Component {\n  state = {\n    campaign: {\n      _id: \"\",\n      name: \"\",\n      client: \"\",\n      budget: \"\",\n      priority: false,\n      cities_selected: [],\n      places: {},\n      start_date: new Date(),\n      end_date: new Date(),\n      contactEmail: \"\",\n    },\n    places: [],\n    clients: [],\n    cities: [],\n  };\n\n  static contextType = AuthContext;\n\n  empty = { ...this.state.campaign };\n  controller = new AbortController();\n\n  componentDidMount() {\n    this.initialLoad();\n  }\n\n  componentWillUnmount() {\n    this.controller.abort();\n  }\n\n  componentWillReceiveProps(props) {\n    this.setState({ campaign: { ...this.empty, places: {} } });\n\n    if (props.selected) {\n      this.loadCampaignData(props.selected);\n    }\n  }\n  loadCampaignData = async (id) => {\n    console.log(id);\n    const query = `query{campaign(_id:\"${id}\"){name client{_id email}creator{_id}budget cities{_id}placements{place{_id}count}endDate startDate priority}}`;\n\n    try {\n      const { campaign } = await queryRequest(query, this.controller.signal);\n\n      if (!campaign.cities) {\n        console.log(\"No cities defined\");\n        return;\n      }\n      if (!campaign.client) {\n        console.log(\"No client defined\");\n        return;\n      }\n      const email = campaign.client.email;\n      campaign.cities_selected = campaign.cities.map((city) => {\n        return this.state.cities.find(\n          (citySelection) => citySelection.value === city._id\n        );\n      });\n      campaign.client = this.state.clients.find(\n        (client) => client.value === campaign.client._id\n      );\n      delete campaign.cities;\n      campaign.places = {};\n      campaign.placements.forEach((placement) => {\n        campaign.places[placement.place._id] = placement.count;\n      });\n      delete campaign.placements;\n\n      campaign.end_date = new Date(parseInt(campaign.endDate));\n      campaign.start_date = new Date(parseInt(campaign.startDate));\n\n      delete campaign.endDate;\n      delete campaign.startDate;\n      delete campaign.placements;\n\n      this.setState({\n        campaign: { ...campaign, _id: id, contactEmail: email },\n      });\n    } catch (err) {\n      console.log(\"Error finding user\", err.toString());\n    }\n  };\n\n  initialLoad = async () => {\n    const query = `query{cities{ _id name } places{ _id name } clients{ _id company }}`;\n\n    try {\n      const { cities, clients, places } = await queryRequest(\n        query,\n        this.controller.signal\n      );\n\n      this.setState({\n        places,\n        clients: clients.map((client) => {\n          return { value: client._id, label: client.company };\n        }),\n        cities: cities.map((city) => {\n          return { value: city._id, label: city.name };\n        }),\n      });\n    } catch (err) {\n      console.log(\"Error while loading\", err.toString());\n    }\n  };\n  handleDelete = async () => {\n    const { t } = this.props;\n\n    const query = `mutation{campaignHardDelete(_id:\"${this.state.campaign._id}\")}`;\n    Swal.fire({\n      title: t(\"db.campaign.form.delete.warning.title\"),\n      text: t(\"db.campaign.form.delete.warning.text\"),\n      icon: \"warning\",\n      showCancelButton: true,\n      confirmButtonColor: \"#3085d6\",\n      cancelButtonColor: \"#d33\",\n      confirmButtonText: \"Yes\",\n    }).then(async (result) => {\n      if (!result.value) return;\n      try {\n        const { campaignHardDelete } = await queryRequest(\n          query,\n          this.controller.signal\n        );\n        if (campaignHardDelete) {\n          Swal.fire({\n            icon: \"success\",\n            title: t(\"db.campaign.form.delete.success.title\"),\n            showConfirmButton: false,\n            timer: 1500,\n          });\n          this.setState({\n            campaign: {\n              _id: \"\",\n              name: \"\",\n              client: \"\",\n              budget: \"\",\n              cities_selected: [],\n              places: {},\n              start_date: new Date(),\n              end_date: new Date(),\n              contactEmail: \"\",\n            },\n          });\n          this.props.doRefresh();\n        } else {\n          Swal.fire({\n            icon: \"error\",\n            title: t(\"db.campaign.form.delete.failed.title\"),\n            text: t(\"db.campaign.form.delete.failed.text\"),\n            showConfirmButton: false,\n            timer: 1500,\n          });\n        }\n      } catch (err) {\n        console.log(\"Error while loading\", err.toString());\n      }\n    });\n  };\n\n  handleShare = async (e) => {\n    e.preventDefault();\n    const { t } = this.props;\n    const def = this.state.campaign.contactEmail || \"\";\n    Swal.fire({\n      title: t(\"db.campaign.form.share.title\"),\n      input: \"text\",\n      inputValue: def,\n      inputAttributes: {\n        autocapitalize: \"off\",\n      },\n      showCancelButton: true,\n      confirmButtonText: \"Share\",\n      showLoaderOnConfirm: true,\n      preConfirm: (email) => {\n        return (async () => {\n          const query = `mutation{campaignShare(_id:\"${this.state.campaign._id}\", email:\"${email}\")}`;\n\n          try {\n            const { campaignShare } = await queryRequest(\n              query,\n              this.controller.signal\n            );\n            if (campaignShare) return campaignShare;\n            Swal.showValidationMessage(`Invalid input`);\n          } catch (err) {\n            console.log(\"Error\", err);\n            Swal.showValidationMessage(`Invalid request`);\n          }\n        })();\n      },\n      allowOutsideClick: () => !Swal.isLoading(),\n    }).then((result) => {\n      if (result.value) {\n        Swal.fire({\n          icon: \"success\",\n          title: t(\"db.campaign.form.share.title\"),\n          showConfirmButton: false,\n          timer: 1500,\n        });\n      }\n    });\n  };\n\n  handleSubmit = async (evt) => {\n    evt.preventDefault();\n    const {\n      _id,\n      name,\n      client,\n      budget,\n      start_date,\n      end_date,\n      cities_selected,\n      places,\n      priority,\n    } = this.state.campaign;\n    const { t } = this.props;\n\n    if (!cities_selected || cities_selected.length <= 0) {\n      Swal.fire({\n        icon: \"error\",\n        title: t(\"db.campaign.form.submit.invalid.city.title\"),\n        text: t(\"db.campaign.form.submit.invalid.city.text\"),\n        showConfirmButton: false,\n        timer: 1500,\n      });\n      return;\n    }\n\n    let havePlace = false;\n    let placesSave = [];\n    Object.keys(places).forEach((key) => {\n      const value = this.state.campaign.places[key];\n      if (!value || parseInt(value) === 0) return;\n      havePlace = true;\n      placesSave.push(`{ place: \"${key}\", count: ${parseInt(value)}}`);\n    });\n    if (!havePlace) {\n      Swal.fire({\n        icon: \"error\",\n        title: t(\"db.campaign.form.submit.invalid.places.title\"),\n        text: t(\"db.campaign.form.submit.invalid.places.text\"),\n        showConfirmButton: false,\n        timer: 1500,\n      });\n      return;\n    }\n    placesSave = `[${placesSave.join(\",\")}]`;\n\n    const query = _id\n      ? `mutation{campaignUpdate(_id:\"${_id}\",name:\"${name}\",client:\"${\n          client.value\n        }\",budget:${budget},priority: ${\n          priority ? \"true\" : \"false\"\n        },cities:${JSON.stringify(\n          cities_selected.map((city) => city.value)\n        )},startDate:\"${start_date.getTime()}\",endDate:\"${end_date.getTime()}\",places:${placesSave}) { _id }}`\n      : `mutation{campaignCreate(name:\"${name}\",client:\"${\n          client.value\n        }\",budget:${budget},priority:${\n          priority ? \"true\" : \"false\"\n        },cities:${JSON.stringify(\n          cities_selected.map((city) => city.value)\n        )},startDate:\"${start_date.getTime()}\",endDate:\"${end_date.getTime()}\",places:${placesSave}) { _id }}`;\n\n    try {\n      let data;\n      if (_id) {\n        const { campaignUpdate } = await queryRequest(\n          query,\n          this.controller.signal\n        );\n        data = campaignUpdate;\n      } else {\n        const { campaignCreate } = await queryRequest(\n          query,\n          this.controller.signal\n        );\n        data = campaignCreate;\n      }\n\n      if (!data) {\n        Swal.fire({\n          icon: \"error\",\n          title: this.state.campaign._id\n            ? t(\"db.campaign.form.submit.invalid.update\")\n            : t(\"db.campaign.form.submit.invalid.create\"),\n          showConfirmButton: false,\n          timer: 1500,\n        });\n        return;\n      }\n      Swal.fire({\n        icon: \"success\",\n        title: this.state.campaign._id\n          ? t(\"db.campaign.form.submit.success.update\")\n          : t(\"db.campaign.form.submit.success.create\"),\n        showConfirmButton: false,\n        timer: 1500,\n      });\n      this.setState({\n        campaign: {\n          _id: \"\",\n          name: \"\",\n          client: \"\",\n          budget: \"\",\n          cities_selected: [],\n          places: {},\n          start_date: new Date(),\n          end_date: new Date(),\n          contactEmail: \"\",\n        },\n      });\n      this.props.doRefresh();\n    } catch (err) {\n      console.log(\"Fetch failed: \", err.toString());\n    }\n  };\n\n  handleCityChange = (selected) => {\n    this.state.campaign.cities_selected = selected;\n    this.setState({ campaign: this.state.campaign });\n  };\n\n  handleClientChange = (selected) => {\n    this.state.campaign.client = selected;\n    this.setState({ campaign: this.state.campaign });\n  };\n\n  handleStart = (date) => {\n    this.state.campaign.start_date = date;\n    this.setState({ campaign: this.state.campaign });\n  };\n\n  handleEnd = (date) => {\n    this.state.campaign.end_date = date;\n    this.setState({ campaign: this.state.campaign });\n  };\n\n  handleBudgetChange = (evt) => {\n    this.state.campaign.budget = evt.target.value;\n    this.setState({ campaign: this.state.campaign });\n  };\n\n  handleNameChange = (evt) => {\n    this.state.campaign.name = evt.target.value;\n    this.setState({ campaign: this.state.campaign });\n  };\n  handlePriorityChange = (e) => {\n    this.state.campaign.priority = e.target.checked;\n    this.setState({ campaign: this.state.campaign });\n  };\n\n  handlePlaceButtonPress = (e, place, count) => {\n    e.preventDefault();\n    const now = this.state.campaign.places[place]\n      ? parseInt(this.state.campaign.places[place])\n      : 0;\n    const sum = now + count;\n    this.state.campaign.places[place] = sum > 0 ? sum : 0;\n    this.setState({ campaign: this.state.campaign });\n  };\n  handlePlaceCountChange = (e, place) => {\n    if (e.target.value === \"\" || /^\\d+$/.test(e.target.value)) {\n      this.state.campaign.places[place] = e.target.value;\n      this.setState({ campaign: this.state.campaign });\n    }\n  };\n  handlePlaceGetCount = (id) => {\n    if (!(id in this.state.campaign.places)) return \"\";\n    return this.state.campaign.places[id];\n  };\n\n  render() {\n    const { t } = this.props;\n    return (\n      <Col xl={4}>\n        <Card className=\"m-b-20\">\n          <Card.Body>\n            <h4>\n              {this.state.campaign._id ? (\n                <TitleContainer>\n                  {t('db.campaign.form.title')}\n                  <FullView >\n                    <RoleLink\n                      to=\"campaign\"\n                      id={this.state.campaign._id}\n                      className=\"btn btn-block btn-primary waves-effect waves-light\"\n                    >\n                      {t('db.campaign.form.button.fullView')}\n                    </RoleLink>\n                  </FullView>\n                </TitleContainer>\n              ) : (\n                t('db.campaign.form.title.new')\n              )}\n            </h4>\n\n            <Form onSubmit={this.handleSubmit}>\n              <Form.Group className=\"form-group\">\n                <Form.Label className=\"mb-0\">\n                  {t('db.campaign.form.name')}\n                </Form.Label>\n                <Form.Control\n                  type=\"text\"\n                  value={this.state.campaign.name}\n                  onChange={this.handleNameChange}\n                  required\n                />\n              </Form.Group>\n\n              <Form.Group>\n                <Form.Label className=\"mb-0\">\n                  {t('db.campaign.form.client')}\n                </Form.Label>\n                <Select\n                  value={this.state.campaign.client}\n                  onChange={this.handleClientChange}\n                  options={this.state.clients}\n                  required\n                />\n              </Form.Group>\n\n              <Row>\n                <Col>\n                  <div>\n                    <label className=\"mb-0\">\n                      {t('db.campaign.form.startDate')}\n                    </label>\n                  </div>\n                  <DatePicker\n                    className=\"form-control\"\n                    selected={this.state.campaign.start_date}\n                    onSelect={this.handleStart}\n                    dateFormat=\"dd/MM/yyyy\"\n                    required\n                  />\n                </Col>\n                <Col className=\"text-right\">\n                  <div>\n                    <label className=\"mb-0\">\n                      {t('db.campaign.form.endDate')}\n                    </label>\n                  </div>\n                  <DatePicker\n                    className=\"form-control\"\n                    dateFormat=\"dd/MM/yyyy\"\n                    selected={this.state.campaign.end_date}\n                    onSelect={this.handleEnd}\n                    required\n                  />\n                </Col>\n              </Row>\n\n              <Form.Group>\n                <Form.Label className=\"mb-0\">\n                  {t('db.campaign.form.cities')}\n                </Form.Label>\n                <Select\n                  value={this.state.campaign.cities_selected}\n                  onChange={this.handleCityChange}\n                  options={this.state.cities}\n                  isMulti={true}\n                  required\n                />\n              </Form.Group>\n\n              {/* {this.state.campaign._id && <Map data={this.getMapData()} />} */}\n\n              <Row>\n                {this.state.places &&\n                  this.state.places.map((place) => {\n                    return (\n                      <Place\n                        key={place._id}\n                        value={this.handlePlaceGetCount(place._id)}\n                        label={place.name}\n                        doButtonPress={(e, count) =>\n                          this.handlePlaceButtonPress(e, place._id, count)\n                        }\n                        doChange={(e) =>\n                          this.handlePlaceCountChange(e, place._id)\n                        }\n                      />\n                    );\n                  })}\n              </Row>\n\n              <Row>\n                <Col sm={6}>\n                  <label className=\"mb-0\">{t('db.campaign.form.budget')}</label>\n                  <Form.Group className=\"input-group mb-3\">\n                    <FormControl\n                      type=\"text\"\n                      value={this.state.campaign.budget}\n                      onChange={(evt) => this.handleBudgetChange(evt)}\n                      required\n                    />\n\n                    <InputGroup.Append>\n                      <span className=\"input-group-text\"></span>\n                    </InputGroup.Append>\n                  </Form.Group>\n                </Col>\n                <Col>\n                  <label className=\"mb-0\">\n                    {t('db.campaign.form.priority')}\n                  </label>\n                  <Form.Group className=\"input-group mb-3\">\n                    <input\n                      type=\"checkbox\"\n                      id=\"priority\"\n                      switch=\"danger\"\n                      checked={this.state.campaign.priority}\n                      onChange={this.handlePriorityChange}\n                    />\n                    <label\n                      htmlFor=\"priority\"\n                      data-on-label={t('db.campaign.form.priority.on')}\n                      data-off-label={t('db.campaign.form.priority.off')}\n                      className=\"mt-1\"\n                    />\n                  </Form.Group>\n                </Col>\n              </Row>\n\n              {this.state.campaign._id ? (\n                <Row>\n                  <Col sm={12} className=\"text-right\">\n                    <button\n                      className=\"btn btn-block btn-warning waves-effect waves-light\"\n                      onClick={this.handleShare}\n                    >\n                      {t('db.campaign.form.button.share')}\n                    </button>\n                  </Col>\n                </Row>\n              ) : null}\n\n              <Row className=\"mt-2\">\n                <Col>\n                  <button\n                    type=\"submit\"\n                    className=\"btn btn-success btn-block waves-effect waves-light\"\n                  >\n                    {this.state.campaign._id\n                      ? t('db.campaign.form.button.update')\n                      : t('db.campaign.form.button.create')}\n                  </button>\n                </Col>\n                {this.state.campaign._id &&\n                  [5, 11].includes(this.context.role) && (\n                    <Col>\n                      <Button\n                        variant=\"danger\"\n                        onClick={this.handleDelete}\n                        block\n                        className=\"waves-effect waves-light\"\n                      >\n                        {t('db.campaign.form.button.delete')}\n                      </Button>\n                    </Col>\n                  )}\n              </Row>\n            </Form>\n          </Card.Body>\n        </Card>\n      </Col>\n    );\n  }\n}\n\nexport default translate()(CampaignTool);\n","import React, { Component } from \"react\";\nimport CampaignTool from \"../campaigns/campaignTool\";\nimport Table from \"../utils/dataTable\";\n\nimport Card from 'react-bootstrap/Card';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\n\nimport {translate} from 'react-i18next';\nimport formatDate from \"../../../utils/formatDate\";\n\nconst CampaignsTable = translate()(({t, rowCallback, setRefresh}) => {\n  const thead = ['ID',\n     t('db.campaigns.table.name'),\n     t('db.campaigns.table.company'),\n     t('db.campaigns.table.budget'),\n     t('db.campaigns.table.startDate'),\n     t('db.campaigns.table.endDate'),\n     t('db.campaigns.table.createdAt')];\n  const columns = [\n        {\n          data: '_id',\n          visible: false,\n          searchable: false,\n        },\n        {\n          data: 'name'\n        },\n        {\n          data: 'company'\n        },\n        {\n          data: 'budget'\n        },\n        {\n          data: 'startDate',\n          render: formatDate,\n          searchable: false,\n        },\n        {\n          data: 'endDate',\n          render: formatDate,\n          searchable: false,\n        },\n        {\n          data: 'created_at',\n          render: formatDate,\n          searchable: false,\n        },\n      ];\n\n  return (\n      <Card className=\"m-b-20\">\n        <Card.Body>\n          <h4 className=\"mt-0 header-title\">{t('db.campaigns.table.title')}</h4>\n\n          <Table ajax='/api/datatable/campaigns' order={[[6, 'desc']]} columns={columns} thead={thead} rowCallback={rowCallback} setRefresh={setRefresh}/>\n        </Card.Body>\n      </Card>)\n});\n\n\nclass Campaigns extends Component {\n  state = {\n    selected: {},\n    handleRefresh: () => {},\n  };\n\n  componentDidMount() {\n    console.log('Campaigns')\n  }\n\n  handleSelection(selected) {\n    if (this.state.selected === selected) this.setState({ selected: {} });\n    else this.setState({ selected });\n  }\n\n  setRefresh = (f) => this.setState({handleRefresh: f});\n\n  render() {\n\n    return (\n      <div className=\"container-fluid\">\n        <Row>\n          <Col xl={8}>\n            <CampaignsTable setRefresh={this.setRefresh} rowCallback={(el, data) => el.onclick = () => this.handleSelection(data)}/>\n          </Col>\n          <CampaignTool\n            doRefresh={this.state.handleRefresh}\n            selected={this.state.selected._id}\n          />\n        </Row>\n      </div>\n    );\n  }\n}\n\nexport default Campaigns;\n","import React, {Component} from \"react\";\nimport queryRequest from \"../../../utils/queryRequest\";\nimport Table from '../utils/dataTable';\nimport ReactDOM from \"react-dom\";\nimport {getBadgeColor, roleTranslate} from '../../../utils/roles';\nimport Swal from 'sweetalert2';\n\nimport Card from 'react-bootstrap/Card';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\n\nimport { translate } from 'react-i18next';\n\n\nclass MailingCheckbox extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {checked: props.checked}\n    }\n\n    handleClick = async (e) => {\n        const value = e.target.checked;\n        if (await this.props.doChange(value)) this.setState({checked: value})\n    };\n\n    render() {\n        return (\n            <React.Fragment>\n                <input type=\"checkbox\" id={this.props.id} switch=\"none\" checked={this.state.checked ? \"checked\" : \"\"}\n                       onChange={this.handleClick}/>\n                <label htmlFor={this.props.id} data-on-label=\"Yes\" data-off-label=\"No\" style={{margin: 'auto'}}/>\n            </React.Fragment>\n        )\n    }\n}\n\nclass Mails extends Component {\n    state = {\n            thead: ['ID', 'Role', 'User', 'Email','Camp. Created', 'Camp. Changed', 'Camp. Pre-Start', 'Camp. Start', 'Camp. Pre-End', 'Camp. End', \"Install Done\", \"Remove Done\"],\n            columns: [\n                {\n                    data: '_id',\n                    visible: false,\n                    orderable: false,\n                    searchable: false,\n                },\n                {\n                    data: 'role',\n                    render: (data) => {\n                        return `<div style=\"width: 100%; text-align: center\"><span class=\"badge badge-${getBadgeColor(data)}\">${roleTranslate(data, this.props.t)}</span></div>`;\n                    },\n                },\n                {\n                    data: 'name'\n                },\n                {\n                    data: 'email'\n                },\n                {\n                    data: 'mailCampCreated',\n                    defaultContent: \"\",\n                    searchable: false,\n                    createdCell: (td, dataCell, dataRow) => this.createCell(td, dataCell, dataRow, 'mailCampCreated')\n                },\n                {\n                    data: 'mailCampChanged',\n                    defaultContent: \"\",\n                    searchable: false,\n                    createdCell: (td, dataCell, dataRow) => this.createCell(td, dataCell, dataRow, 'mailCampChanged')\n                },\n                {\n                    data: 'mailPreStart',\n                    defaultContent: \"\",\n                    searchable: false,\n                    createdCell: (td, dataCell, dataRow) => this.createCell(td, dataCell, dataRow, 'mailPreStart')\n                },\n                {\n                    data: 'mailStart',\n                    defaultContent: \"\",\n                    searchable: false,\n                    createdCell: (td, dataCell, dataRow) => this.createCell(td, dataCell, dataRow, 'mailStart')\n                },\n                {\n                    data: 'mailPreEnd',\n                    defaultContent: \"\",\n                    searchable: false,\n                    createdCell: (td, dataCell, dataRow) => this.createCell(td, dataCell, dataRow, 'mailPreEnd')\n                },\n                {\n                    data: 'mailEnd',\n                    defaultContent: \"\",\n                    searchable: false,\n                    createdCell: (td, dataCell, dataRow) => this.createCell(td, dataCell, dataRow, 'mailEnd')\n                },\n                {\n                    data: 'mailInstallDone',\n                    defaultContent: \"\",\n                    searchable: false,\n                    createdCell: (td, dataCell, dataRow) => this.createCell(td, dataCell, dataRow, 'mailInstallDone')\n                },\n                {\n                    data: 'mailRemoveDone',\n                    defaultContent: \"\",\n                    searchable: false,\n                    createdCell: (td, dataCell, dataRow) => this.createCell(td, dataCell, dataRow, 'mailRemoveDone')\n                }\n            ],\n            ajax: '/api/datatable/mails'\n        };\n\n\n    createCell = (td, dataCell, dataRow, type) => {\n        const value = (!!dataCell);\n        ReactDOM.render(<MailingCheckbox id={`${type}${dataRow._id}`} checked={value}\n                                         doChange={(change) => this.handleCheckboxClick(type, dataRow._id, change)}/>, td)\n    };\n\n    componentDidMount() {\n        console.log(\"Mailing\");\n    }\n\n    handleCheckboxClick = async (type, id, value) => {\n        const query = `mutation{ userMailing(_id: \"${id}\", mail:\"${type}\", value:${value}) }`;\n\n        try {\n            const {userMailing} = await queryRequest(query, this.controller.signal);\n            return userMailing;\n        } catch (err) {\n            if (err.name === 'SyntaxError') {\n                // No Connection\n                Swal.fire({\n                    position: 'top-end',\n                    icon: 'error',\n                    title: 'Check internet connection',\n                    showConfirmButton: false,\n                    timer: 1800\n                });\n            } else if (err.name === 'AbortError') {\n                // Aborted\n            } else {\n                // Bad request\n                Swal.fire({\n                    position: 'top-end',\n                    icon: 'error',\n                    title: 'Bad request',\n                    showConfirmButton: false,\n                    timer: 1800\n                });\n            }\n            return false;\n        }\n    };\n\n    controller = new AbortController();\n\n    componentWillUnmount() {\n        this.controller.abort();\n    }\n\n    render() {\n        return (\n            <div className=\"container-fluid\">\n                <Row>\n                    <Col xs={12}>\n                        <Card className=\"m-b-20\">\n                            <Card.Body>\n                                <Table ajax={this.state.ajax} columns={this.state.columns} thead={this.state.thead}/>\n                            </Card.Body>\n                        </Card>\n                    </Col>\n                </Row>\n            </div>\n        );\n    }\n}\n\nexport default translate()(Mails);\n","import React, { Component } from \"react\";\nimport queryRequest from \"../../../utils/queryRequest\";\nimport Select from \"react-select\";\n// import { RoleLink } from \"../routes\";\nimport { roles, roleTranslate } from '../../../utils/roles';\n\nimport Card from 'react-bootstrap/Card';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport Button from 'react-bootstrap/Button';\nimport Form from 'react-bootstrap/Form';\n\nimport AuthContext from \"../../../context/auth-context\";\n\nimport {translate} from 'react-i18next';\nimport Swal from \"sweetalert2\";\n\nclass UserTool extends Component {\n  state = {\n    user: {\n      _id: \"\",\n      name: \"\",\n      role: null,\n      city: null,\n      email: \"\",\n      phone: \"\"\n    },\n    selection: {\n      cities: [],\n      roles: roles.map(k => {return { value: k, label: roleTranslate(k, this.props.t) }}),\n    }\n  };\n\n  static contextType = AuthContext;\n\n  empty = { ...this.state.user };\n  edit = false;\n\n  controller = new AbortController();\n\n  componentDidMount() {\n    this.loadAllCities();\n  }\n  componentWillUnmount() {\n    this.controller.abort();\n  }\n\n  loadAllCities = async () => {\n    const query = `query{cities{_id name}}`;\n    try {\n      const data = await queryRequest(query, this.controller.signal);\n      this.state.selection.cities = data.cities.map(city => {\n        return { value: city._id, label: city.name };\n      });\n      this.setState({ selection: this.state.selection });\n    } catch (err) {\n      console.log(\"City load failed: \", err.toString());\n    }\n  };\n\n  componentWillReceiveProps = props => {\n    if (props.selected) this.loadUserData(props.selected);\n    else this.setState({ user: this.empty });\n  };\n\n  loadUserData = async id => {\n    const query = `query{user(_id:\"${id}\"){name email phone city{_id name}role}}`\n\n    try {\n      const { user } = await queryRequest(query, this.controller.signal);\n      console.log(user);\n\n      if (user.city) {\n        user.city = {\n          value: user.city._id,\n          label: user.city.name\n        };\n      }\n      user.role = {\n        value: user.role,\n        label: roleTranslate(user.role, this.props.t),\n      };\n      if (!user.phone) {\n        user.phone = '';\n      }\n\n      this.setState({ user: {...user, _id: id } });\n    } catch (err) {\n      console.log(\"Error finding user\", err.toString());\n    }\n  };\n\n  handleSubmit = async evt => {\n    evt.preventDefault();\n\n    const { _id, name, email, phone, city, role } = this.state.user;\n\n    if (!city) {\n      console.log(\"City is not selected\");\n      return;\n    }\n    if (!name || !email) return;\n\n    let roleSave = \"\";\n    if (role) {\n      roleSave = role.value;\n    }\n\n    const query = _id ? `mutation{userUpdate(_id:\"${_id}\",name:\"${name}\",email:\"${email}\",phone:\"${phone}\",role:${roleSave}, city:\"${city.value}\"){_id}}`\n        :`mutation{userCreate(name:\"${name}\",email:\"${email}\",phone:\"${phone}\",role:${roleSave}, city:\"${city.value}\"){_id}}`;\n\n    try {\n      const result = await queryRequest(query);\n      if (result) {\n        this.setState({user: {\n            _id: \"\",\n            name: \"\",\n            role: null,\n            city: null,\n            email: \"\",\n            phone: \"\"\n          }});\n        this.props.doRefresh()\n      }\n    } catch (err) {\n      console.log(\"Fetch failed: \", err.toString());\n    }\n  };\n\n  handleDelete = async (evt) => {\n    const { t } = this.props;\n    const query = `mutation{userHardDelete(_id:\"${this.state.user._id}\")}`;\n    Swal.fire({\n      title: t('db.user.form.delete.warning.title'),\n      text: t('db.user.form.delete.warning.text'),\n      icon: 'warning',\n      showCancelButton: true,\n      confirmButtonColor: '#3085d6',\n      cancelButtonColor: '#d33',\n      confirmButtonText: 'Yes',\n      cancelButtonText: 'Cancel',\n    }).then(async (result) => {\n      if (!result.value) return;\n      try {\n        const { userHardDelete } = await queryRequest(query, this.controller.signal);\n        if (userHardDelete) {\n          Swal.fire({\n            icon: 'success',\n            title: t('db.user.form.delete.success.title'),\n            showConfirmButton: false,\n            timer: 1500\n          });\n          // this.setState({ user: {_id: \"\", company: \"\"} });\n          // Todo: deSelect\n          this.props.doRefresh();\n        } else {\n          Swal.fire({\n            icon: 'error',\n            title: t('db.user.form.delete.failed.title'),\n            text: t('db.user.form.delete.failed.text'),\n            showConfirmButton: false,\n            timer: 1500\n          });\n        }\n      } catch (err) {\n        console.log(\"Error while loading\", err.toString());\n      }\n    });\n  };\n\n  handleNameChange = evt => {\n    this.state.user.name = evt.target.value;\n    this.setState({ user: this.state.user });\n  };\n\n  handleEmailChange = evt => {\n    this.state.user.email = evt.target.value;\n    this.setState({ user: this.state.user });\n  };\n\n  handlePhoneChange = evt => {\n    this.state.user.phone = evt.target.value;\n    this.setState({ user: this.state.user });\n  };\n\n  handleCityChange = selected => {\n    this.state.user.city = selected;\n    this.setState({ user: this.state.user });\n  };\n  handleRoleChange = selected => {\n    this.state.user.role = selected;\n    this.setState({ user: this.state.user });\n  };\n\n  render() {\n    const { t } = this.props;\n    return (\n      <Col xl={4}>\n        <Card className=\"m-b-20\">\n          <Card.Body >\n            <h4>\n              {this.state.user._id ?\n                  <React.Fragment>\n                    {t('db.user.form.title')}\n                    {/*<RoleLink to='user' id={this.state.user._id} className=\"pull-right\">*/}\n                    {/*  <i className=\"mdi mdi-arrow-expand-all m-r-5 text-primary\"/>*/}\n                    {/*</RoleLink>*/}\n                  </React.Fragment> : t('db.user.form.title.new')}\n            </h4>\n            <Form onSubmit={this.handleSubmit}>\n              <Form.Group className=\"form-group\">\n                <Form.Label>{t('db.user.form.name')}</Form.Label>\n                <Form.Control type=\"text\"\n                              value={this.state.user.name}\n                              onChange={this.handleNameChange}\n                              required/>\n              </Form.Group>\n\n              <Row>\n                <Col sm={6}>\n                  <Form.Group>\n                    <Form.Label>{t('db.user.form.email')}</Form.Label>\n                    <Form.Control type=\"email\"\n                                  value={this.state.user.email}\n                                  onChange={this.handleEmailChange}\n                                  required/>\n                  </Form.Group>\n                </Col>\n                <Col sm={6}>\n                  <Form.Group>\n                    <Form.Label>{t('db.user.form.phone')}</Form.Label>\n                    <Form.Control type=\"text\"\n                                  value={this.state.user.phone}\n                                  onChange={this.handlePhoneChange}/>\n                  </Form.Group>\n                </Col>\n              </Row>\n\n              <Row>\n                <Col sm={6}>\n                  <Form.Group>\n                    <Form.Label className=\"mb-0\">{t('db.user.form.city')}</Form.Label>\n                    <Select\n                      value={this.state.user.city}\n                      onChange={this.handleCityChange}\n                      options={this.state.selection.cities}\n                    />\n                  </Form.Group>\n                </Col>\n                <Col sm={6}>\n                  <Form.Group>\n                    <Form.Label className=\"mb-0\">{t('db.user.form.role')}</Form.Label>\n                    <Select\n                      value={this.state.user.role}\n                      onChange={this.handleRoleChange}\n                      options={this.state.selection.roles}\n                    />\n                  </Form.Group>\n                </Col>\n              </Row>\n\n              <Row>\n                <Col>\n                  <Button variant=\"primary\" type=\"submit\" block className=\"waves-effect waves-light\">\n                    { this.state.user._id ? t('db.user.form.button.update'): t('db.user.form.button.create')}\n                  </Button>\n                </Col>\n                { this.state.user._id && [5, 11].includes(this.context.role) &&\n                <Col>\n                  <Button variant=\"danger\" onClick={this.handleDelete} block className=\"waves-effect waves-light\">\n                    {t('db.user.form.button.delete')}\n                  </Button>\n                </Col>}\n              </Row>\n            </Form>\n          </Card.Body>\n        </Card>\n      </Col>\n    );\n  }\n}\n\nexport default translate()(UserTool);\n","import React, { Component } from \"react\";\nimport Table from \"../utils/dataTable\";\nimport UserTool from \"../users/userTool\";\nimport { roleTranslate, getBadgeColor } from '../../../utils/roles';\n\nimport Card from 'react-bootstrap/Card';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\n\nimport {translate} from 'react-i18next';\n\n\nclass Users extends Component {\n  state = {\n    thead: [\n      this.props.t('db.users.table.role'),\n      this.props.t('db.users.table.name'),\n      this.props.t('db.users.table.email'),\n      this.props.t('db.users.table.phone'),\n      this.props.t('db.users.table.createdAt')],\n    columns: [\n      {\n        data: 'role',\n        render: (data) => {\n          return `<span style=\"width: 100%;\" class=\"badge badge-${getBadgeColor(data)}\">${roleTranslate(data, this.props.t)}</span>`;\n        },\n      },\n      {\n        data: 'name'\n      },\n      {\n        data: 'email',\n        render: (data) => {\n          // return data.length > 22 ? `${data.substring(0, 20)}...` : data;\n          return data;\n        },\n      },\n      {\n        data: 'phone',\n        render: (data) => {\n          return !!data? data : \"<i>Not set</i>\";\n        },\n      },\n      {\n        data: 'created_at',\n        render: (data) => {\n          const date = new Date(data);\n          return `${date.getDate().toString().padStart(2, \"0\")}.${(date.getMonth()+1).toString().padStart(2, \"0\")}.${date.getFullYear()}`\n        },\n        searchable: false,\n      },\n    ],\n    order: [[4, 'desc']],\n    ajax: '/api/datatable/users',\n    rowCallback: (el, data) => el.onclick = () => this.handleSelection(data),\n\n    selected: {},\n    handleRefresh: () => {console.log('old')},\n  };\n\n  componentDidMount() {\n    console.log(\"users\")\n  }\n\n  controller = new AbortController();\n\n  componentWillUnmount() {\n    this.controller.abort();\n  }\n\n  handleSelection(selected) {\n    if (this.state.selected === selected) this.setState({ selected: {} });\n    else this.setState({ selected });\n  }\n\n  setRefresh = (f) => this.setState({handleRefresh: f});\n\n  render() {\n    const { t } = this.props;\n    return (\n      <div className=\"container-fluid\">\n        <Row>\n          <Col xl={8}>\n            <Card className=\"m-b-20\">\n              <Card.Body>\n                <h4 className=\"mt-0 header-title\">{t('db.users.table.title')}</h4>\n\n                <Table order={this.state.order} ajax={this.state.ajax} columns={this.state.columns} thead={this.state.thead} rowCallback={this.state.rowCallback} setRefresh={this.setRefresh} />\n              </Card.Body>\n            </Card>\n          </Col>\n\n          <UserTool\n            doRefresh={this.state.handleRefresh}\n            selected={this.state.selected._id}\n          />\n        </Row>\n      </div>\n    );\n  }\n}\n\nexport default translate()(Users);\n","import React, { Component, useState } from 'react';\nimport Row from \"react-bootstrap/Row\";\nimport Col from \"react-bootstrap/Col\";\nimport Card from \"react-bootstrap/Card\";\nimport Form from \"react-bootstrap/Form\";\nimport Accordion from \"react-bootstrap/Accordion\";\nimport InputGroup from \"react-bootstrap/InputGroup\";\nimport FormControl from \"react-bootstrap/FormControl\";\nimport Button from \"react-bootstrap/Button\";\nimport { useAccordionToggle } from 'react-bootstrap/AccordionToggle';\n\nimport queryRequest from \"../../../utils/queryRequest\";\n\nimport {translate} from 'react-i18next';\n\n\nconst CityAccordion = translate()(({t, data, doChange}) => {\n    return (\n        <Card>\n            <Card.Header>\n                <Accordion.Toggle as={Row} variant=\"link\" eventKey={data._id}>\n                    <Col xs={12} sm={6}>{data.name}</Col>\n                    <Col className='align-self-end text-right text-secondary font-md' >\n                        {t('db.operators.vehicles')} {data.operatorsAll.map(op => op.vehicles.length).reduce((a,b) => a+b, 0)} | {t('db.operators.operators')} {data.operatorsAll.length}\n                    </Col>\n                </Accordion.Toggle>\n            </Card.Header>\n            <Accordion.Collapse eventKey={data._id}>\n                <React.Fragment>\n                    {data.operatorsAll.map(op => <OperatorAccordion key={op._id} data={op} doChange={doChange} />)}\n                </React.Fragment>\n            </Accordion.Collapse>\n        </Card>)\n})\n\nconst OperatorToggle = translate()(({t, eventKey, data, doChange}) => {\n    const decOnClick = useAccordionToggle(eventKey);\n\n    const [company, setCompany] = useState(data.company || '');\n    const [edit, setEdit] = useState(false);\n\n    const query = `mutation{operatorUpdate(_id:\"${data._id}\",company:\"${company}\"){_id}}`;\n\n    return (<Row>\n            <Col sm={12} md={6} className='ml-3'>\n                {edit &&\n                <InputGroup>\n                    <FormControl value={company} onChange={(e) => setCompany(e.target.value)} type='text'/>\n                    <InputGroup.Append>\n                        {company !== data.company && <Button variant='primary' onClick={() => {\n                            doChange(query, cb => setEdit(false));\n                        }}>\n                            <i className='fa fa-paper-plane'/></Button>}\n                        <Button variant='outline-danger' onClick={() => {\n                            setEdit(false);\n                            setCompany(data.company || '')\n                        }}>\n                            <i className='fa fa-close'/>\n                        </Button>\n                    </InputGroup.Append>\n\n                </InputGroup>}\n                {!edit && <React.Fragment>\n                    <a href='#' className='' onClick={(e) => {\n                        e.preventDefault();\n                        decOnClick(e);\n                    }}>{data.company || data.operatorId}</a>\n                    <a href='#' onClick={(e) => {\n                        e.preventDefault();\n                        setEdit(true)\n                    }} className='fa fa-edit font-md ml-1'/>\n                </React.Fragment>}\n            </Col>\n            <Col className='align-self-end text-right text-secondary font-md'>\n                {t('db.operators.vehicles')} {data.vehicles.length}\n            </Col>\n        </Row>)\n})\n\nconst OperatorAccordion = translate()(({t, data, doChange}) => {\n   return (<Accordion>\n       <Card className={data.listed ? 'operator-active': data.visible? 'operator-visible':'operator-disabled'}>\n           <Card.Header>\n               <OperatorToggle eventKey={data._id} data={data} doChange={doChange}/>\n           </Card.Header>\n           <Accordion.Collapse eventKey={data._id}>\n               <Card.Body className='font-md'>\n                   <Form>\n                       <Form.Group as={Row} className='mb-0'>\n                           <Form.Label column sm=\"2\">\n                               {t('db.operators.listed')}\n                           </Form.Label>\n                           <Col sm=\"10\">\n                               <input onChange={()=>{\n                                   console.log('yep');\n                                   doChange(`mutation{operatorUpdate(_id:\"${data._id}\",listed:${!data.listed}){_id}}`)\n                               }} type=\"checkbox\" id={data._id + 's'} switch='primary' checked={data.listed}/>\n                               <label htmlFor={data._id + 's'} className='mb-0' data-on-label={t('db.operators.switch.yes')} data-off-label={t('db.operators.switch.no')}/>\n                           </Col>\n                       </Form.Group>\n\n                       <Form.Group as={Row} >\n                           <Form.Label column sm=\"2\">\n                               {t('db.operators.visible')}\n                           </Form.Label>\n                           <Col sm=\"10\">\n                               <input disabled={data.listed} onChange={()=>{\n                                   console.log('nope')\n                                   doChange(`mutation{operatorUpdate(_id:\"${data._id}\",visible:${!data.visible}){_id}}`)\n                               }} type=\"checkbox\" id={data._id + 'd'} switch={data.listed?\"default\":'primary'} checked={data.visible}/>\n                               <label htmlFor={data._id + 'd'} className='mb-0' data-on-label={t('db.operators.switch.yes')} data-off-label={t('db.operators.switch.no')}/>\n                           </Col>\n                       </Form.Group>\n                   </Form>\n                   <Row>\n                       <Col>\n                           {t('db.operators.placements')} {data.vehicles.map(v => v.totalAds).reduce((a,b) => a+b, 0)}\n                       </Col>\n                   </Row>\n               </Card.Body>\n           </Accordion.Collapse>\n       </Card>\n   </Accordion>)\n});\n\nclass Operators extends Component {\n    state = {\n        cities: [],\n        loaded: false\n    }\n\n    controller = new AbortController();\n\n    componentWillUnmount() {\n        this.controller.abort();\n    }\n\n    componentDidMount() {\n        this.loadCityOperators();\n    }\n\n    loadCityOperators = async () => {\n        const query = `query{cities{_id name operatorsAll{_id operatorId company vehicles{totalAds} listed visible}}}`;\n\n        try {\n            const {cities} = await queryRequest(query, this.controller.signal, this.props.token);\n            this.setState({cities: cities || [] ,loaded: true});\n        } catch (err) {\n            console.log(\"Ohnoo, \", err.toString());\n            this.setState({loaded: true});\n        }\n    }\n    handleOperatorChange = async (query, cb) => {\n        try {\n            await queryRequest(query, this.controller.signal, this.props.token);\n            if (cb) cb();\n            //Todo: SWAL2 Success\n            this.loadCityOperators();\n        } catch (err) {\n            console.log(\"Ohnoo, \", err.toString());\n            //Todo: SWAL2 Error\n        }\n    }\n\n    render() {\n        const { t } = this.props;\n\n        return (\n            <div className=\"container-fluid\">\n                <h3 className=\"text-white border-bottom mb-4\">\n                    {t('db.operators.title')}\n                </h3>\n\n                {this.state.loaded && <Accordion>\n                    {this.state.cities.map(city => <CityAccordion key={city._id} data={city} doChange={this.handleOperatorChange}/>)}\n                </Accordion>}\n            </div>\n        );\n    }\n}\n\nexport default translate()(Operators);","import React, { Component } from \"react\";\nimport queryRequest from \"../../../utils/queryRequest\";\nimport { RoleLink } from \"../routes\";\n\nimport Card from \"react-bootstrap/Card\";\nimport Row from \"react-bootstrap/Row\";\nimport Col from \"react-bootstrap/Col\";\nimport Button from \"react-bootstrap/Button\";\nimport Form from \"react-bootstrap/Form\";\n\nimport AuthContext from \"../../../context/auth-context\";\nimport Swal from \"sweetalert2\";\n\nimport { translate } from \"react-i18next\";\n\nclass TeamsTool extends Component {\n  state = {\n    team: { _id: \"\", company: \"\" },\n  };\n\n  controller = new AbortController();\n  static contextType = AuthContext;\n  componentWillUnmount() {\n    this.controller.abort();\n  }\n\n  componentWillReceiveProps(props) {\n    console.log(\"teamsTool.props\", props);\n    this.setState({ team: { _id: \"\", company: \"\" } });\n    if (Object.keys(props.selected).length) {\n      this.setState({\n        team: { _id: props.selected._id, company: props.selected.company },\n      });\n      this.loadTeamData(props.selected._id);\n    }\n  }\n\n  async loadTeamData(id) {\n    const query = `query{ team(_id: \"${id}\") { company }}`;\n    try {\n      const { team } = await queryRequest(query, this.controller.signal);\n      if (team) this.setState({ team: { ...team, _id: id } });\n    } catch (err) {\n      console.log(\"Fetch failed: \", err.toString());\n    }\n  }\n\n  handleDelete = async (evt) => {\n    const { t } = this.props;\n    const query = `mutation{teamHardDelete(_id:\"${this.state.team._id}\")}`;\n    Swal.fire({\n      title: t(\"db.team.form.delete.warning.title\"),\n      text: t(\"db.team.form.delete.warning.text\"),\n      icon: \"warning\",\n      showCancelButton: true,\n      confirmButtonColor: \"#3085d6\",\n      cancelButtonColor: \"#d33\",\n      confirmButtonText: \"Yes\",\n      cancelButtonText: \"Cancel\",\n    }).then(async (result) => {\n      if (!result.value) return;\n      try {\n        const { teamHardDelete } = await queryRequest(\n          query,\n          this.controller.signal\n        );\n        if (teamHardDelete) {\n          Swal.fire({\n            icon: \"success\",\n            title: t(\"db.team.form.delete.success.title\"),\n            showConfirmButton: false,\n            timer: 1500,\n          });\n          this.setState({ team: { _id: \"\", company: \"\" } });\n          this.props.doRefresh();\n        } else {\n          Swal.fire({\n            icon: \"error\",\n            title: t(\"db.team.form.delete.failed.title\"),\n            text: t(\"db.team.form.delete.failed.text\"),\n            showConfirmButton: false,\n            timer: 1500,\n          });\n        }\n      } catch (err) {\n        console.log(\"Error while loading\", err.toString());\n      }\n    });\n  };\n\n  async handleSubmit(evt) {\n    evt.preventDefault();\n\n    const { _id, company } = this.state.team;\n    const query = _id\n      ? `mutation{teamUpdate(_id:\"${_id}\" company:\"${company}\"){ _id }}`\n      : `mutation{teamCreate(company:\"${company}\"){ _id company }}`;\n    try {\n      const res = await queryRequest(query, this.controller.signal);\n      // const data = res.teamCreate || res.teamUpdate;\n      this.props.doRefresh();\n      // if (res.teamCreate) this.props.doSelect(data);\n    } catch (err) {\n      console.log(err);\n    }\n  }\n\n  handleNameChange(evt) {\n    this.state.team.company = evt.target.value;\n    this.setState({ team: this.state.team });\n  }\n\n  render() {\n    const { t } = this.props;\n    return (\n      <Card className=\"m-b-20\">\n        <Card.Body>\n          <h4>\n            {this.state.team._id ? (\n              <React.Fragment>\n                {t(\"db.team.form.title\")}\n                <RoleLink\n                  to=\"team\"\n                  id={this.state.team._id}\n                  className=\"pull-right\"\n                >\n                  <i className=\"mdi mdi-arrow-expand-all m-r-5 text-primary\" />\n                </RoleLink>\n              </React.Fragment>\n            ) : (\n              t(\"db.team.form.title.new\")\n            )}\n          </h4>\n\n          <Form onSubmit={(evt) => this.handleSubmit(evt)}>\n            <Form.Group>\n              <Form.Label>{t(\"db.team.form.company\")}</Form.Label>\n              <Form.Control\n                type=\"text\"\n                placeholder={t(\"db.team.form.company\")}\n                value={this.state.team.company}\n                onChange={(evt) => this.handleNameChange(evt)}\n                required\n              />\n            </Form.Group>\n\n            <Row>\n              {this.state.team._id && (\n                <Col xs={12} className=\"mb-2\">\n                  <RoleLink\n                    to=\"team\"\n                    id={this.state.team._id}\n                    className=\"btn btn-block btn-primary waves-effect waves-light\"\n                  >\n                    {t(\"db.team.form.button.view\")}\n                  </RoleLink>\n                </Col>\n              )}\n              <Col>\n                <Button\n                  block\n                  variant=\"success\"\n                  type=\"submit\"\n                  className=\"waves-effect waves-light\"\n                >\n                  {this.state.team._id\n                    ? t(\"db.team.form.button.update\")\n                    : t(\"db.team.form.button.create\")}\n                </Button>\n              </Col>\n              {this.state.team._id && [5, 11].includes(this.context.role) && (\n                <Col>\n                  <Button\n                    variant=\"danger\"\n                    onClick={this.handleDelete}\n                    block\n                    className=\"waves-effect waves-light\"\n                  >\n                    {t(\"db.team.form.button.delete\")}\n                  </Button>\n                </Col>\n              )}\n            </Row>\n          </Form>\n        </Card.Body>\n      </Card>\n    );\n  }\n}\n\nexport default translate()(TeamsTool);\n","import React, { Component } from \"react\";\n\nimport {translate} from 'react-i18next';\nimport Row from \"react-bootstrap/Row\";\nimport Col from \"react-bootstrap/Col\";\nimport Card from \"react-bootstrap/Card\";\nimport Table from \"../utils/dataTable\";\nimport TeamsTool from \"../teams/teamsTool\";\n\n\nclass Teams extends Component {\n    state = {\n        redirect: '',\n        thead: [\n            '#',\n            this.props.t('db.teams.table.company'),\n            this.props.t('db.teams.table.members'),\n            this.props.t('db.teams.table.createdAt')], // \"Email\", 'Phone',\n        columns: [\n            {\n                data: '_id',\n                visible: false,\n                searchable: false,\n                orderable: false,\n            },\n            {\n                data: \"company\"\n            },\n            {\n                data: \"members\",\n                searchable: false,\n            },\n            {\n                data: 'created_at',\n                render: (data) => {\n                    const date = new Date(data);\n                    return `${date.getDate().toString().padStart(2, \"0\")}.${(date.getMonth()+1).toString().padStart(2, \"0\")}.${date.getFullYear()}`\n                },\n                searchable: false,\n            }\n        ],\n        ajax: '/api/datatable/teams',\n        rowCallback: (el, data) => el.onclick = () => this.handleSelection(data),\n        selected: '',\n        handleRefresh: () => {console.log('old')},\n    };\n\n    controller = new AbortController();\n\n    componentWillUnmount() {\n        this.controller.abort();\n    }\n\n    componentDidMount() {\n        console.log(\"Teams\")\n    }\n\n    handleSelection(selected) {\n        if (this.state.selected._id === selected._id) this.setState({ selected: {} });\n        else this.setState({ selected });\n    }\n\n    setRefresh = (f) => this.setState({handleRefresh: f});\n\n    render() {\n        const { t } = this.props;\n        return (\n            <div className=\"container-fluid\">\n\n                <Row>\n                    <Col xl={8}>\n                        <Card className=\"m-b-20\">\n                            <Card.Body>\n                                <h4 className=\"mt-0 header-title\">{t('db.teams.table.title')}</h4>\n\n                                <Table order={this.state.order} ajax={this.state.ajax} columns={this.state.columns} thead={this.state.thead} rowCallback={this.state.rowCallback} setRefresh={this.setRefresh} />\n                            </Card.Body>\n                        </Card>\n                    </Col>\n\n                    <Col xl={4}>\n                        <TeamsTool\n                            doRefresh={this.state.handleRefresh}\n                            doSelect={this.handleSelection}\n                            selected={this.state.selected}\n                        />\n                    </Col>\n                </Row>\n\n            </div>\n        );\n    }\n}\n\nexport default translate()(Teams);\n","import React, { Component } from \"react\";\nimport queryRequest from \"../../../utils/queryRequest\";\n\nimport Card from 'react-bootstrap/Card';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport Button from 'react-bootstrap/Button';\nimport Form from 'react-bootstrap/Form';\n\nimport { translate } from 'react-i18next';\nimport Select from \"react-select\";\n\nclass TeamsTool extends Component {\n    state = {\n        options: [],\n        selected: {}\n    };\n    controller = new AbortController();\n\n    componentDidMount() {\n        this.loadInstallers();\n    }\n    componentWillUnmount() {\n        this.controller.abort();\n    }\n\n    async loadInstallers() {\n        const query = `query{ installersValid { _id name }}`;\n        try {\n            const {installersValid} = await queryRequest(query, this.controller.signal);\n            if (installersValid) this.setState({options: installersValid.map(u =>{ return {value:u._id, label:u.name } }) })\n        } catch (err) {\n            console.log(\"Fetch failed: \", err.toString());\n        }\n    }\n\n    async handleSubmit(evt) {\n        evt.preventDefault();\n        const query = `mutation{installerCreate(team:\"${this.props.team}\", user:\"${this.state.selected.value}\"){ _id }}`;\n        try {\n            const {installerCreate} = await queryRequest(query, this.controller.signal);\n            if (installerCreate) {\n                this.setState({selected:{}});\n                this.loadInstallers();\n                this.props.doRefresh();\n            }\n        } catch (err) {\n            console.log(err);\n        }\n    }\n\n    handleInstallerChange = selected => {\n        this.setState({selected});\n    };\n\n    render() {\n        const { t } = this.props;\n        return (\n                <Card className=\"m-b-20\">\n                    <Card.Body>\n                        <h4>{t('db.installer.form.title.new')}</h4>\n                        <Form onSubmit={evt => this.handleSubmit(evt)}>\n                            <Form.Group>\n                                <Form.Label className=\"mb-0\">{t('db.installer.form.installer')}</Form.Label>\n                                <Select\n                                    value={this.state.selected}\n                                    onChange={this.handleInstallerChange}\n                                    options={this.state.options}\n                                    required/>\n                            </Form.Group>\n\n                            <Row>\n                                <Col>\n                                    <Button block variant=\"primary\" type=\"submit\" className=\"waves-effect waves-light\">\n                                        {t('db.installer.form.button.add')}\n                                    </Button>\n                                </Col>\n                            </Row>\n                        </Form>\n                    </Card.Body>\n                </Card>\n        );\n    }\n}\n\nexport default translate()(TeamsTool);\n","import React, { Component } from \"react\";\nimport queryRequest from \"../../../utils/queryRequest\";\n\nimport Card from 'react-bootstrap/Card';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport Button from 'react-bootstrap/Button';\n\nimport Swal from \"sweetalert2\";\n\nimport { translate } from 'react-i18next';\n\nclass TeamsTool extends Component {\n\n    controller = new AbortController();\n\n    componentWillUnmount() {\n        this.controller.abort();\n    }\n\n    handleDelete = async () => {\n        const { t } = this.props;\n        const query = `mutation{installerRemove(_id:\"${this.props.selected._id}\")}`;\n\n        Swal.fire({\n            title: t('db.installer.form.delete.warning.title'),\n            text: t('db.installer.form.delete.warning.text'),\n            icon: 'warning',\n            showCancelButton: true,\n            confirmButtonColor: '#3085d6',\n            cancelButtonColor: '#d33',\n            confirmButtonText: 'Yes',\n            cancelButtonText: 'Cancel',\n        }).then(async (result) => {\n            if (!result.value) return;\n            try {\n                const { installerRemove } = await queryRequest(query, this.controller.signal);\n                if (installerRemove) {\n                    Swal.fire({\n                        icon: 'success',\n                        title: t('db.installer.form.delete.success.title'),\n                        showConfirmButton: false,\n                        timer: 1500\n                    });\n                    this.props.doRefresh();\n                } else {\n                    Swal.fire({\n                        icon: 'error',\n                        title: t('db.installer.form.delete.failed.title'),\n                        text: t('db.installer.form.delete.failed.text'),\n                        showConfirmButton: false,\n                        timer: 1500\n                    });\n                }\n            } catch (err) {\n                console.log(\"Error while loading\", err.toString());\n            }\n        });\n    };\n\n    render() {\n        const { t } = this.props;\n        return (\n                <Card className=\"m-b-20\">\n                    <Card.Body>\n                        <h4>{t('db.installer.form.title')}</h4>\n                        <h6>{t('db.installers.table.name')}: {this.props.selected.name}</h6>\n                        <Row>\n                            <Col>\n                                <Button onClick={this.handleDelete} block variant=\"primary\" type=\"submit\" className=\"waves-effect waves-light\">\n                                    {t('db.installer.form.button.remove')}\n                                </Button>\n                            </Col>\n                        </Row>\n                    </Card.Body>\n                </Card>);\n    }\n}\n\nexport default translate()(TeamsTool);\n","import React, { Component } from \"react\";\n\nimport {translate} from 'react-i18next';\nimport Col from \"react-bootstrap/Col\";\nimport Card from \"react-bootstrap/Card\";\nimport Table from \"../utils/dataTable\";\nimport AddInstallerTool from \"../teams/addInstallerTool\";\nimport SelectedInstallerTool from \"../teams/selectedInstallerTool\";\nimport Row from \"react-bootstrap/Row\";\n\nclass Team extends Component {\n    state = {\n        redirect: '',\n        thead: [\n            '#',\n            this.props.t('db.installers.table.name'),\n            // this.props.t('db.installers.table.installs'),\n            this.props.t('db.installers.table.createdAt')],\n        columns: [\n            {\n                data: '_id',\n                visible: false,\n                searchable: false,\n                orderable: false,\n            },\n            {\n                data: \"name\"\n            },\n            // {\n            //     data: \"installs\",\n            //     searchable: false,\n            //     defaultContent: \"0\"\n            // },\n            {\n                data: 'created_at',\n                render: (data) => {\n                    const date = new Date(data);\n                    return `${date.getDate().toString().padStart(2, \"0\")}.${(date.getMonth()+1).toString().padStart(2, \"0\")}.${date.getFullYear()}`\n                },\n                searchable: false,\n            }\n        ],\n        ajax: '/api/datatable/team/' + this.props.match.params.id,\n        rowCallback: (el, data) => el.onclick = () => this.handleSelection(data),\n        selected: null,\n        handleRefresh: () => {console.log('old')},\n    };\n\n    handleSelection = (data) => {\n        if (this.state.selected && this.state.selected._id === data._id) return this.setState({selected: null});\n        this.setState({selected: data});\n    }\n\n    setRefresh = (f) => this.setState({handleRefresh: () => {f(); this.setState({ selected: null })}});\n\n    render() {\n        const { t } = this.props;\n        return (\n            <div className=\"container-fluid\">\n                <Row>\n                    <Col xl={8}>\n                        <Card className=\"m-b-20\">\n                            <Card.Body>\n                                <h4 className=\"mt-0 header-title\">{t('db.teams.table.title')}</h4>\n\n                                <Table order={this.state.order} ajax={this.state.ajax} columns={this.state.columns} thead={this.state.thead} rowCallback={this.state.rowCallback} setRefresh={this.setRefresh} />\n                            </Card.Body>\n                        </Card>\n                    </Col>\n                    <Col xl={4}>\n                        {this.state.selected && <SelectedInstallerTool\n                            team={this.props.match.params.id}\n                            doRefresh={this.state.handleRefresh}\n                            selected={this.state.selected}\n                        />}\n                        {!this.state.selected && <AddInstallerTool\n                            team={this.props.match.params.id}\n                            doRefresh={this.state.handleRefresh}\n                        />}\n                    </Col>\n                </Row>\n            </div>\n        );\n    }\n}\n\nexport default translate()(Team);\n","import React from 'react';\nimport { translate } from 'react-i18next';\n\nimport Spinner from 'react-bootstrap/Spinner';\nimport Card from 'react-bootstrap/Card';\nimport queryRequest from \"../../../utils/queryRequest\";\n\nfunction dateToString(date, t) {\n    const realDate = new Date(parseInt(date));\n    return `${new Date().getFullYear() !== realDate.getFullYear() ? `${new Date().getFullYear()} ` : ''}${t('month.' + realDate.getMonth()).toUpperCase()} ${realDate.getDate()}`\n}\n\nconst ListFeedItem = translate()(({item, t}) => {\n    return (\n        <li className=\"feed-item\">\n            <span className=\"date\">{dateToString(item.created_at, t)}</span>\n            <span className=\"activity-text\" dangerouslySetInnerHTML={{__html: item.message}}/>\n        </li>\n    );\n});\n\nconst scrolling = (e, load) => {\n    if (e.target.scrollHeight - e.target.clientHeight - e.target.scrollTop < 90) load();\n};\n\nexport const loadMore = async (component, query) => {\n    if (!component.loading) {\n        component.loading = true;\n        component.setState({loading: true})\n\n        try {\n            const data = await queryRequest(query, component.controller.signal);\n            if (Object.keys(data).length === 1) {\n                const activities = data[Object.keys(data)[0]];\n                if (activities && activities.length !== 0) {\n                    component.setState({feed: [ ...component.state.feed, ...activities], loading: false});\n                    component.loading = activities.length < component.limit;\n                    return;\n                }\n            }\n            component.setState({loading: false});\n            component.loading = true;\n        } catch (err) {\n            if (err.name !== 'AbortError') console.log(\"Fetch failed: \", err.toString())\n        }\n    }\n}\n\nexport const ListFeed = translate()(({t, data, className, doLoadMore}) => {\n    return (<div className={className ? className : \"col-md-6\"}>\n        <Card className=\"m-b-20\">\n            <Card.Body>\n                <h4 className=\"mt-0 m-b-15 header-title\">{t(data.title)}</h4>\n                {data.feed.length <= 0 && !data.loading && t('db.feed.empty')}\n                {data.feed.length > 0 &&\n                <div className=\"scrollable mx-280\" onScroll={(e) => scrolling(e, doLoadMore)}>\n                    <ol className=\"activity-feed mb-0\">\n                        {data.feed.map((item, index) => <ListFeedItem key={index} item={item}/>)}\n                    </ol>\n                </div>}\n\n                {data.loading && (\n                    <div className=\"text-center m-3\">\n                        <Spinner animation='border' variant='warning'/>\n                    </div>)}\n            </Card.Body>\n        </Card>\n    </div>);\n})","import React, { Component } from 'react';\nimport {ListFeed, loadMore} from \"../utils/listFeed\";\nimport activityTypes from \"../../../utils/activityTypes\";\n\nclass InstallationNotificationFeed extends Component {\n    state = {\n        feed: [],\n        loading: true\n    };\n    loading = false;\n    controller = new AbortController();\n    activities = [activityTypes.INSTALL.NEW, activityTypes.REMOVE.NEW];\n    limit = 4;\n\n    componentWillUnmount() {\n        this.controller.abort();\n    }\n    componentDidMount() {\n        this.load();\n    }\n    load = () => loadMore(this, `query{vehicleActivities(_id:\"${this.props.id}\", types:${JSON.stringify(this.activities)}, skip:${this.state.feed.length}, limit:${this.limit}){ message created_at }}`);\n    render = () => <ListFeed className='col-12' data={ {...this.state, title: 'db.feed.vehicle.activity'} } doLoadMore={this.load}/>;\n\n}\n \nexport default InstallationNotificationFeed;","import React, { Component } from \"react\";\nimport LiveMap from \"../map/liveMap\";\nimport queryRequest from \"../../../utils/queryRequest\";\nimport { vehID, vehTypeObject } from \"../../../utils/vehicleProps\";\nimport InstallationNotificationFeed from '../fleets/installationNotificationFeed';\nimport Table from '../utils/dataTable';\n\nimport Card from 'react-bootstrap/Card';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\n\nimport {translate} from 'react-i18next';\n\nclass FleetDetails extends Component {\n  state = {\n    thead: [\n        // this.props.t('db.vehicle.ptable.installer'),\n      this.props.t('db.vehicle.ptable.campaignName'),\n      this.props.t('db.vehicle.ptable.place'),\n      this.props.t('db.vehicle.ptable.amount'),\n      this.props.t('db.vehicle.ptable.createdAt')], // \"Email\", 'Phone',\n    columns: [\n      {\n        data: 'campaign'\n      },\n      {\n        data: 'place',\n      },\n      {\n        data: 'count',\n        defaultContent: \"0\",\n        searchable: false,\n      },\n      {\n        data: 'created_at',\n        render: (data) => {\n          const date = new Date(data);\n          return `${date.getDate().toString().padStart(2, \"0\")}.${(date.getMonth()+1).toString().padStart(2, \"0\")}.${date.getFullYear()}`\n        },\n        searchable: false,\n      },\n    ],\n    ajax: '/api/datatable/vehicle/',\n\n    vehicle: {},\n    campaigns: [],\n    loaded: false\n  };\n\n  controller = new AbortController();\n\n  componentWillUnmount() {\n    this.controller.abort();\n  }\n\n  async componentDidMount() {\n    console.log(\"fleetFetails\");\n\n    const { id } = this.props.match.params;\n\n    const query = `query{vehicle(_id:\"${id}\"){ _id numberPlate totalAds line city{name}type operator{company} latitude longitude } vehicleCampaigns(_id:\"${id}\"){ _id name }}`;\n\n    try {\n      const { vehicle, vehicleCampaigns } = await queryRequest(query, this.controller.signal);\n\n      this.setState({ vehicle: (vehicle? vehicle:{}), loaded: true, campaigns: vehicleCampaigns });\n    } catch (err) {\n      if (err.name === 'SyntaxError') {\n        console.log(\"No connection\")\n      } else {\n        console.log(\"Ohnoo, \", err.toString());\n        this.setState({ loaded: true });\n      }\n    }\n  }\n\n  campaignsOnTheFleet = () => {\n    return this.state.campaigns.length;\n  };\n\n  getMapData = () => {\n    const query = `query{vehicle(_id: \"${this.state.vehicle._id}\"){ _id haveAds longitude latitude line }}`;\n\n    return {\n      height: 254,\n      query,\n      latitude: this.state.vehicle.latitude,\n      longitude: this.state.vehicle.longitude,\n      getData: data => [data.vehicle,],\n      smooth: true,\n      zoom: 12\n    };\n  };\n\n\n  render() {\n    const { t } =this.props;\n    if (!this.state.loaded)\n      return (\n        <div className=\"container-fluid text-center\">\n          <h3 className=\"text-white\">{t('loading')}</h3>\n        </div>\n      );\n    if (Object.keys(this.state.vehicle).length === 0)\n      return (\n        <div className=\"container-fluid text-center\">\n          <h3 className=\"text-white\">{t('db.vehicle.404')}</h3>\n        </div>\n      );\n    const { name, img } = vehTypeObject(this.state.vehicle._id);\n    return (\n      <div className=\"container-fluid\">\n        <Row className=\"border-bottom mb-4\">\n          <Col xs={12}>\n            <h3 className=\"text-white\">{name.toUpperCase() + \" \" + vehID(this.state.vehicle._id) + ( this.state.vehicle.numberPlate ? `(${this.state.vehicle.numberPlate})`: \"\" )}</h3>\n          </Col>\n        </Row>\n\n        <Row>\n          <Col xl={8}>\n            <Row>\n              <Col xl={6}>\n                <Card className=\"m-b-20\">\n                  <Card.Body>\n                    <div className=\"profile-widget text-center\">\n\n                      <Row className=\"mb-4\">\n                        <Col className=\"text-vehicle-info\">\n                          { this.state.vehicle.operator.company }\n                        </Col>\n                      </Row>\n\n                      <Row className=\"text-vehicle-info\">\n                        <Col><img src={img} alt={name} height='60'/><br/>{this.state.vehicle.numberPlate || ''}</Col>\n                        <Col><i className=\"fa fa-map-marker\"/>{name}<br/>{vehID(this.state.vehicle._id)}<br/>{t('db.vehicle.line')} {this.state.vehicle.line}</Col>\n                      </Row>\n\n                      <ul className=\"list-inline row mt-3 mb-0\">\n                        <li className=\"col-md-6\">\n                          <p className=\"m-b-5 font-18 font-600\">{this.campaignsOnTheFleet()}</p>\n                          <p className=\"mb-0\">{t('db.vehicle.campaigns')}</p>\n                        </li>\n                        <li className=\"col-md-6\">\n                          <p className=\"m-b-5 font-18 font-600\">{this.state.vehicle.totalAds}</p>\n                          <p className=\"mb-0\">{t('db.vehicle.placements')}</p>\n                        </li>\n                      </ul>\n                    </div>\n                  </Card.Body>\n                </Card>\n              </Col>\n\n              <Col xl={6} className=\"mb-3\">\n                <LiveMap data={this.getMapData()} />\n              </Col>\n            </Row>\n\n            <Row>\n              <Col sm={12}>\n                <Card>\n                  <Card.Body>\n                    <h4 className=\"mt-0 header-title\">{t('db.vehicle.ptable.title')}</h4>\n                    <Table order={this.state.order} ajax={`${this.state.ajax}${this.props.match.params.id}`} columns={this.state.columns} thead={this.state.thead}/>\n                  </Card.Body>\n                </Card>\n              </Col>\n            </Row>\n          </Col>\n\n          <Col xl={4}>\n            <InstallationNotificationFeed id={this.state.vehicle._id} />\n          </Col>\n\n        </Row>\n      </div>\n    );\n  }\n}\n\nexport default translate()(FleetDetails);\n\n// <Table title=\"Campaigns\" className='col-xl-12' message=\"\" doRenderHead={() => this.renderTableHead()} doRenderData={() => this.renderTableData()}/>\n","import React, {Component} from \"react\";\nimport Table from '../utils/dataTable';\nimport { Redirect } from \"react-router-dom\";\n\nimport Card from 'react-bootstrap/Card';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\n\nimport {translate} from 'react-i18next';\nimport {vehID} from \"../../../utils/vehicleProps\";\n\nclass Fleet extends Component {\n    state = {\n        redirect: '',\n        thead: ['#',\n            this.props.t('db.vehicles.table.id'),\n            this.props.t('db.vehicles.table.numberPlate'),\n            this.props.t('db.vehicles.table.operator'),\n            this.props.t('db.vehicles.table.placements')], // \"Email\", 'Phone',\n        columns: [\n            {\n                data: \"nr\"\n            },\n            {\n                data: \"_id\",\n                render: (data) => {\n                    return vehID(data);\n                }\n            },\n            {\n                data: 'numberPlate',\n                defaultContent: \"<i>Not set</i>\",\n                searchable: true,\n            },\n            {\n\n                data: 'company',\n                defaultContent: \"<i>Not set</i>\",\n                searchable: true,\n            },\n            {\n                data: 'totalAds',\n                render: (data) => {\n                    return `<div style=\"width: 100%;text-align: center;\">${data > 0 ? `<span class=\"badge badge-success\">${data}</span>`:`<span class=\"badge badge-danger\">${data}</span>`}</div>`;\n                },\n                searchable: false,\n                orderable: true,\n            }\n        ],\n        ajax: '/api/datatable/fleet',\n        rowCallback: (el, data) => {\n            el.classList.add(\"click\");\n            el.onclick = () => this.setState({redirect: data._id})\n        }\n    };\n\n    componentDidMount() {\n        console.log(\"Fleet\");\n    }\n\n    render() {\n        if (this.state.redirect) return <Redirect push to={`/dashboard/vehicle/${this.state.redirect}`}/>;\n        const { t } = this.props;\n        return (\n            <div className=\"container-fluid\">\n                <Row>\n                    {/* <GeneralLiveMap /> */}\n                </Row>\n\n                <Row>\n                    <Col xs={12}>\n                        <Card className=\"m-b-20\">\n                            <Card.Body>\n                                <h4 className=\"mt-0 header-title\">{t('db.vehicles.table.title')}</h4>\n                                <Table ajax={this.state.ajax} columns={this.state.columns} thead={this.state.thead} rowCallback={this.state.rowCallback}/>\n                            </Card.Body>\n                        </Card>\n                    </Col>\n                </Row>\n            </div>\n        );\n    }\n}\n\nexport default translate()(Fleet);\n","import React, { Component } from 'react';\nimport SmallInfoCardWithIcon from '../utils/smallInfoCard';\nimport queryRequest from \"../../../utils/queryRequest\";\n\nimport { translate } from 'react-i18next';\n\nclass ActiveCampaigns extends Component {\n    state = {\n        main: 0,\n        description: `${this.props.t('db.stat.card.activeCampaigns.addition')} 0 `,\n        loaded: false,\n    };\n\n    controller = new AbortController();\n    \n    componentWillUnmount() {\n        this.controller.abort();\n    }\n\n    async componentDidMount() {\n        const query = `query{campaignsActive{ budget }}`;\n        try {\n            const {campaignsActive} = await queryRequest(query, this.controller.signal);\n            if (!campaignsActive) return;\n            const total = campaignsActive.map(camp => camp.budget).reduce((a, b) => {return a + b;}, 0);\n            this.setState({ description: `${this.props.t('db.stat.card.activeCampaigns.addition')} ${total} `, main: campaignsActive.length, loaded:true });\n        } catch (err) {\n            if (err.name !== 'AbortError') this.setState({loaded:true });\n        }\n    }\n    \n    render = () => <SmallInfoCardWithIcon item={{...this.state, title: this.props.t('db.stat.card.activeCampaigns.title')}} /> ;\n}\n \nexport default translate()(ActiveCampaigns);","import React, {Component} from \"react\";\nimport SmallInfoCard from \"../utils/smallInfoCard\";\nimport queryRequest from \"../../../utils/queryRequest\";\n\nimport { translate } from 'react-i18next';\n\nclass TotalCampaigns extends Component {\n    state = {\n        main: 0,\n        description: `${this.props.t('db.stat.card.totalCampaigns.addition')} 0 `,\n        budgets: [],\n        loaded: false,\n    };\n\n    controller = new AbortController();\n\n    componentWillUnmount() {\n        this.controller.abort();\n    }\n\n    async componentDidMount() {\n        const query = `query{campaigns{ budget }}`;\n\n        try {\n            const {campaigns} = await queryRequest(query, this.controller.signal);\n            if (!campaigns) return;\n            const total = campaigns.map(camp => camp.budget).reduce((a, b) => {\n                return a + b;\n            }, 0);\n            this.setState({description: `${this.props.t('db.stat.card.totalCampaigns.addition')} ${total} `, main: campaigns.length, loaded: true});\n        } catch (err) {\n            if (err.name !== 'AbortError') this.setState({loaded:true });\n        }\n    }\n\n    render = () => <SmallInfoCard item={{...this.state, title:this.props.t('db.stat.card.totalCampaigns.title')}}/>;\n}\n\nexport default translate()(TotalCampaigns);\n","import React, { Component } from 'react';\nimport SmallInfoCardWithIcon from '../utils/smallInfoCard';\nimport queryRequest from \"../../../utils/queryRequest\";\n\nimport { translate } from 'react-i18next';\n\nclass LatestCampaigns extends Component {\n    state = {\n        main: \"-\",\n        description: `${this.props.t('db.stat.card.latestCampaign.addition')} 0 `,\n        loaded: false\n    };\n    controller = new AbortController();\n    componentWillUnmount() {\n        this.controller.abort();\n    }\n    async componentDidMount() {\n        const query = `query{ campaign { _id name budget }}`;\n        try {\n            const {campaign} = await queryRequest(query, this.controller.signal);\n            this.setState({main: campaign.name,link:'campaign', id: campaign._id, description: `${this.props.t('db.stat.card.latestCampaign.addition')} ${campaign.budget} `, loaded: true });\n        } catch (err) {\n            if (err.name !== 'AbortError') this.setState({loaded:true });\n        }\n    }\n    render = () => <SmallInfoCardWithIcon item={{...this.state, title: this.props.t('db.stat.card.latestCampaign.title')}}/>\n}\n \nexport default translate()(LatestCampaigns);","import React, { Component } from 'react';\nimport SmallInfoCardWithIcon from '../utils/smallInfoCard';\nimport queryRequest from \"../../../utils/queryRequest\";\n\nimport { translate } from 'react-i18next';\n\nclass IncomePerMonth extends Component {\n    state = {\n        main: \"0 \",\n        description: `${this.props.t('db.stat.card.revenueThisMonth.addition')} 0`,\n        loaded: false,\n    };\n\n    controller = new AbortController();\n    \n    componentWillUnmount() {\n        this.controller.abort();\n    }\n\n    async componentDidMount() {\n        const now = new Date();\n        const query = `query{campaignsTil(date:\"${new Date(now.getFullYear(), now.getMonth()-1).getTime()}\"){ budget created_at }}`;\n        try {\n            const {campaignsTil} = await queryRequest(query, this.controller.signal);\n            const thisMonth = new Date(now.getFullYear(), now.getMonth()-1).getTime();\n            let revThis = 0, revLast = 0;\n            for (const cmp of campaignsTil) parseInt(cmp.created_at) < thisMonth ? revLast+=cmp.budget : revThis += cmp.budget;\n            this.setState({ main: `${revThis} `, description: `${this.props.t('db.stat.card.revenueThisMonth.addition')} ${revLast} `, loaded: true});\n        } catch (err) {\n            if (err.name !== 'AbortError') this.setState({loaded:true });\n        }\n      }\n\n    render = () => <SmallInfoCardWithIcon item={{...this.state, title: this.props.t('db.stat.card.revenueThisMonth.title')}} />;\n\n}\n \nexport default translate()(IncomePerMonth);","import React, { Component } from 'react';\nimport {ListFeed, loadMore} from \"../utils/listFeed\";\nimport activityTypes from \"../../../utils/activityTypes\";\n\nclass SalesNotificationFeed extends Component {\n    state = {\n        feed: [],\n        loading: true\n    };\n    loading = false;\n    controller = new AbortController();\n    activities = [activityTypes.CAMPAIGN.NEW, activityTypes.CAMPAIGN.DELETE];\n    limit = 8;\n\n    componentWillUnmount() {\n        this.controller.abort();\n    }\n\n    componentDidMount() {\n        this.load();\n    }\n    load = () => loadMore(this, `query{activities(types:${JSON.stringify(this.activities)}, skip:${this.state.feed.length}, limit:${this.limit}){ message created_at }}`)\n    render = () => <ListFeed data={{...this.state, title:'db.feed.sales.activity'}} doLoadMore={this.load} className=\"col-xl-12 col-md-6 col-sm-12\"/>\n}\n\nexport default SalesNotificationFeed;","import React, { Component } from 'react';\nimport { ListFeed, loadMore } from \"../utils/listFeed\";\nimport activityTypes from \"../../../utils/activityTypes\";\n\n\nclass CampaignNotificationFeed extends Component {\n    state = {\n        feed: [],\n        loading: true\n    };\n    loading = false;\n    controller = new AbortController();\n    limit = 8;\n    activities = [\n        activityTypes.CAMPAIGN.NOTIFICATION.END,\n        activityTypes.CAMPAIGN.NOTIFICATION.PRE_END,\n        activityTypes.CAMPAIGN.NOTIFICATION.START,\n        activityTypes.CAMPAIGN.NOTIFICATION.PRE_START\n    ];\n\n    componentWillUnmount() {\n        this.controller.abort();\n    }\n    componentDidMount() {\n        this.load();\n    }\n    load = () => loadMore(this, `query{activities(types:${JSON.stringify(this.activities)}, skip:${this.state.feed.length}, limit:${this.limit}){ message created_at }}`)\n    render = () => <ListFeed data={{...this.state, title: 'db.feed.campaigns.notification'}} doLoadMore={this.load} className=\"col-xl-12 col-md-6 col-sm-12\"/>;\n}\n \nexport default CampaignNotificationFeed;","import React, { Component } from \"react\";\nimport LiveMap from \"../map/liveMap\";\nimport queryRequest from \"../../../utils/queryRequest\";\nimport Select from \"react-select\";\n\nimport Col from 'react-bootstrap/Col';\nimport Row from 'react-bootstrap/Row';\nimport Card from 'react-bootstrap/Card';\n\nimport { translate } from 'react-i18next';\nimport AuthContext from \"../../../context/auth-context\";\n\nimport blue from '../../../images/markers/dot_marker_blue_32.png';\nimport orange from '../../../images/markers/dot_marker_orange_32.png';\nimport green from '../../../images/markers/dot_marker_green_32.png';\nimport gray from '../../../images/markers/dot_marker_gray_32.png';\n\nclass GeneralLiveMap extends Component {\n  state = {\n    cities: [],\n    operator_selected: null,\n    city_selected: null\n  };\n\n  static contextType = AuthContext;\n  controller = new AbortController();\n\n  componentWillUnmount() {\n    this.controller.abort();\n  }\n\n  async componentDidMount() {\n    const query = `query{cities{ _id name longitude latitude operators { _id operatorId company } }}`;\n\n    try {\n      let { cities } = await queryRequest(query, this.controller.signal);\n      cities = cities.filter(city => city.operators.length > 0);\n      cities = cities.map(city => {\n        return {\n          ...city,\n          label: city.name,\n          value: city._id,\n          operators: city.operators.map(operator => {\n            const label = operator.company\n              ? operator.company\n              : operator.operatorId;\n            return { ...operator, label, value: operator._id };\n          })\n        };\n      });\n      const openCityDefault = cities.map(city => city.label).indexOf('Helsinki');\n      this.setState({\n        cities,\n        city_selected: cities.length > 0 ? (openCityDefault !== -1? cities[openCityDefault]:cities[0]) : null\n      });\n    } catch (err) {\n      if (err.name !== 'AbortError') console.log(\"Fetch failed: \", err.toString());\n    }\n  }\n\n  getMapData = () => {\n    if (this.state.city_selected === null) return;\n    const { _id, longitude, latitude } = this.state.city_selected;\n\n    let getData, query;\n\n    if (!this.state.operator_selected) {\n      query = `query{cityVehicles(_id: \"${_id}\"){ _id haveAds longitude latitude listed }}`;\n      getData = data => data.cityVehicles;\n    } else {\n      query = `query{operatorVehicles(_id: \"${this.state.operator_selected.value}\"){ _id haveAds longitude latitude listed }}`;\n      getData = data => data.operatorVehicles;\n    }\n\n    return {\n      height: 624,\n      query,\n      latitude,\n      longitude,\n      getData\n    };\n  };\n\n  handleCityChange = selected => {\n    this.setState({ city_selected: null, operator_selected: null });\n    setTimeout(() => this.setState({ city_selected: selected }), 0);\n  };\n\n  handleOperatorChange = selected => {\n    const tempCity = this.state.city_selected;\n    const tempOperator = this.state.operator_selected;\n\n    this.setState({ city_selected: null, operator_selected: null });\n\n    setTimeout(() => {\n      if (tempOperator && selected.value === tempOperator.value) {\n        this.setState({city_selected: tempCity, operator_selected:null})\n      } else {\n        this.setState({ city_selected: tempCity, operator_selected: selected });\n      }\n    }, 0);\n  };\n\n  render() {\n    const { role } = this.context;\n    const { t } = this.props;\n    return (\n      <React.Fragment>\n          <Card className=\"m-b-10\">\n            <Card.Body>\n              <h4 className=\"mt-0 mb-3 header-title\">{t('db.general.map.title')}</h4>\n              <Row className=\"mb-1\">\n                <Col sm={6}>\n                  <div className='m-auto'>\n\n                  <Col className=\"mb-2\" style={{ zIndex:1004 }}>\n                    <Select\n                      value={this.state.city_selected}\n                      onChange={this.handleCityChange}\n                      options={this.state.cities}\n                      required\n                    />\n                  </Col>\n                  {this.state.city_selected &&\n                    this.state.city_selected.operators.length > 1 && (\n                      <Col style={{ zIndex:1001 }}>\n                        <Select\n                          value={this.state.operator_selected}\n                          onChange={this.handleOperatorChange}\n                          options={this.state.city_selected.operators}\n                        />\n                      </Col>\n                    )}\n                  </div>\n                </Col>\n                <Col sm={6} >\n                  <div className=\"mb-2\"><img src={blue} alt='blue'/> {t('map.marker.blue')}</div>\n                  <div className=\"mb-2\"><img src={green} alt='green'/> {t('map.marker.green')}</div>\n                  <div className=\"mb-2\"><img src={orange} alt='orange'/> {t('map.marker.orange')}</div>\n                  {[5,11].includes(role) && <div className=\"mb-2\"><img src={gray} alt='blue'/> {t('map.marker.gray')}</div> }\n                </Col>\n              </Row>\n              <div style={{minHeight:350}}>\n                {this.state.city_selected !== null && <LiveMap data={this.getMapData()}/>}\n              </div>\n            </Card.Body>\n          </Card>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default translate()(GeneralLiveMap);\n","import React, {useContext} from 'react';\n// import DoughnutGraph from \"../utils/doughnutGraph\";\nimport ActiveCampaigns from \"../general/activeCampaigns\";\nimport TotalCampaigns from \"../general/totalCampaigns\";\nimport LatestCampaigns from \"../general/latestCampaigns\";\nimport IncomePerMonth from \"../general/incomePerMonth\";\nimport SalesNotificationFeed from \"../general/salesNotificationFeed\";\nimport CampaignNotificationFeed from \"../general/campaignNotificationFeed\";\nimport GeneralLiveMap from \"../general/generalLiveMap\";\n\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\n\nimport AuthContext from \"../../../context/auth-context\";\nimport SmallInfoCard from \"../utils/smallInfoCard\";\n\nexport default () => {\n    const context = useContext(AuthContext);\n    return (\n        <div className=\"container-fluid\">\n            { context.role === 5 && <Row>\n                <Col sm={6} xl={3}>\n                    <TotalCampaigns/>\n                </Col>\n                <Col sm={6} xl={3}>\n                    <ActiveCampaigns/>\n                </Col>\n                <Col sm={6} xl={3}>\n                    <LatestCampaigns/>\n                </Col>\n                <Col sm={6} xl={3}>\n                    <IncomePerMonth/>\n                </Col>\n            </Row> }\n            <Row>\n                <Col xl={8}>\n                    <GeneralLiveMap/>\n                </Col>\n\n                <Col md={12} xl={4}>\n                    <Row>\n                        <SalesNotificationFeed/>\n                        <CampaignNotificationFeed/>\n                    </Row>\n                </Col>\n            </Row>\n        </div>\n    )\n};\n","import React  from 'react';\n\nimport GeneralLiveMap from \"../general/generalLiveMap\";\n\nexport default () => {\n    return (\n        <div className=\"container-fluid\">\n            <GeneralLiveMap/>\n        </div>\n    );\n};\n","import React, { useContext } from 'react';\nimport { NavLink } from 'react-router-dom';\nimport AuthContext from '../../context/auth-context';\n\nimport Assign from './views/assign';\nimport Assignments from './views/assignments';\nimport Ads from './views/ads';\n// import Client from \"./views/clientDetails\";\nimport Clients from './views/clients';\nimport Sales from './views/sales';\nimport Settings from './views/settings';\nimport Campaign from './views/campaignDetails';\nimport Campaigns from './views/campaigns';\n// import User from \"./views/userDetails\";\nimport Mails from './views/mails';\nimport Users from './views/users';\nimport Operators from './views/operators';\nimport Teams from './views/teams';\nimport Team from './views/team';\nimport Vehicle from './views/fleetDetails';\nimport Vehicles from './views/fleet';\nimport General from './views/genaral';\n\nconst translatePref = 'db.navbar.';\nconst pathPref = '/dashboard';\n\nconst appRoutes = {\n  general: {\n    roles: [],\n    path: '/general',\n    component: General,\n    nav: true,\n    icon: 'mdi-chart-pie',\n  },\n\n  // user: { roles: [1,3,5,11], path: \"/user/:id\", component: User },\n  users: {\n    roles: [5, 11],\n    path: '/users',\n    component: Users,\n    nav: true,\n    icon: 'ion-android-social',\n  },\n\n  // client: { roles: [5,11], path: \"/client/:id\", component: Client },\n  clients: {\n    roles: [3, 5, 11],\n    path: '/clients',\n    component: Clients,\n    nav: true,\n    icon: 'ion-briefcase',\n  },\n\n  campaigns: {\n    roles: [3, 5, 11],\n    path: '/campaigns',\n    component: Campaigns,\n    nav: true,\n    icon: 'mdi-calendar',\n  },\n  campaign: { roles: [3, 5, 11], path: '/campaign/:id', component: Campaign },\n\n  sales: {\n    roles: [5, 11],\n    path: '/sales',\n    component: Sales,\n    nav: true,\n    icon: 'mdi-briefcase-check',\n  },\n\n  operators: {\n    roles: [5, 11],\n    path: '/operators',\n    component: Operators,\n    nav: true,\n    icon: 'mdi-bus',\n  },\n\n  vehicles: {\n    roles: [5, 11],\n    path: '/fleet',\n    component: Vehicles,\n    nav: true,\n    icon: 'mdi-bus',\n  },\n  vehicle: { roles: [5, 11], path: '/vehicle/:id', component: Vehicle },\n\n  teams: {\n    roles: [1, 5, 11],\n    path: '/teams',\n    component: Teams,\n    nav: true,\n    icon: 'fa fa-cogs',\n  },\n  team: { roles: [1, 5, 11], path: '/team/:id', component: Team },\n\n  assignments: {\n    roles: [1, 5, 11],\n    path: '/assignments',\n    component: Assignments,\n    nav: true,\n    icon: 'fa fa-check',\n  },\n  assign: { roles: [1, 5, 11], path: '/assign/:id', component: Assign },\n\n  mails: {\n    roles: [5, 11],\n    path: '/mails',\n    component: Mails,\n    nav: false,\n    icon: 'mdi-email',\n  },\n  settings: {\n    roles: [],\n    path: '/settings',\n    component: Settings,\n    nav: false,\n    icon: 'mdi-settings',\n  },\n\n  placements: {\n    roles: [3, 5, 11],\n    path: '/ads',\n    component: Ads,\n    nav: true,\n    icon: 'mdi-animation',\n  },\n};\n\nconst isAllowed = (route, role) =>\n  !route.roles.length || route.roles.includes(role);\n\nexport const RoleLink = ({\n  to = '',\n  className = '',\n  react = true,\n  id = '',\n  children,\n}) => {\n  const context = useContext(AuthContext);\n  const route = { ...appRoutes[to] };\n  if (!Object.keys(route).length || !isAllowed(route, context.role))\n    return <a className={className}>{children}</a>;\n  route.path = pathPref + route.path;\n  if (route.path.includes(':id')) route.path = route.path.replace(':id', id);\n  if (react)\n    return (\n      <NavLink to={route.path} className={className}>\n        {children}\n      </NavLink>\n    );\n  return (\n    <a href={route.path} className={className}>\n      {children}\n    </a>\n  );\n};\n\nexport const getRoutes = (role) =>\n  Object.entries(appRoutes)\n    .filter(([, route]) => isAllowed(route, role))\n    .map(([key, route]) => {\n      const r = { ...route };\n      r.path = pathPref + route.path;\n      r.translation = translatePref + key;\n      return r;\n    });\n\nexport const getNavs = (role) =>\n  Object.entries(appRoutes)\n    .filter(([, route]) => route.nav && isAllowed(route, role))\n    .map(([key, route]) => {\n      const r = { ...route };\n      r.name = key;\n      r.translation = translatePref + key;\n      return r;\n    });\n\n// <Route path={\"/dashboard/vehicle/:id\"} component={Title({ component: FleetDetails, title: t('db.navbar.vehicleDetails') })}/>\n// <Route path={\"/dashboard/fleet\"} component={Title({ component: Fleet, title: t('db.navbar.vehicles') })}/>\n// <Route path={\"/dashboard/ads\"} component={Title({ component: Ads, title: 'Placements' })}/>\n// <Route path={\"/dashboard/client/:id\"} component={Title({ component: ClientDetails, title: t('db.navbar.clientDetails') })}/>\n// <Route path={\"/dashboard/clients\"} component={Title({ component: Clients, title: 'Clients' })}/>\n// { [5,11].includes(context.role) && <Route path={\"/dashboard/sales\"} component={Title({ component: Sales, title: t('db.navbar.sales') })}/>}\n// <Route path={\"/dashboard/settings\"} component={Title({ component: Settings, title: t('db.navbar.settings')})}/>\n// <Route path={\"/dashboard/campaign/:id\"} component={Title({ component: CampaignDetails, title: t('db.navbar.campaignDetails')})}/>\n// <Route path={\"/dashboard/campaigns\"} component={Title({ component: Campaigns, title: t('db.navbar.campaigns') })}/>\n// <Route path={\"/dashboard/user/:id\"} component={Title({ component: UserDetails, title: t('db.navbar.userDetails')})}/>\n// { [5,11].includes(context.role) && <Route path={\"/dashboard/users/mails\"} component={Title({ component: Mails, title: t('db.navbar.mails')})}/>}\n// { [5,11].includes(context.role) && <Route path={\"/dashboard/users\"} component={Title({ component: Users, title: t('db.navbar.users') })}/>}\n// { [1,5,11].includes(context.role) && <Route path={\"/dashboard/teams\"} component={Title({ component: Teams, title: t('db.navbar.teams') })}/>}\n// { [1,5,11].includes(context.role) && <Route path={\"/dashboard/team/:id\"} component={Title({ component: Team, title: t('db.navbar.team') })}/>}\n// { [1,5,11].includes(context.role) && <Route path={\"/dashboard/team/:id\"} component={Title({ component: Team, title: t('db.navbar.team') })}/>}\n// <Route path={\"/dashboard/general\"} component={Title({ component: General, title: t('db.navbar.general') })}/>\n","import React, { useContext } from 'react';\nimport GeneralAdmin from '../roleBased/generalAdmin';\nimport GeneralLead from '../roleBased/generalLead';\n\nimport AuthContext from \"../../../context/auth-context\";\n\nexport default () => {\n    const context = useContext(AuthContext);\n    return context.role === 1 ? <GeneralLead/> : <GeneralAdmin/>\n};\n","import {translate} from \"react-i18next\";\nimport Card from \"react-bootstrap/Card\";\nimport Spinner from \"react-bootstrap/Spinner\";\nimport React from \"react\";\nimport Row from \"react-bootstrap/Row\";\nimport Col from \"react-bootstrap/Col\";\nimport ProgressBar from \"react-bootstrap/ProgressBar\";\nimport SmallInfoCard from \"../utils/smallInfoCard\";\nimport {RoleLink} from \"../routes\";\nimport LiveMap from \"../map/liveMap\";\nimport {vehID} from \"../../../utils/vehicleProps\";\nimport DataTable from \"../utils/dataTable\";\nimport formatDate from \"../../../utils/formatDate\";\n\n\nexport const TimeSpan = translate()(({data, t}) =>\n    <Card style={{minHeight: 156}}>\n        <Card.Body>\n            {!data.loaded && (<div className=\"text-center m-3\">\n                <Spinner variant=\"warning\" animation='border'/>\n            </div>)}\n            {data.loaded &&\n            <React.Fragment>\n                <Row className=\"text-center\" style={{marginTop: 0}}>\n                    <Col>\n                        {t('db.campaign.card.date.start')}\n                        <div className=\"mini-stat-info\">\n              <span className=\"counter text-primary\">\n                {formatDate(parseInt(data.startDate))}\n              </span>\n                        </div>\n                    </Col>\n                    <Col>\n                        {t('db.campaign.card.date.end')}\n                        <div className=\"mini-stat-info\">\n              <span className=\"counter text-orange\">\n                {formatDate(parseInt(data.endDate))}\n              </span>\n                        </div>\n                    </Col>\n                </Row>\n            </React.Fragment>}\n        </Card.Body>\n        {data.loaded &&\n        <ProgressBar className=\"card-bottom-progress\" variant='warning' now={data.now} style={{borderRadius: 0}}/>}\n    </Card>);\n\nexport const Cities = translate()(({t, data}) => <SmallInfoCard item={{\n    title: t('db.campaign.card.cities.title'),\n    main: data.cities,\n    description: `${t('db.campaign.card.cities.text')} ${data.vehicles}`,\n    loaded: data.loaded,\n}}/>);\n\nexport const SaleBy = translate()(({t, data}) => <SmallInfoCard item={{\n    title: t('db.campaign.card.saleBy.title'),\n    main: <RoleLink to='user' id={data.creator._id}>\n        <span className=\"counter text-success\">{data.creator.name}</span>\n    </RoleLink>,\n    description: formatDate(parseInt(data.date)),\n    loaded: data.loaded,\n}}/>);\n\nexport const Budget = translate()(({t, data}) => <SmallInfoCard item={{\n    title: t('db.campaign.card.budget.title'),\n    main: data.budget,\n    description: `${t('db.campaign.card.budget.text')} ${data.placements}`,\n    loaded: data.loaded,\n}}/>);\n\nexport const Live = translate()(({t, data}) => <Card className=\"m-b-10\">\n    <Card.Body>\n        <h4 className=\"mt-0 header-title\">{t('db.campaign.live.title')}</h4>\n        {!data.loaded &&\n        <div className=\"text-center m-3\">\n            <Spinner variant=\"warning\" animation=\"border\"/>\n        </div>}\n        {data.loaded && <LiveMap data={data.mapData} selected={data.selected} doSelection={data.handleSelection}/>}\n    </Card.Body>\n</Card>);\n\nconst InstallPlacementStat = (props) => {\n    const total = props.data.installs.filter(i => i.installed).map(i => i.count).reduce((a, b) => a + b, 0);\n\n    return (\n        <div className=\"m-3\">\n            <Row className=\"text-center\">\n                <Col>\n                    <strong>{props.data.place.name}</strong>\n                </Col>\n                <Col>\n                    {total}/{props.data.count}\n                </Col>\n            </Row>\n            <ProgressBar striped variant={props.data.count <= total ? 'success' : 'warning'}\n                         now={total * 100 / props.data.count}/>\n        </div>)\n};\n\nexport const InstallProgress = translate()(({ t, data }) =>\n    <Card className=\"m-b-20\">\n        <Card.Body>\n            <h4 className=\"mt-0 mb-2 header-title\">{t('db.campaign.progress.title')}</h4>\n            {!data.loaded && (\n                <div className=\"text-center m-3\">\n                    <Spinner variant=\"warning\" animation=\"border\"/>\n                </div>)}\n            {data.loaded && <React.Fragment>\n                {data.placements.map(p => <InstallPlacementStat key={p._id} data={p}/>)}\n            </React.Fragment>}\n        </Card.Body>\n    </Card>);\n\nconst renderTableData = (placements) => {\n    const fleet = {};\n\n    for (const placement of placements) {\n        for (const install of placement.installs) {\n            if (!(install.vehicle._id in fleet)) fleet[install.vehicle._id] = {...install.vehicle, ads: 0, removed: 0}\n\n            if (install.installed) fleet[install.vehicle._id].ads += install.count\n            else fleet[install.vehicle._id].removed += install.count\n        }\n    }\n    return Object.values(fleet).map((fleet) => {\n        if (!fleet) return null;\n        const {_id, operator, city, ads, removed} = fleet;\n\n        return {\n            _id, city: city.name,\n            operator: operator.company || operator.operatorId,\n            ads, removed\n        };\n    });\n}\n\nexport const ActivityTable = translate()(({t, data}) => {\n    const thead = [t('db.campaign.atable.id'),\n        t('db.campaign.atable.city'),\n        t('db.campaign.atable.operator'),\n        t('db.campaign.atable.ads'),\n        t('db.campaign.atable.removed')];\n    const columns = [\n        {\n            data: '_id',\n            render: (data) => {\n                return vehID(data);\n            }\n        },\n        {\n            data: 'city'\n        },\n        {\n            data: 'operator'\n        },\n        {\n            data: 'ads'\n        },\n        {\n            data: 'removed'\n        }\n    ];\n\n    return (<Card className=\"m-b-20\">\n        <Card.Body>\n            <h4 className=\"mt-0 header-title\">{t('db.campaign.atable.title')}</h4>\n            <DataTable data={renderTableData(data.placements)} columns={columns} thead={thead} rowCallback={data.rowCallback}/>\n        </Card.Body>\n    </Card>)\n});\n"],"sourceRoot":""}